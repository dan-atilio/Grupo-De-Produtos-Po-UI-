import { Component, EventEmitter, Input, Output } from '@angular/core';
import { environment } from '../../../environments/environment';
import { convertToBoolean, isTypeof } from '../../../util';
import * as i0 from "@angular/core";
import * as i1 from "@po-ui/ng-components";
import * as i2 from "../../../services/pro-language/services/pro-language.service";
import * as i3 from "@angular/common";
import * as i4 from "@angular/forms";
/**
 * @docsPrivate
 *
 * @description
 *
 * Componente para definição de cor de fundo e dos logotipos primário e secundário para os templates
 * de `po-page-login` e demais templates de login.
 */
export class ProPageBackgroundComponent {
    /** Caminho para a logomarca localizada na parte superior. */
    set logo(value) {
        this._logo = isTypeof(value, 'string') && value.trim() ? value : undefined;
    }
    get logo() {
        return this._logo;
    }
    /**
     * @optional
     *
     * @description
     *
     * Caminho para a logomarca localizada no rodapé.
     */
    set secondaryLogo(value) {
        this._secondaryLogo =
            isTypeof(value, 'string') && value.trim() ? value : undefined;
    }
    get secondaryLogo() {
        return this._secondaryLogo;
    }
    /** Define se o seletor de idiomas deve ser exibido. */
    set showSelectLanguage(showSelectLanguage) {
        this._showSelectLanguage = convertToBoolean(showSelectLanguage);
    }
    get showSelectLanguage() {
        return this._showSelectLanguage;
    }
    /**
     * @description Construtor do componente
     * @param poLanguageService Serviço de idioma do PO UI
     * @param proLanguageService Serviço de idiomas do Protheus
     */
    constructor(poLanguageService, proLanguageService) {
        this.poLanguageService = poLanguageService;
        this.proLanguageService = proLanguageService;
        this.selectLanguageOptions = [];
        /**
         * Evento disparado ao selecionar alguma opção no seletor de idiomas.
         * Para este evento será passado como parâmetro o valor de idioma selecionado.
         */
        // tslint:disable-next-line: no-output-rename
        this.selectedLanguage = new EventEmitter();
        this.updateLangs();
    }
    /**
     * @description Atualiza os idiomas disponíveis
     */
    updateLangs() {
        this.proLanguageService.setChannelAsHTTP(environment.useHTTP);
        this.proLanguageService.getListOfLanguages().subscribe({
            next: (langs) => {
                this.selectLanguageOptions = langs.map((language) => {
                    return {
                        label: language.description,
                        value: language.language,
                    };
                });
            },
            error: (error) => {
                console.error(error);
            },
        });
    }
    ngOnInit() {
        this.selectedLanguageOption = this.poLanguageService.getShortLanguage();
    }
    onChangeLanguage() {
        this.selectedLanguage.emit(this.selectedLanguageOption);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.9", ngImport: i0, type: ProPageBackgroundComponent, deps: [{ token: i1.PoLanguageService }, { token: i2.ProLanguageService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.9", type: ProPageBackgroundComponent, selector: "pro-page-background", inputs: { background: ["p-background", "background"], hideLogo: ["p-hide-logo", "hideLogo"], highlightInfo: ["p-highlight-info", "highlightInfo"], logo: ["p-logo", "logo"], secondaryLogo: ["p-secondary-logo", "secondaryLogo"], showSelectLanguage: ["p-show-select-language", "showSelectLanguage"] }, outputs: { selectedLanguage: "p-selected-language" }, ngImport: i0, template: "<div class=\"po-page-login-container\">\r\n  <div\r\n    class=\"po-page-login-panel\">\r\n    <img\r\n      *ngIf=\"logo\"\r\n      class=\"po-page-background-main-logo-image\"\r\n      [class.po-page-background-hide-logo-image]=\"hideLogo\"\r\n      alt=\"main-logo\"\r\n      [src]=\"logo\"\r\n    />\r\n\r\n    <div class=\"po-page-login-body\">\r\n      <div class=\"po-page-login-panel-content pro-bg-component\">\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </div>\r\n    <div class=\"po-page-background-footer po-sm-12\">\r\n      <po-divider class=\"po-page-background-footer-mobile-only\"></po-divider>\r\n\r\n      <div class=\"po-page-background-footer-content\">\r\n        <div\r\n          *ngIf=\"showSelectLanguage\"\r\n          class=\"po-page-background-footer-select\"\r\n        >\r\n          <po-select\r\n            *ngIf=\"selectLanguageOptions\"\r\n            name=\"selectedLanguageOption\"\r\n            [(ngModel)]=\"selectedLanguageOption\"\r\n            [p-options]=\"selectLanguageOptions\"\r\n            (p-change)=\"onChangeLanguage()\"\r\n          >\r\n          </po-select>\r\n        </div>\r\n\r\n        <div\r\n          class=\"po-page-background-secondary-logo\"\r\n          [ngClass]=\"\r\n            showSelectLanguage\r\n              ? 'po-page-background-secondary-logo-right'\r\n              : 'po-page-background-secondary-logo-centered'\r\n          \"\r\n        >\r\n          <img\r\n            *ngIf=\"secondaryLogo\"\r\n            class=\"po-page-background-secondary-logo-image\"\r\n            alt=\"secondary-logo\"\r\n            [src]=\"secondaryLogo\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div\r\n    *ngIf=\"background\"\r\n    [ngClass]=\"\r\n      background\r\n        ? 'po-page-login-highlight-image'\r\n        : 'po-page-login-highlight-image-off'\r\n    \"\r\n    [style.background-image]=\"'url(' + background + ')'\"\r\n  >\r\n    <div class=\"po-page-login-highlight-text\">\r\n      <div class=\"po-font-display\">{{ highlightInfo }}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".pro-bg-component{margin-bottom:2%;padding:8%}\n"], dependencies: [{ kind: "directive", type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i1.PoDividerComponent, selector: "po-divider" }, { kind: "component", type: i1.PoSelectComponent, selector: "po-select", inputs: ["p-readonly", "p-placeholder", "p-options", "p-field-label", "p-field-value"], outputs: ["ngModelChange"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.9", ngImport: i0, type: ProPageBackgroundComponent, decorators: [{
            type: Component,
            args: [{ selector: 'pro-page-background', template: "<div class=\"po-page-login-container\">\r\n  <div\r\n    class=\"po-page-login-panel\">\r\n    <img\r\n      *ngIf=\"logo\"\r\n      class=\"po-page-background-main-logo-image\"\r\n      [class.po-page-background-hide-logo-image]=\"hideLogo\"\r\n      alt=\"main-logo\"\r\n      [src]=\"logo\"\r\n    />\r\n\r\n    <div class=\"po-page-login-body\">\r\n      <div class=\"po-page-login-panel-content pro-bg-component\">\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </div>\r\n    <div class=\"po-page-background-footer po-sm-12\">\r\n      <po-divider class=\"po-page-background-footer-mobile-only\"></po-divider>\r\n\r\n      <div class=\"po-page-background-footer-content\">\r\n        <div\r\n          *ngIf=\"showSelectLanguage\"\r\n          class=\"po-page-background-footer-select\"\r\n        >\r\n          <po-select\r\n            *ngIf=\"selectLanguageOptions\"\r\n            name=\"selectedLanguageOption\"\r\n            [(ngModel)]=\"selectedLanguageOption\"\r\n            [p-options]=\"selectLanguageOptions\"\r\n            (p-change)=\"onChangeLanguage()\"\r\n          >\r\n          </po-select>\r\n        </div>\r\n\r\n        <div\r\n          class=\"po-page-background-secondary-logo\"\r\n          [ngClass]=\"\r\n            showSelectLanguage\r\n              ? 'po-page-background-secondary-logo-right'\r\n              : 'po-page-background-secondary-logo-centered'\r\n          \"\r\n        >\r\n          <img\r\n            *ngIf=\"secondaryLogo\"\r\n            class=\"po-page-background-secondary-logo-image\"\r\n            alt=\"secondary-logo\"\r\n            [src]=\"secondaryLogo\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div\r\n    *ngIf=\"background\"\r\n    [ngClass]=\"\r\n      background\r\n        ? 'po-page-login-highlight-image'\r\n        : 'po-page-login-highlight-image-off'\r\n    \"\r\n    [style.background-image]=\"'url(' + background + ')'\"\r\n  >\r\n    <div class=\"po-page-login-highlight-text\">\r\n      <div class=\"po-font-display\">{{ highlightInfo }}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n", styles: [".pro-bg-component{margin-bottom:2%;padding:8%}\n"] }]
        }], ctorParameters: () => [{ type: i1.PoLanguageService }, { type: i2.ProLanguageService }], propDecorators: { background: [{
                type: Input,
                args: ['p-background']
            }], hideLogo: [{
                type: Input,
                args: ['p-hide-logo']
            }], highlightInfo: [{
                type: Input,
                args: ['p-highlight-info']
            }], logo: [{
                type: Input,
                args: ['p-logo']
            }], secondaryLogo: [{
                type: Input,
                args: ['p-secondary-logo']
            }], showSelectLanguage: [{
                type: Input,
                args: ['p-show-select-language']
            }], selectedLanguage: [{
                type: Output,
                args: ['p-selected-language']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvLXBhZ2UtYmFja2dyb3VuZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9wcm90aGV1cy1saWItY29yZS9zcmMvY29tcG9uZW50cy9wcm8tcGFnZXMvcHJvLXBhZ2UtYmFja2dyb3VuZC9wcm8tcGFnZS1iYWNrZ3JvdW5kLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3Byb3RoZXVzLWxpYi1jb3JlL3NyYy9jb21wb25lbnRzL3Byby1wYWdlcy9wcm8tcGFnZS1iYWNrZ3JvdW5kL3Byby1wYWdlLWJhY2tncm91bmQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUcvRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFHaEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7Ozs7O0FBUTNEOzs7Ozs7O0dBT0c7QUFDSCxNQUFNLE9BQU8sMEJBQTBCO0lBb0JyQyw2REFBNkQ7SUFDN0QsSUFBcUIsSUFBSSxDQUFDLEtBQVU7UUFDbEMsSUFBSSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDN0UsQ0FBQztJQUVELElBQUksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsSUFBK0IsYUFBYSxDQUFDLEtBQVU7UUFDckQsSUFBSSxDQUFDLGNBQWM7WUFDakIsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ2xFLENBQUM7SUFFRCxJQUFJLGFBQWE7UUFDZixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDN0IsQ0FBQztJQUVELHVEQUF1RDtJQUN2RCxJQUFxQyxrQkFBa0IsQ0FDckQsa0JBQTJCO1FBRTNCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFDRCxJQUFJLGtCQUFrQjtRQUNwQixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUNsQyxDQUFDO0lBVUQ7Ozs7T0FJRztJQUNILFlBQ1MsaUJBQW9DLEVBQ25DLGtCQUFzQztRQUR2QyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ25DLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7UUFoRWhELDBCQUFxQixHQUEwQixFQUFFLENBQUM7UUFpRGxEOzs7V0FHRztRQUNILDZDQUE2QztRQUU3QyxxQkFBZ0IsR0FBdUIsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQVc3RCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsV0FBVztRQUNULElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDOUQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGtCQUFrQixFQUFFLENBQUMsU0FBUyxDQUFDO1lBQ3JELElBQUksRUFBRSxDQUFDLEtBQXNCLEVBQUUsRUFBRTtnQkFDL0IsSUFBSSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFvQixFQUFFLEVBQUU7b0JBQzlELE9BQXVCO3dCQUNyQixLQUFLLEVBQUUsUUFBUSxDQUFDLFdBQVc7d0JBQzNCLEtBQUssRUFBRSxRQUFRLENBQUMsUUFBUTtxQkFDekIsQ0FBQztnQkFDSixDQUFDLENBQUMsQ0FBQztZQUNMLENBQUM7WUFDRCxLQUFLLEVBQUUsQ0FBQyxLQUFVLEVBQUUsRUFBRTtnQkFDcEIsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN2QixDQUFDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUUsQ0FBQztJQUVELGdCQUFnQjtRQUNkLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7SUFDMUQsQ0FBQzs4R0FyR1UsMEJBQTBCO2tHQUExQiwwQkFBMEIsNFpDdEJ2QyxtbEVBbUVBOzsyRkQ3Q2EsMEJBQTBCO2tCQWR0QyxTQUFTOytCQUNFLHFCQUFxQjt1SEF1QlIsVUFBVTtzQkFBaEMsS0FBSzt1QkFBQyxjQUFjO2dCQUlDLFFBQVE7c0JBQTdCLEtBQUs7dUJBQUMsYUFBYTtnQkFJTyxhQUFhO3NCQUF2QyxLQUFLO3VCQUFDLGtCQUFrQjtnQkFHSixJQUFJO3NCQUF4QixLQUFLO3VCQUFDLFFBQVE7Z0JBZWdCLGFBQWE7c0JBQTNDLEtBQUs7dUJBQUMsa0JBQWtCO2dCQVVZLGtCQUFrQjtzQkFBdEQsS0FBSzt1QkFBQyx3QkFBd0I7Z0JBZS9CLGdCQUFnQjtzQkFEZixNQUFNO3VCQUFDLHFCQUFxQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUG9MYW5ndWFnZSwgUG9MYW5ndWFnZVNlcnZpY2UsIFBvU2VsZWN0T3B0aW9uIH0gZnJvbSAnQHBvLXVpL25nLWNvbXBvbmVudHMnO1xyXG5cclxuaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tICcuLi8uLi8uLi9lbnZpcm9ubWVudHMvZW52aXJvbm1lbnQnO1xyXG5pbXBvcnQgeyBQcm9MYW5ndWFnZUxpc3QgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wcm8tbGFuZ3VhZ2UvbW9kZWxzL3Byby1sYW5ndWFnZS5saXN0JztcclxuaW1wb3J0IHsgUHJvTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcHJvLWxhbmd1YWdlL3NlcnZpY2VzL3Byby1sYW5ndWFnZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiwgaXNUeXBlb2YgfSBmcm9tICcuLi8uLi8uLi91dGlsJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAncHJvLXBhZ2UtYmFja2dyb3VuZCcsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL3Byby1wYWdlLWJhY2tncm91bmQuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3Byby1wYWdlLWJhY2tncm91bmQuY29tcG9uZW50LmNzcyddLFxyXG59KVxyXG5cclxuLyoqXHJcbiAqIEBkb2NzUHJpdmF0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogQ29tcG9uZW50ZSBwYXJhIGRlZmluacOnw6NvIGRlIGNvciBkZSBmdW5kbyBlIGRvcyBsb2dvdGlwb3MgcHJpbcOhcmlvIGUgc2VjdW5kw6FyaW8gcGFyYSBvcyB0ZW1wbGF0ZXNcclxuICogZGUgYHBvLXBhZ2UtbG9naW5gIGUgZGVtYWlzIHRlbXBsYXRlcyBkZSBsb2dpbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcm9QYWdlQmFja2dyb3VuZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgcHJpdmF0ZSBfbG9nbz86IHN0cmluZztcclxuICBwcml2YXRlIF9zZWNvbmRhcnlMb2dvPzogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3Nob3dTZWxlY3RMYW5ndWFnZT86IGJvb2xlYW47XHJcbiAgc2VsZWN0ZWRMYW5ndWFnZU9wdGlvbjogc3RyaW5nO1xyXG5cclxuICBzZWxlY3RMYW5ndWFnZU9wdGlvbnM6IEFycmF5PFBvU2VsZWN0T3B0aW9uPiA9IFtdO1xyXG5cclxuICAvKiogSW5zZXJlIHVtYSBpbWFnZW0gZGUgZGVzdGFxdWUgYW8gbGFkbyBkaXJlaXRvIGRvIGNvbnRhaW5lci4gKi9cclxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWlucHV0LXJlbmFtZVxyXG4gIEBJbnB1dCgncC1iYWNrZ3JvdW5kJykgYmFja2dyb3VuZD86IHN0cmluZztcclxuXHJcbiAgLyoqIERlc2lnbmEgc2UgbyBsb2dvdGlwbyBkZXZlIGRlc2FwYXJlY2VyIGVtIHJlc29sdcOnw7VlcyBtZW5vcmVzLiAqL1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8taW5wdXQtcmVuYW1lXHJcbiAgQElucHV0KCdwLWhpZGUtbG9nbycpIGhpZGVMb2dvPzogYm9vbGVhbjtcclxuXHJcbiAgLyoqIFRleHRvIGRlIGRlc3RhcXVlIHNvYnJlcG9zdG8gw6AgaW1hZ2VtIGRlIGRlc3RhcXVlLiBFc3NhIG9ww6fDo28gw6kgdXRpbGl6YWRhIGVtIGNvbmp1bnRvIGNvbSBvIGF0cmlidXRvIGBwLWJhY2tncm91bmRgLiAqL1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8taW5wdXQtcmVuYW1lXHJcbiAgQElucHV0KCdwLWhpZ2hsaWdodC1pbmZvJykgaGlnaGxpZ2h0SW5mbz86IHN0cmluZztcclxuXHJcbiAgLyoqIENhbWluaG8gcGFyYSBhIGxvZ29tYXJjYSBsb2NhbGl6YWRhIG5hIHBhcnRlIHN1cGVyaW9yLiAqL1xyXG4gIEBJbnB1dCgncC1sb2dvJykgc2V0IGxvZ28odmFsdWU6IGFueSkge1xyXG4gICAgdGhpcy5fbG9nbyA9IGlzVHlwZW9mKHZhbHVlLCAnc3RyaW5nJykgJiYgdmFsdWUudHJpbSgpID8gdmFsdWUgOiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBnZXQgbG9nbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9sb2dvO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIENhbWluaG8gcGFyYSBhIGxvZ29tYXJjYSBsb2NhbGl6YWRhIG5vIHJvZGFww6kuXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXNlY29uZGFyeS1sb2dvJykgc2V0IHNlY29uZGFyeUxvZ28odmFsdWU6IGFueSkge1xyXG4gICAgdGhpcy5fc2Vjb25kYXJ5TG9nbyA9XHJcbiAgICAgIGlzVHlwZW9mKHZhbHVlLCAnc3RyaW5nJykgJiYgdmFsdWUudHJpbSgpID8gdmFsdWUgOiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBnZXQgc2Vjb25kYXJ5TG9nbygpIHtcclxuICAgIHJldHVybiB0aGlzLl9zZWNvbmRhcnlMb2dvO1xyXG4gIH1cclxuXHJcbiAgLyoqIERlZmluZSBzZSBvIHNlbGV0b3IgZGUgaWRpb21hcyBkZXZlIHNlciBleGliaWRvLiAqL1xyXG4gIEBJbnB1dCgncC1zaG93LXNlbGVjdC1sYW5ndWFnZScpIHNldCBzaG93U2VsZWN0TGFuZ3VhZ2UoXHJcbiAgICBzaG93U2VsZWN0TGFuZ3VhZ2U6IGJvb2xlYW5cclxuICApIHtcclxuICAgIHRoaXMuX3Nob3dTZWxlY3RMYW5ndWFnZSA9IGNvbnZlcnRUb0Jvb2xlYW4oc2hvd1NlbGVjdExhbmd1YWdlKTtcclxuICB9XHJcbiAgZ2V0IHNob3dTZWxlY3RMYW5ndWFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9zaG93U2VsZWN0TGFuZ3VhZ2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFdmVudG8gZGlzcGFyYWRvIGFvIHNlbGVjaW9uYXIgYWxndW1hIG9ww6fDo28gbm8gc2VsZXRvciBkZSBpZGlvbWFzLlxyXG4gICAqIFBhcmEgZXN0ZSBldmVudG8gc2Vyw6EgcGFzc2FkbyBjb21vIHBhcsOibWV0cm8gbyB2YWxvciBkZSBpZGlvbWEgc2VsZWNpb25hZG8uXHJcbiAgICovXHJcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1vdXRwdXQtcmVuYW1lXHJcbiAgQE91dHB1dCgncC1zZWxlY3RlZC1sYW5ndWFnZScpXHJcbiAgc2VsZWN0ZWRMYW5ndWFnZT86IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBkZXNjcmlwdGlvbiBDb25zdHJ1dG9yIGRvIGNvbXBvbmVudGVcclxuICAgKiBAcGFyYW0gcG9MYW5ndWFnZVNlcnZpY2UgU2VydmnDp28gZGUgaWRpb21hIGRvIFBPIFVJXHJcbiAgICogQHBhcmFtIHByb0xhbmd1YWdlU2VydmljZSBTZXJ2acOnbyBkZSBpZGlvbWFzIGRvIFByb3RoZXVzXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwdWJsaWMgcG9MYW5ndWFnZVNlcnZpY2U6IFBvTGFuZ3VhZ2VTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBwcm9MYW5ndWFnZVNlcnZpY2U6IFByb0xhbmd1YWdlU2VydmljZVxyXG4gICkge1xyXG4gICAgdGhpcy51cGRhdGVMYW5ncygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uIEF0dWFsaXphIG9zIGlkaW9tYXMgZGlzcG9uw612ZWlzXHJcbiAgICovXHJcbiAgdXBkYXRlTGFuZ3MoKTogdm9pZCB7XHJcbiAgICB0aGlzLnByb0xhbmd1YWdlU2VydmljZS5zZXRDaGFubmVsQXNIVFRQKGVudmlyb25tZW50LnVzZUhUVFApO1xyXG4gICAgdGhpcy5wcm9MYW5ndWFnZVNlcnZpY2UuZ2V0TGlzdE9mTGFuZ3VhZ2VzKCkuc3Vic2NyaWJlKHtcclxuICAgICAgbmV4dDogKGxhbmdzOiBQcm9MYW5ndWFnZUxpc3QpID0+IHtcclxuICAgICAgICB0aGlzLnNlbGVjdExhbmd1YWdlT3B0aW9ucyA9IGxhbmdzLm1hcCgobGFuZ3VhZ2U6IFBvTGFuZ3VhZ2UpID0+IHtcclxuICAgICAgICAgIHJldHVybiA8UG9TZWxlY3RPcHRpb24+e1xyXG4gICAgICAgICAgICBsYWJlbDogbGFuZ3VhZ2UuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHZhbHVlOiBsYW5ndWFnZS5sYW5ndWFnZSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGVycm9yOiAoZXJyb3I6IGFueSkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRMYW5ndWFnZU9wdGlvbiA9IHRoaXMucG9MYW5ndWFnZVNlcnZpY2UuZ2V0U2hvcnRMYW5ndWFnZSgpO1xyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2VMYW5ndWFnZSgpIHtcclxuICAgIHRoaXMuc2VsZWN0ZWRMYW5ndWFnZS5lbWl0KHRoaXMuc2VsZWN0ZWRMYW5ndWFnZU9wdGlvbik7XHJcbiAgfVxyXG59XHJcbiIsIjxkaXYgY2xhc3M9XCJwby1wYWdlLWxvZ2luLWNvbnRhaW5lclwiPlxyXG4gIDxkaXZcclxuICAgIGNsYXNzPVwicG8tcGFnZS1sb2dpbi1wYW5lbFwiPlxyXG4gICAgPGltZ1xyXG4gICAgICAqbmdJZj1cImxvZ29cIlxyXG4gICAgICBjbGFzcz1cInBvLXBhZ2UtYmFja2dyb3VuZC1tYWluLWxvZ28taW1hZ2VcIlxyXG4gICAgICBbY2xhc3MucG8tcGFnZS1iYWNrZ3JvdW5kLWhpZGUtbG9nby1pbWFnZV09XCJoaWRlTG9nb1wiXHJcbiAgICAgIGFsdD1cIm1haW4tbG9nb1wiXHJcbiAgICAgIFtzcmNdPVwibG9nb1wiXHJcbiAgICAvPlxyXG5cclxuICAgIDxkaXYgY2xhc3M9XCJwby1wYWdlLWxvZ2luLWJvZHlcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInBvLXBhZ2UtbG9naW4tcGFuZWwtY29udGVudCBwcm8tYmctY29tcG9uZW50XCI+XHJcbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cInBvLXBhZ2UtYmFja2dyb3VuZC1mb290ZXIgcG8tc20tMTJcIj5cclxuICAgICAgPHBvLWRpdmlkZXIgY2xhc3M9XCJwby1wYWdlLWJhY2tncm91bmQtZm9vdGVyLW1vYmlsZS1vbmx5XCI+PC9wby1kaXZpZGVyPlxyXG5cclxuICAgICAgPGRpdiBjbGFzcz1cInBvLXBhZ2UtYmFja2dyb3VuZC1mb290ZXItY29udGVudFwiPlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgICpuZ0lmPVwic2hvd1NlbGVjdExhbmd1YWdlXCJcclxuICAgICAgICAgIGNsYXNzPVwicG8tcGFnZS1iYWNrZ3JvdW5kLWZvb3Rlci1zZWxlY3RcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxwby1zZWxlY3RcclxuICAgICAgICAgICAgKm5nSWY9XCJzZWxlY3RMYW5ndWFnZU9wdGlvbnNcIlxyXG4gICAgICAgICAgICBuYW1lPVwic2VsZWN0ZWRMYW5ndWFnZU9wdGlvblwiXHJcbiAgICAgICAgICAgIFsobmdNb2RlbCldPVwic2VsZWN0ZWRMYW5ndWFnZU9wdGlvblwiXHJcbiAgICAgICAgICAgIFtwLW9wdGlvbnNdPVwic2VsZWN0TGFuZ3VhZ2VPcHRpb25zXCJcclxuICAgICAgICAgICAgKHAtY2hhbmdlKT1cIm9uQ2hhbmdlTGFuZ3VhZ2UoKVwiXHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICA8L3BvLXNlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY2xhc3M9XCJwby1wYWdlLWJhY2tncm91bmQtc2Vjb25kYXJ5LWxvZ29cIlxyXG4gICAgICAgICAgW25nQ2xhc3NdPVwiXHJcbiAgICAgICAgICAgIHNob3dTZWxlY3RMYW5ndWFnZVxyXG4gICAgICAgICAgICAgID8gJ3BvLXBhZ2UtYmFja2dyb3VuZC1zZWNvbmRhcnktbG9nby1yaWdodCdcclxuICAgICAgICAgICAgICA6ICdwby1wYWdlLWJhY2tncm91bmQtc2Vjb25kYXJ5LWxvZ28tY2VudGVyZWQnXHJcbiAgICAgICAgICBcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgKm5nSWY9XCJzZWNvbmRhcnlMb2dvXCJcclxuICAgICAgICAgICAgY2xhc3M9XCJwby1wYWdlLWJhY2tncm91bmQtc2Vjb25kYXJ5LWxvZ28taW1hZ2VcIlxyXG4gICAgICAgICAgICBhbHQ9XCJzZWNvbmRhcnktbG9nb1wiXHJcbiAgICAgICAgICAgIFtzcmNdPVwic2Vjb25kYXJ5TG9nb1wiXHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG5cclxuICA8ZGl2XHJcbiAgICAqbmdJZj1cImJhY2tncm91bmRcIlxyXG4gICAgW25nQ2xhc3NdPVwiXHJcbiAgICAgIGJhY2tncm91bmRcclxuICAgICAgICA/ICdwby1wYWdlLWxvZ2luLWhpZ2hsaWdodC1pbWFnZSdcclxuICAgICAgICA6ICdwby1wYWdlLWxvZ2luLWhpZ2hsaWdodC1pbWFnZS1vZmYnXHJcbiAgICBcIlxyXG4gICAgW3N0eWxlLmJhY2tncm91bmQtaW1hZ2VdPVwiJ3VybCgnICsgYmFja2dyb3VuZCArICcpJ1wiXHJcbiAgPlxyXG4gICAgPGRpdiBjbGFzcz1cInBvLXBhZ2UtbG9naW4taGlnaGxpZ2h0LXRleHRcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInBvLWZvbnQtZGlzcGxheVwiPnt7IGhpZ2hsaWdodEluZm8gfX08L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5cclxuIl19