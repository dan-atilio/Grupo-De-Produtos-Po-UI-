import { Component, EventEmitter, ViewChild } from '@angular/core';
import { PoModalComponent } from '../../../components/po-modal/po-modal.component';
import { poHttpInterceptorDetailLiteralsDefault } from './po-http-interceptor-detail-literals.interface';
import * as i0 from "@angular/core";
import * as i1 from "../../../services/po-language/po-language.service";
import * as i2 from "@angular/common";
import * as i3 from "../../../components/po-accordion/po-accordion.component";
import * as i4 from "../../../components/po-accordion/po-accordion-item/po-accordion-item.component";
import * as i5 from "../../../components/po-modal/po-modal.component";
import * as i6 from "../../../components/po-tag/po-tag.component";
function PoHttpInterceptorDetailComponent_po_accordion_2_po_accordion_item_1_ng_template_1_Template(rf, ctx) { }
const _c0 = a0 => ({ detail: a0 });
function PoHttpInterceptorDetailComponent_po_accordion_2_po_accordion_item_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "po-accordion-item", 7);
    i0.ɵɵtemplate(1, PoHttpInterceptorDetailComponent_po_accordion_2_po_accordion_item_1_ng_template_1_Template, 0, 0, "ng-template", 8);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const detail_r6 = ctx.$implicit;
    const ctx_r5 = i0.ɵɵnextContext(2);
    const _r4 = i0.ɵɵreference(6);
    i0.ɵɵproperty("p-label", ctx_r5.formatDetailItemTitle(detail_r6));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngTemplateOutlet", _r4)("ngTemplateOutletContext", i0.ɵɵpureFunction1(3, _c0, detail_r6));
} }
function PoHttpInterceptorDetailComponent_po_accordion_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "po-accordion", 5);
    i0.ɵɵtemplate(1, PoHttpInterceptorDetailComponent_po_accordion_2_po_accordion_item_1_Template, 2, 5, "po-accordion-item", 6);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r0.details);
} }
const _c1 = () => ({});
function PoHttpInterceptorDetailComponent_ng_template_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainer(0, 8);
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    const _r4 = i0.ɵɵreference(6);
    i0.ɵɵproperty("ngTemplateOutlet", _r4)("ngTemplateOutletContext", i0.ɵɵpureFunction1(3, _c0, ctx_r1.details[0] || i0.ɵɵpureFunction0(2, _c1)));
} }
function PoHttpInterceptorDetailComponent_ng_template_5_div_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 11);
    i0.ɵɵelement(1, "po-tag", 12);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const detail_r8 = i0.ɵɵnextContext().detail;
    const ctx_r9 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("p-color", ctx_r9.typeColor(detail_r8.type))("p-value", ctx_r9.typeValue(detail_r8.type));
} }
function PoHttpInterceptorDetailComponent_ng_template_5_p_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "p")(1, "strong");
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const detail_r8 = i0.ɵɵnextContext().detail;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(detail_r8.code);
} }
function PoHttpInterceptorDetailComponent_ng_template_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtemplate(0, PoHttpInterceptorDetailComponent_ng_template_5_div_0_Template, 2, 2, "div", 9)(1, PoHttpInterceptorDetailComponent_ng_template_5_p_1_Template, 3, 1, "p", 10);
    i0.ɵɵelementStart(2, "div", 1)(3, "p");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const detail_r8 = ctx.detail;
    i0.ɵɵproperty("ngIf", detail_r8.type);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", detail_r8.detailTitle);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(detail_r8.detailedMessage);
} }
export const colors = { success: 'color-11', error: 'color-07', warning: 'color-08', info: '' };
/**
 * @docsPrivate
 *
 * @description
 *
 * Componente para a modal de detalhes exibida pelo interceptor
 */
export class PoHttpInterceptorDetailComponent {
    languageService;
    modal;
    closed = new EventEmitter();
    details = [];
    title;
    language;
    literals;
    // eslint-disable-next-line @typescript-eslint/member-ordering
    primaryAction;
    constructor(languageService) {
        this.languageService = languageService;
        this.language = this.languageService?.getShortLanguage();
        this.literals = poHttpInterceptorDetailLiteralsDefault[this.language];
    }
    ngOnInit() {
        this.primaryAction = {
            action: () => this.close(),
            label: this.literals.closeButton
        };
    }
    set detail(details) {
        if (details && details.length) {
            this.details = this.filterByValidDetails(details);
        }
        this.title = this.formatTitle(this.details);
    }
    close() {
        this.modal.close();
        this.closed.emit();
    }
    formatDetailItemTitle(detail) {
        return detail.detailTitle
            ? detail.detailTitle
            : detail.code
                ? `${detail.code} - ${detail.message}`
                : detail.message;
    }
    open() {
        this.modal.open();
    }
    typeColor(type) {
        return colors[type];
    }
    typeValue(type) {
        return poHttpInterceptorDetailLiteralsDefault[this.language][type] || type;
    }
    addValidDetail(newDetails, detail) {
        return detail.message ? newDetails.concat(this.getValidDetailProperties(detail)) : newDetails;
    }
    getValidDetailProperties({ code, message, detailedMessage, type, detailTitle }) {
        return detailTitle
            ? { code, message, detailedMessage, type, detailTitle }
            : { code, message, detailedMessage, type };
    }
    filterByValidDetails(details) {
        return details.reduce((newDetails, detail) => this.addValidDetail(newDetails, detail), []);
    }
    formatTitle(details) {
        return details.length > 1
            ? `${this.literals.details} (${details.length})`
            : details.length === 1
                ? this.formatDetailItemTitle(details[0])
                : this.literals.detail;
    }
    static ɵfac = function PoHttpInterceptorDetailComponent_Factory(t) { return new (t || PoHttpInterceptorDetailComponent)(i0.ɵɵdirectiveInject(i1.PoLanguageService)); };
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoHttpInterceptorDetailComponent, selectors: [["po-http-interceptor-detail"]], viewQuery: function PoHttpInterceptorDetailComponent_Query(rf, ctx) { if (rf & 1) {
            i0.ɵɵviewQuery(PoModalComponent, 7);
        } if (rf & 2) {
            let _t;
            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modal = _t.first);
        } }, decls: 7, vars: 4, consts: [["p-hide-close", "", "p-size", "lg", 3, "p-primary-action", "p-title"], [1, "po-row"], ["class", "po-md-12 po-mt-1 po-mb-1", 4, "ngIf", "ngIfElse"], ["elseBlock", ""], ["body", ""], [1, "po-md-12", "po-mt-1", "po-mb-1"], [3, "p-label", 4, "ngFor", "ngForOf"], [3, "p-label"], [3, "ngTemplateOutlet", "ngTemplateOutletContext"], ["class", "po-row po-mb-1", 4, "ngIf"], [4, "ngIf"], [1, "po-row", "po-mb-1"], [3, "p-color", "p-value"]], template: function PoHttpInterceptorDetailComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵelementStart(0, "po-modal", 0)(1, "div", 1);
            i0.ɵɵtemplate(2, PoHttpInterceptorDetailComponent_po_accordion_2_Template, 2, 1, "po-accordion", 2);
            i0.ɵɵelementEnd()();
            i0.ɵɵtemplate(3, PoHttpInterceptorDetailComponent_ng_template_3_Template, 1, 5, "ng-template", null, 3, i0.ɵɵtemplateRefExtractor)(5, PoHttpInterceptorDetailComponent_ng_template_5_Template, 5, 3, "ng-template", null, 4, i0.ɵɵtemplateRefExtractor);
        } if (rf & 2) {
            const _r2 = i0.ɵɵreference(4);
            i0.ɵɵproperty("p-primary-action", ctx.primaryAction)("p-title", ctx.title);
            i0.ɵɵadvance(2);
            i0.ɵɵproperty("ngIf", ctx.details.length > 1)("ngIfElse", _r2);
        } }, dependencies: [i2.NgForOf, i2.NgIf, i2.NgTemplateOutlet, i3.PoAccordionComponent, i4.PoAccordionItemComponent, i5.PoModalComponent, i6.PoTagComponent], encapsulation: 2 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoHttpInterceptorDetailComponent, [{
        type: Component,
        args: [{ selector: 'po-http-interceptor-detail', template: "<po-modal p-hide-close p-size=\"lg\" [p-primary-action]=\"primaryAction\" [p-title]=\"title\">\n  <div class=\"po-row\">\n    <po-accordion class=\"po-md-12 po-mt-1 po-mb-1\" *ngIf=\"details.length > 1; else elseBlock\">\n      <po-accordion-item *ngFor=\"let detail of details\" [p-label]=\"formatDetailItemTitle(detail)\">\n        <ng-template [ngTemplateOutlet]=\"body\" [ngTemplateOutletContext]=\"{ detail }\"></ng-template>\n      </po-accordion-item>\n    </po-accordion>\n  </div>\n</po-modal>\n\n<ng-template #elseBlock>\n  <ng-container [ngTemplateOutlet]=\"body\" [ngTemplateOutletContext]=\"{ detail: details[0] || {} }\"></ng-container>\n</ng-template>\n\n<ng-template #body let-detail=\"detail\">\n  <div *ngIf=\"detail.type\" class=\"po-row po-mb-1\">\n    <po-tag [p-color]=\"typeColor(detail.type)\" [p-value]=\"typeValue(detail.type)\"></po-tag>\n  </div>\n\n  <p *ngIf=\"detail.detailTitle\">\n    <strong>{{ detail.code }}</strong>\n  </p>\n\n  <div class=\"po-row\">\n    <p>{{ detail.detailedMessage }}</p>\n  </div>\n</ng-template>\n" }]
    }], () => [{ type: i1.PoLanguageService }], { modal: [{
            type: ViewChild,
            args: [PoModalComponent, { static: true }]
        }] }); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoHttpInterceptorDetailComponent, { className: "PoHttpInterceptorDetailComponent", filePath: "lib/interceptors/po-http-interceptor/po-http-interceptor-detail/po-http-interceptor-detail.component.ts", lineNumber: 23 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8taHR0cC1pbnRlcmNlcHRvci1kZXRhaWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9pbnRlcmNlcHRvcnMvcG8taHR0cC1pbnRlcmNlcHRvci9wby1odHRwLWludGVyY2VwdG9yLWRldGFpbC9wby1odHRwLWludGVyY2VwdG9yLWRldGFpbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2ludGVyY2VwdG9ycy9wby1odHRwLWludGVyY2VwdG9yL3BvLWh0dHAtaW50ZXJjZXB0b3ItZGV0YWlsL3BvLWh0dHAtaW50ZXJjZXB0b3ItZGV0YWlsLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFVLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUczRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpREFBaUQsQ0FBQztBQUduRixPQUFPLEVBQUUsc0NBQXNDLEVBQUUsTUFBTSxpREFBaUQsQ0FBQzs7Ozs7Ozs7Ozs7SUNIbkcsNENBQTRGO0lBQzFGLG9JQUE0RjtJQUM5RixpQkFBb0I7Ozs7O0lBRjhCLGlFQUF5QztJQUM1RSxjQUF5QjtJQUF6QixzQ0FBeUIsa0VBQUE7OztJQUYxQyx1Q0FBMEY7SUFDeEYsNEhBRW9CO0lBQ3RCLGlCQUFlOzs7SUFIeUIsY0FBVTtJQUFWLHdDQUFVOzs7O0lBUXBELDJCQUFnSDs7OztJQUFsRyxzQ0FBeUIsd0dBQUE7OztJQUl2QywrQkFBZ0Q7SUFDOUMsNkJBQXVGO0lBQ3pGLGlCQUFNOzs7O0lBREksY0FBa0M7SUFBbEMsMERBQWtDLDZDQUFBOzs7SUFHNUMseUJBQThCLGFBQUE7SUFDcEIsWUFBaUI7SUFBQSxpQkFBUyxFQUFBOzs7SUFBMUIsZUFBaUI7SUFBakIsb0NBQWlCOzs7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bnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIE9uSW5pdCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvTW9kYWxBY3Rpb24gfSBmcm9tICcuLi8uLi8uLi9jb21wb25lbnRzL3BvLW1vZGFsL3BvLW1vZGFsLWFjdGlvbi5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9Nb2RhbENvbXBvbmVudCB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvcG8tbW9kYWwvcG8tbW9kYWwuY29tcG9uZW50JztcblxuaW1wb3J0IHsgUG9IdHRwSW50ZXJjZXB0b3JEZXRhaWwgfSBmcm9tICcuL3BvLWh0dHAtaW50ZXJjZXB0b3ItZGV0YWlsLmludGVyZmFjZSc7XG5pbXBvcnQgeyBwb0h0dHBJbnRlcmNlcHRvckRldGFpbExpdGVyYWxzRGVmYXVsdCB9IGZyb20gJy4vcG8taHR0cC1pbnRlcmNlcHRvci1kZXRhaWwtbGl0ZXJhbHMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcG8tbGFuZ3VhZ2UvcG8tbGFuZ3VhZ2Uuc2VydmljZSc7XG5cbmV4cG9ydCBjb25zdCBjb2xvcnMgPSB7IHN1Y2Nlc3M6ICdjb2xvci0xMScsIGVycm9yOiAnY29sb3ItMDcnLCB3YXJuaW5nOiAnY29sb3ItMDgnLCBpbmZvOiAnJyB9O1xuXG4vKipcbiAqIEBkb2NzUHJpdmF0ZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIENvbXBvbmVudGUgcGFyYSBhIG1vZGFsIGRlIGRldGFsaGVzIGV4aWJpZGEgcGVsbyBpbnRlcmNlcHRvclxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwby1odHRwLWludGVyY2VwdG9yLWRldGFpbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby1odHRwLWludGVyY2VwdG9yLWRldGFpbC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgUG9IdHRwSW50ZXJjZXB0b3JEZXRhaWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBAVmlld0NoaWxkKFBvTW9kYWxDb21wb25lbnQsIHsgc3RhdGljOiB0cnVlIH0pIG1vZGFsOiBQb01vZGFsQ29tcG9uZW50O1xuXG4gIGNsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBkZXRhaWxzOiBBcnJheTxQb0h0dHBJbnRlcmNlcHRvckRldGFpbD4gPSBbXTtcbiAgdGl0bGU6IHN0cmluZztcblxuICBwcml2YXRlIGxhbmd1YWdlOiBhbnk7XG4gIHByaXZhdGUgbGl0ZXJhbHM6IGFueTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L21lbWJlci1vcmRlcmluZ1xuICBwcmltYXJ5QWN0aW9uOiBQb01vZGFsQWN0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbGFuZ3VhZ2VTZXJ2aWNlOiBQb0xhbmd1YWdlU2VydmljZSkge1xuICAgIHRoaXMubGFuZ3VhZ2UgPSB0aGlzLmxhbmd1YWdlU2VydmljZT8uZ2V0U2hvcnRMYW5ndWFnZSgpO1xuICAgIHRoaXMubGl0ZXJhbHMgPSBwb0h0dHBJbnRlcmNlcHRvckRldGFpbExpdGVyYWxzRGVmYXVsdFt0aGlzLmxhbmd1YWdlXTtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMucHJpbWFyeUFjdGlvbiA9IHtcbiAgICAgIGFjdGlvbjogKCkgPT4gdGhpcy5jbG9zZSgpLFxuICAgICAgbGFiZWw6IHRoaXMubGl0ZXJhbHMuY2xvc2VCdXR0b25cbiAgICB9O1xuICB9XG5cbiAgc2V0IGRldGFpbChkZXRhaWxzOiBBcnJheTxQb0h0dHBJbnRlcmNlcHRvckRldGFpbD4pIHtcbiAgICBpZiAoZGV0YWlscyAmJiBkZXRhaWxzLmxlbmd0aCkge1xuICAgICAgdGhpcy5kZXRhaWxzID0gdGhpcy5maWx0ZXJCeVZhbGlkRGV0YWlscyhkZXRhaWxzKTtcbiAgICB9XG5cbiAgICB0aGlzLnRpdGxlID0gdGhpcy5mb3JtYXRUaXRsZSh0aGlzLmRldGFpbHMpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5tb2RhbC5jbG9zZSgpO1xuICAgIHRoaXMuY2xvc2VkLmVtaXQoKTtcbiAgfVxuXG4gIGZvcm1hdERldGFpbEl0ZW1UaXRsZShkZXRhaWwpIHtcbiAgICByZXR1cm4gZGV0YWlsLmRldGFpbFRpdGxlXG4gICAgICA/IGRldGFpbC5kZXRhaWxUaXRsZVxuICAgICAgOiBkZXRhaWwuY29kZVxuICAgICAgICA/IGAke2RldGFpbC5jb2RlfSAtICR7ZGV0YWlsLm1lc3NhZ2V9YFxuICAgICAgICA6IGRldGFpbC5tZXNzYWdlO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLm1vZGFsLm9wZW4oKTtcbiAgfVxuXG4gIHR5cGVDb2xvcih0eXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBjb2xvcnNbdHlwZV07XG4gIH1cblxuICB0eXBlVmFsdWUodHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcG9IdHRwSW50ZXJjZXB0b3JEZXRhaWxMaXRlcmFsc0RlZmF1bHRbdGhpcy5sYW5ndWFnZV1bdHlwZV0gfHwgdHlwZTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkVmFsaWREZXRhaWwobmV3RGV0YWlsczogQXJyYXk8UG9IdHRwSW50ZXJjZXB0b3JEZXRhaWw+LCBkZXRhaWw6IFBvSHR0cEludGVyY2VwdG9yRGV0YWlsKSB7XG4gICAgcmV0dXJuIGRldGFpbC5tZXNzYWdlID8gbmV3RGV0YWlscy5jb25jYXQodGhpcy5nZXRWYWxpZERldGFpbFByb3BlcnRpZXMoZGV0YWlsKSkgOiBuZXdEZXRhaWxzO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRWYWxpZERldGFpbFByb3BlcnRpZXMoeyBjb2RlLCBtZXNzYWdlLCBkZXRhaWxlZE1lc3NhZ2UsIHR5cGUsIGRldGFpbFRpdGxlIH06IFBvSHR0cEludGVyY2VwdG9yRGV0YWlsKSB7XG4gICAgcmV0dXJuIGRldGFpbFRpdGxlXG4gICAgICA/IHsgY29kZSwgbWVzc2FnZSwgZGV0YWlsZWRNZXNzYWdlLCB0eXBlLCBkZXRhaWxUaXRsZSB9XG4gICAgICA6IHsgY29kZSwgbWVzc2FnZSwgZGV0YWlsZWRNZXNzYWdlLCB0eXBlIH07XG4gIH1cblxuICBwcml2YXRlIGZpbHRlckJ5VmFsaWREZXRhaWxzKGRldGFpbHM6IEFycmF5PFBvSHR0cEludGVyY2VwdG9yRGV0YWlsPikge1xuICAgIHJldHVybiBkZXRhaWxzLnJlZHVjZSgobmV3RGV0YWlscywgZGV0YWlsKSA9PiB0aGlzLmFkZFZhbGlkRGV0YWlsKG5ld0RldGFpbHMsIGRldGFpbCksIFtdKTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0VGl0bGUoZGV0YWlsczogQXJyYXk8UG9IdHRwSW50ZXJjZXB0b3JEZXRhaWw+KSB7XG4gICAgcmV0dXJuIGRldGFpbHMubGVuZ3RoID4gMVxuICAgICAgPyBgJHt0aGlzLmxpdGVyYWxzLmRldGFpbHN9ICgke2RldGFpbHMubGVuZ3RofSlgXG4gICAgICA6IGRldGFpbHMubGVuZ3RoID09PSAxXG4gICAgICAgID8gdGhpcy5mb3JtYXREZXRhaWxJdGVtVGl0bGUoZGV0YWlsc1swXSlcbiAgICAgICAgOiB0aGlzLmxpdGVyYWxzLmRldGFpbDtcbiAgfVxufVxuIiwiPHBvLW1vZGFsIHAtaGlkZS1jbG9zZSBwLXNpemU9XCJsZ1wiIFtwLXByaW1hcnktYWN0aW9uXT1cInByaW1hcnlBY3Rpb25cIiBbcC10aXRsZV09XCJ0aXRsZVwiPlxuICA8ZGl2IGNsYXNzPVwicG8tcm93XCI+XG4gICAgPHBvLWFjY29yZGlvbiBjbGFzcz1cInBvLW1kLTEyIHBvLW10LTEgcG8tbWItMVwiICpuZ0lmPVwiZGV0YWlscy5sZW5ndGggPiAxOyBlbHNlIGVsc2VCbG9ja1wiPlxuICAgICAgPHBvLWFjY29yZGlvbi1pdGVtICpuZ0Zvcj1cImxldCBkZXRhaWwgb2YgZGV0YWlsc1wiIFtwLWxhYmVsXT1cImZvcm1hdERldGFpbEl0ZW1UaXRsZShkZXRhaWwpXCI+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdUZW1wbGF0ZU91dGxldF09XCJib2R5XCIgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgZGV0YWlsIH1cIj48L25nLXRlbXBsYXRlPlxuICAgICAgPC9wby1hY2NvcmRpb24taXRlbT5cbiAgICA8L3BvLWFjY29yZGlvbj5cbiAgPC9kaXY+XG48L3BvLW1vZGFsPlxuXG48bmctdGVtcGxhdGUgI2Vsc2VCbG9jaz5cbiAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJib2R5XCIgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cInsgZGV0YWlsOiBkZXRhaWxzWzBdIHx8IHt9IH1cIj48L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjYm9keSBsZXQtZGV0YWlsPVwiZGV0YWlsXCI+XG4gIDxkaXYgKm5nSWY9XCJkZXRhaWwudHlwZVwiIGNsYXNzPVwicG8tcm93IHBvLW1iLTFcIj5cbiAgICA8cG8tdGFnIFtwLWNvbG9yXT1cInR5cGVDb2xvcihkZXRhaWwudHlwZSlcIiBbcC12YWx1ZV09XCJ0eXBlVmFsdWUoZGV0YWlsLnR5cGUpXCI+PC9wby10YWc+XG4gIDwvZGl2PlxuXG4gIDxwICpuZ0lmPVwiZGV0YWlsLmRldGFpbFRpdGxlXCI+XG4gICAgPHN0cm9uZz57eyBkZXRhaWwuY29kZSB9fTwvc3Ryb25nPlxuICA8L3A+XG5cbiAgPGRpdiBjbGFzcz1cInBvLXJvd1wiPlxuICAgIDxwPnt7IGRldGFpbC5kZXRhaWxlZE1lc3NhZ2UgfX08L3A+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==