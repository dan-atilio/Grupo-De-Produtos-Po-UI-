import { APP_INITIALIZER, NgModule } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { PoLanguageService } from './../po-language/po-language.service';
import { I18N_CONFIG } from './po-i18n-config-injection-token';
import { returnPoI18nService, PoI18nService } from './po-i18n.service';
import { PoLanguageModule } from '../po-language/po-language.module';
import * as i0 from "@angular/core";
/**
 * @description
 *
 * Módulo do serviço `PoI18nService` para controle de idiomas com PO.
 *
 * Para utilização do serviço de idiomas `PoI18nService`, deve-se importar este módulo mesmo já havendo importado
 * o módulo `PoModule`. Na importação deve ser invocado o método `config`, informando um objeto que deve implementar
 * a interface [`PoI18nConfig`](documentation/po-i18n#poI18nConfig) para configuração.
 *
 * <a id="i18n-config"></a>
 * **Exemplo de configuração do módulo do i18n:**
 * ```
 * import { PoI18nConfig } from '@po-ui/ng-components';
 *
 * import { generalEn } from './i18n/general-en';
 * import { generalPt } from './i18n/general-pt';
 *
 * const i18nConfig: PoI18nConfig = {
 *   default: {
 *     language: 'pt-BR',
 *     context: 'general',
 *     cache: true
 *   },
 *   contexts: {
 *     general: {
 *       'pt-BR': generalPt,
 *       'en-US': generalEn
 *     },
 *     hcm: {
 *       url: 'http://10.1.1.1/api/translations/hcm/'
 *     }
 *   }
 * };
 *
 * @NgModule({
 *   declarations: [],
 *   imports: [
 *     PoModule,
 *     PoI18nModule.config(i18nConfig)
 *   ],
 *   bootstrap: [AppComponent]
 * })
 * ```
 *
 * Para cada contexto é possível definir a origem das literais, que podem ser de um serviço REST ou
 * de um objeto. Exemplo:
 *
 * Arquivo general-pt.ts
 * ```
 * export const generalPt = {
 *  add: 'Adicionar',
 *  greeting: 'Prazer, {0} {1}',
 *  people: '{0} Pessoas,
 *  remove: 'Remover'
 * }
 * ```
 *
 * Arquivo general-en.ts
 * ```
 * export const generalEn = {
 *  add: 'Add',
 *  greeting: 'Nice to meet you, {0} {1}',
 *  people: '{0} People,
 *  remove: 'Remove'
 * }
 * ```
 *
 * **Exemplo de configuração de contextos usando constantes externas:**
 * ```
 * import { PoI18nConfig } from '@po-ui/ng-components';
 *
 * import { generalEn } from './i18n/general-en';
 * import { generalPt } from './i18n/general-pt';
 *
 * const i18nConfig: PoI18nConfig = {
 *   contexts: {
 *     general: {
 *       'pt-BR': generalPt, // constantes em arquivos separados
 *       'en-US': generalEn // constantes em arquivos separados
 *     },
 *     crm: {
 *       url: 'http://10.0.0.1:3000/api/translations/crm'
 *     }
 *   },
 *   default: {}
 * }
 * ```
 *
 * **Exemplo de configuração de um contexto utilizando serviço:**
 *
 * Ao optar por utilizar um serviço para configuração de contexto, deverá ser definida a URL
 * específica do contexto, como nos exemplos abaixo:
 *
 *  - http://10.0.0.1:3000/api/translations/crm
 *  - http://10.0.0.1:3000/api/translations/general
 *
 * Os idiomas e literais serão automaticamente buscados com parâmetros na própria URL:
 * - **language**: o idioma será sempre passado por parâmetro e é recomendado utilizar uma das linguagens
 * suportadas pelo PO (`pt-br`, `en-us`, `es-es` ou `ru`).
 * - **literals**: as literais serão separadas por vírgula. Caso esse parâmetro não seja informado, o
 * serviço deve retornar todas as literais do idioma.
 *
 * Exemplos de requisição:
 *
 *  - http://10.0.0.1:3000/api/translations/crm?language=pt-br
 *  - http://10.0.0.1:3000/api/translations/crm?language=pt-br&literals=add,remove,text
 *
 * > Sempre que o idioma solicitado não for encontrado, será buscado por `pt-br`.
 *
 * Além dos contextos, é possível definir as configurações *default* do sistema na configuração do
 * módulo utilizando a interface [`PoI18nConfig`](documentation/po-i18n#poI18nConfig):
 *
 * **Exemplo de padrões definidos:**
 * ```
 * const i18nConfig: PoI18nConfig = {
 *   contexts: {
 *     general: { }
 *   },
 *   default: {
 *    language: 'pt-BR',
 *    context: 'general',
 *    cache: true
 *   }
 * }
 * ```
 *
 * **Importante:**
 *
 * Recomenda-se que as definições *default* sejam realizadas apenas uma vez na aplicação,
 * preferencialmente no módulo `AppModule`.
 *
 * **i18n com *Lazy loading***
 *
 * Para aplicações que utilizem a abordagem de módulos com carregamento *lazy loading*, caso seja
 * definida outra configuração do `PoI18nModule`, deve-se atentar os seguintes detalhes:
 *
 * - Caso existam literais comuns na aplicação, estas devem ser reimportadas;
 * - Não defina outra *default language* para este módulo. Caso for definida, será sobreposta para
 * toda a aplicação;
 * - Caso precise de módulos carregados via *lazy loading* com linguagens diferentes, utilize o
 * método [`setLanguage()`](documentation/po-i18n#setLanguage) disponibilizado pelo `PoI18nService`
 * para definir a linguagem da aplicação e dos módulos com as linguagens diferentes.
 */
export class PoI18nModule {
    static config(config) {
        return {
            ngModule: PoI18nModule,
            providers: [
                {
                    provide: I18N_CONFIG,
                    useValue: config
                },
                {
                    provide: APP_INITIALIZER,
                    useFactory: initializeLanguageDefault,
                    multi: true,
                    deps: [I18N_CONFIG, PoLanguageService]
                },
                {
                    provide: PoI18nService,
                    useFactory: returnPoI18nService,
                    deps: [I18N_CONFIG, HttpClient, PoLanguageService]
                }
            ]
        };
    }
    static ɵfac = function PoI18nModule_Factory(t) { return new (t || PoI18nModule)(); };
    static ɵmod = /*@__PURE__*/ i0.ɵɵdefineNgModule({ type: PoI18nModule });
    static ɵinj = /*@__PURE__*/ i0.ɵɵdefineInjector({ imports: [PoLanguageModule] });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoI18nModule, [{
        type: NgModule,
        args: [{
                imports: [PoLanguageModule]
            }]
    }], null, null); })();
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(PoI18nModule, { imports: [PoLanguageModule] }); })();
export function initializeLanguageDefault(config, languageService) {
    // eslint-disable-next-line sonarjs/prefer-immediate-return
    const setDefaultLanguage = () => {
        if (config.default.language) {
            languageService.setLanguageDefault(config.default.language);
        }
    };
    return setDefaultLanguage;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8taTE4bi5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL3NlcnZpY2VzL3BvLWkxOG4vcG8taTE4bi5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGVBQWUsRUFBdUIsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9FLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUVsRCxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUV6RSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDL0QsT0FBTyxFQUFFLG1CQUFtQixFQUFFLGFBQWEsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRXZFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG1DQUFtQyxDQUFDOztBQUVyRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQThJRztBQUtILE1BQU0sT0FBTyxZQUFZO0lBQ3ZCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBb0I7UUFDaEMsT0FBTztZQUNMLFFBQVEsRUFBRSxZQUFZO1lBQ3RCLFNBQVMsRUFBRTtnQkFDVDtvQkFDRSxPQUFPLEVBQUUsV0FBVztvQkFDcEIsUUFBUSxFQUFFLE1BQU07aUJBQ2pCO2dCQUNEO29CQUNFLE9BQU8sRUFBRSxlQUFlO29CQUN4QixVQUFVLEVBQUUseUJBQXlCO29CQUNyQyxLQUFLLEVBQUUsSUFBSTtvQkFDWCxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsaUJBQWlCLENBQUM7aUJBQ3ZDO2dCQUNEO29CQUNFLE9BQU8sRUFBRSxhQUFhO29CQUN0QixVQUFVLEVBQUUsbUJBQW1CO29CQUMvQixJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLGlCQUFpQixDQUFDO2lCQUNuRDthQUNGO1NBQ0YsQ0FBQztJQUNKLENBQUM7c0VBdEJVLFlBQVk7NERBQVosWUFBWTtnRUFGYixnQkFBZ0I7O2lGQUVmLFlBQVk7Y0FIeEIsUUFBUTtlQUFDO2dCQUNSLE9BQU8sRUFBRSxDQUFDLGdCQUFnQixDQUFDO2FBQzVCOzt3RkFDWSxZQUFZLGNBRmIsZ0JBQWdCO0FBMkI1QixNQUFNLFVBQVUseUJBQXlCLENBQUMsTUFBb0IsRUFBRSxlQUFrQztJQUNoRywyREFBMkQ7SUFDM0QsTUFBTSxrQkFBa0IsR0FBRyxHQUFHLEVBQUU7UUFDOUIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRTtZQUMzQixlQUFlLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUM3RDtJQUNILENBQUMsQ0FBQztJQUNGLE9BQU8sa0JBQWtCLENBQUM7QUFDNUIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQUF9JTklUSUFMSVpFUiwgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cbmltcG9ydCB7IFBvTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi8uLi9wby1sYW5ndWFnZS9wby1sYW5ndWFnZS5zZXJ2aWNlJztcblxuaW1wb3J0IHsgSTE4Tl9DT05GSUcgfSBmcm9tICcuL3BvLWkxOG4tY29uZmlnLWluamVjdGlvbi10b2tlbic7XG5pbXBvcnQgeyByZXR1cm5Qb0kxOG5TZXJ2aWNlLCBQb0kxOG5TZXJ2aWNlIH0gZnJvbSAnLi9wby1pMThuLnNlcnZpY2UnO1xuaW1wb3J0IHsgUG9JMThuQ29uZmlnIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLWkxOG4tY29uZmlnLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb0xhbmd1YWdlTW9kdWxlIH0gZnJvbSAnLi4vcG8tbGFuZ3VhZ2UvcG8tbGFuZ3VhZ2UubW9kdWxlJztcblxuLyoqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBNw7NkdWxvIGRvIHNlcnZpw6dvIGBQb0kxOG5TZXJ2aWNlYCBwYXJhIGNvbnRyb2xlIGRlIGlkaW9tYXMgY29tIFBPLlxuICpcbiAqIFBhcmEgdXRpbGl6YcOnw6NvIGRvIHNlcnZpw6dvIGRlIGlkaW9tYXMgYFBvSTE4blNlcnZpY2VgLCBkZXZlLXNlIGltcG9ydGFyIGVzdGUgbcOzZHVsbyBtZXNtbyBqw6EgaGF2ZW5kbyBpbXBvcnRhZG9cbiAqIG8gbcOzZHVsbyBgUG9Nb2R1bGVgLiBOYSBpbXBvcnRhw6fDo28gZGV2ZSBzZXIgaW52b2NhZG8gbyBtw6l0b2RvIGBjb25maWdgLCBpbmZvcm1hbmRvIHVtIG9iamV0byBxdWUgZGV2ZSBpbXBsZW1lbnRhclxuICogYSBpbnRlcmZhY2UgW2BQb0kxOG5Db25maWdgXShkb2N1bWVudGF0aW9uL3BvLWkxOG4jcG9JMThuQ29uZmlnKSBwYXJhIGNvbmZpZ3VyYcOnw6NvLlxuICpcbiAqIDxhIGlkPVwiaTE4bi1jb25maWdcIj48L2E+XG4gKiAqKkV4ZW1wbG8gZGUgY29uZmlndXJhw6fDo28gZG8gbcOzZHVsbyBkbyBpMThuOioqXG4gKiBgYGBcbiAqIGltcG9ydCB7IFBvSTE4bkNvbmZpZyB9IGZyb20gJ0Bwby11aS9uZy1jb21wb25lbnRzJztcbiAqXG4gKiBpbXBvcnQgeyBnZW5lcmFsRW4gfSBmcm9tICcuL2kxOG4vZ2VuZXJhbC1lbic7XG4gKiBpbXBvcnQgeyBnZW5lcmFsUHQgfSBmcm9tICcuL2kxOG4vZ2VuZXJhbC1wdCc7XG4gKlxuICogY29uc3QgaTE4bkNvbmZpZzogUG9JMThuQ29uZmlnID0ge1xuICogICBkZWZhdWx0OiB7XG4gKiAgICAgbGFuZ3VhZ2U6ICdwdC1CUicsXG4gKiAgICAgY29udGV4dDogJ2dlbmVyYWwnLFxuICogICAgIGNhY2hlOiB0cnVlXG4gKiAgIH0sXG4gKiAgIGNvbnRleHRzOiB7XG4gKiAgICAgZ2VuZXJhbDoge1xuICogICAgICAgJ3B0LUJSJzogZ2VuZXJhbFB0LFxuICogICAgICAgJ2VuLVVTJzogZ2VuZXJhbEVuXG4gKiAgICAgfSxcbiAqICAgICBoY206IHtcbiAqICAgICAgIHVybDogJ2h0dHA6Ly8xMC4xLjEuMS9hcGkvdHJhbnNsYXRpb25zL2hjbS8nXG4gKiAgICAgfVxuICogICB9XG4gKiB9O1xuICpcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGRlY2xhcmF0aW9uczogW10sXG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICBQb01vZHVsZSxcbiAqICAgICBQb0kxOG5Nb2R1bGUuY29uZmlnKGkxOG5Db25maWcpXG4gKiAgIF0sXG4gKiAgIGJvb3RzdHJhcDogW0FwcENvbXBvbmVudF1cbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBQYXJhIGNhZGEgY29udGV4dG8gw6kgcG9zc8OtdmVsIGRlZmluaXIgYSBvcmlnZW0gZGFzIGxpdGVyYWlzLCBxdWUgcG9kZW0gc2VyIGRlIHVtIHNlcnZpw6dvIFJFU1Qgb3VcbiAqIGRlIHVtIG9iamV0by4gRXhlbXBsbzpcbiAqXG4gKiBBcnF1aXZvIGdlbmVyYWwtcHQudHNcbiAqIGBgYFxuICogZXhwb3J0IGNvbnN0IGdlbmVyYWxQdCA9IHtcbiAqICBhZGQ6ICdBZGljaW9uYXInLFxuICogIGdyZWV0aW5nOiAnUHJhemVyLCB7MH0gezF9JyxcbiAqICBwZW9wbGU6ICd7MH0gUGVzc29hcyxcbiAqICByZW1vdmU6ICdSZW1vdmVyJ1xuICogfVxuICogYGBgXG4gKlxuICogQXJxdWl2byBnZW5lcmFsLWVuLnRzXG4gKiBgYGBcbiAqIGV4cG9ydCBjb25zdCBnZW5lcmFsRW4gPSB7XG4gKiAgYWRkOiAnQWRkJyxcbiAqICBncmVldGluZzogJ05pY2UgdG8gbWVldCB5b3UsIHswfSB7MX0nLFxuICogIHBlb3BsZTogJ3swfSBQZW9wbGUsXG4gKiAgcmVtb3ZlOiAnUmVtb3ZlJ1xuICogfVxuICogYGBgXG4gKlxuICogKipFeGVtcGxvIGRlIGNvbmZpZ3VyYcOnw6NvIGRlIGNvbnRleHRvcyB1c2FuZG8gY29uc3RhbnRlcyBleHRlcm5hczoqKlxuICogYGBgXG4gKiBpbXBvcnQgeyBQb0kxOG5Db25maWcgfSBmcm9tICdAcG8tdWkvbmctY29tcG9uZW50cyc7XG4gKlxuICogaW1wb3J0IHsgZ2VuZXJhbEVuIH0gZnJvbSAnLi9pMThuL2dlbmVyYWwtZW4nO1xuICogaW1wb3J0IHsgZ2VuZXJhbFB0IH0gZnJvbSAnLi9pMThuL2dlbmVyYWwtcHQnO1xuICpcbiAqIGNvbnN0IGkxOG5Db25maWc6IFBvSTE4bkNvbmZpZyA9IHtcbiAqICAgY29udGV4dHM6IHtcbiAqICAgICBnZW5lcmFsOiB7XG4gKiAgICAgICAncHQtQlInOiBnZW5lcmFsUHQsIC8vIGNvbnN0YW50ZXMgZW0gYXJxdWl2b3Mgc2VwYXJhZG9zXG4gKiAgICAgICAnZW4tVVMnOiBnZW5lcmFsRW4gLy8gY29uc3RhbnRlcyBlbSBhcnF1aXZvcyBzZXBhcmFkb3NcbiAqICAgICB9LFxuICogICAgIGNybToge1xuICogICAgICAgdXJsOiAnaHR0cDovLzEwLjAuMC4xOjMwMDAvYXBpL3RyYW5zbGF0aW9ucy9jcm0nXG4gKiAgICAgfVxuICogICB9LFxuICogICBkZWZhdWx0OiB7fVxuICogfVxuICogYGBgXG4gKlxuICogKipFeGVtcGxvIGRlIGNvbmZpZ3VyYcOnw6NvIGRlIHVtIGNvbnRleHRvIHV0aWxpemFuZG8gc2VydmnDp286KipcbiAqXG4gKiBBbyBvcHRhciBwb3IgdXRpbGl6YXIgdW0gc2VydmnDp28gcGFyYSBjb25maWd1cmHDp8OjbyBkZSBjb250ZXh0bywgZGV2ZXLDoSBzZXIgZGVmaW5pZGEgYSBVUkxcbiAqIGVzcGVjw61maWNhIGRvIGNvbnRleHRvLCBjb21vIG5vcyBleGVtcGxvcyBhYmFpeG86XG4gKlxuICogIC0gaHR0cDovLzEwLjAuMC4xOjMwMDAvYXBpL3RyYW5zbGF0aW9ucy9jcm1cbiAqICAtIGh0dHA6Ly8xMC4wLjAuMTozMDAwL2FwaS90cmFuc2xhdGlvbnMvZ2VuZXJhbFxuICpcbiAqIE9zIGlkaW9tYXMgZSBsaXRlcmFpcyBzZXLDo28gYXV0b21hdGljYW1lbnRlIGJ1c2NhZG9zIGNvbSBwYXLDom1ldHJvcyBuYSBwcsOzcHJpYSBVUkw6XG4gKiAtICoqbGFuZ3VhZ2UqKjogbyBpZGlvbWEgc2Vyw6Egc2VtcHJlIHBhc3NhZG8gcG9yIHBhcsOibWV0cm8gZSDDqSByZWNvbWVuZGFkbyB1dGlsaXphciB1bWEgZGFzIGxpbmd1YWdlbnNcbiAqIHN1cG9ydGFkYXMgcGVsbyBQTyAoYHB0LWJyYCwgYGVuLXVzYCwgYGVzLWVzYCBvdSBgcnVgKS5cbiAqIC0gKipsaXRlcmFscyoqOiBhcyBsaXRlcmFpcyBzZXLDo28gc2VwYXJhZGFzIHBvciB2w61yZ3VsYS4gQ2FzbyBlc3NlIHBhcsOibWV0cm8gbsOjbyBzZWphIGluZm9ybWFkbywgb1xuICogc2VydmnDp28gZGV2ZSByZXRvcm5hciB0b2RhcyBhcyBsaXRlcmFpcyBkbyBpZGlvbWEuXG4gKlxuICogRXhlbXBsb3MgZGUgcmVxdWlzacOnw6NvOlxuICpcbiAqICAtIGh0dHA6Ly8xMC4wLjAuMTozMDAwL2FwaS90cmFuc2xhdGlvbnMvY3JtP2xhbmd1YWdlPXB0LWJyXG4gKiAgLSBodHRwOi8vMTAuMC4wLjE6MzAwMC9hcGkvdHJhbnNsYXRpb25zL2NybT9sYW5ndWFnZT1wdC1iciZsaXRlcmFscz1hZGQscmVtb3ZlLHRleHRcbiAqXG4gKiA+IFNlbXByZSBxdWUgbyBpZGlvbWEgc29saWNpdGFkbyBuw6NvIGZvciBlbmNvbnRyYWRvLCBzZXLDoSBidXNjYWRvIHBvciBgcHQtYnJgLlxuICpcbiAqIEFsw6ltIGRvcyBjb250ZXh0b3MsIMOpIHBvc3PDrXZlbCBkZWZpbmlyIGFzIGNvbmZpZ3VyYcOnw7VlcyAqZGVmYXVsdCogZG8gc2lzdGVtYSBuYSBjb25maWd1cmHDp8OjbyBkb1xuICogbcOzZHVsbyB1dGlsaXphbmRvIGEgaW50ZXJmYWNlIFtgUG9JMThuQ29uZmlnYF0oZG9jdW1lbnRhdGlvbi9wby1pMThuI3BvSTE4bkNvbmZpZyk6XG4gKlxuICogKipFeGVtcGxvIGRlIHBhZHLDtWVzIGRlZmluaWRvczoqKlxuICogYGBgXG4gKiBjb25zdCBpMThuQ29uZmlnOiBQb0kxOG5Db25maWcgPSB7XG4gKiAgIGNvbnRleHRzOiB7XG4gKiAgICAgZ2VuZXJhbDogeyB9XG4gKiAgIH0sXG4gKiAgIGRlZmF1bHQ6IHtcbiAqICAgIGxhbmd1YWdlOiAncHQtQlInLFxuICogICAgY29udGV4dDogJ2dlbmVyYWwnLFxuICogICAgY2FjaGU6IHRydWVcbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogKipJbXBvcnRhbnRlOioqXG4gKlxuICogUmVjb21lbmRhLXNlIHF1ZSBhcyBkZWZpbmnDp8O1ZXMgKmRlZmF1bHQqIHNlamFtIHJlYWxpemFkYXMgYXBlbmFzIHVtYSB2ZXogbmEgYXBsaWNhw6fDo28sXG4gKiBwcmVmZXJlbmNpYWxtZW50ZSBubyBtw7NkdWxvIGBBcHBNb2R1bGVgLlxuICpcbiAqICoqaTE4biBjb20gKkxhenkgbG9hZGluZyoqKlxuICpcbiAqIFBhcmEgYXBsaWNhw6fDtWVzIHF1ZSB1dGlsaXplbSBhIGFib3JkYWdlbSBkZSBtw7NkdWxvcyBjb20gY2FycmVnYW1lbnRvICpsYXp5IGxvYWRpbmcqLCBjYXNvIHNlamFcbiAqIGRlZmluaWRhIG91dHJhIGNvbmZpZ3VyYcOnw6NvIGRvIGBQb0kxOG5Nb2R1bGVgLCBkZXZlLXNlIGF0ZW50YXIgb3Mgc2VndWludGVzIGRldGFsaGVzOlxuICpcbiAqIC0gQ2FzbyBleGlzdGFtIGxpdGVyYWlzIGNvbXVucyBuYSBhcGxpY2HDp8OjbywgZXN0YXMgZGV2ZW0gc2VyIHJlaW1wb3J0YWRhcztcbiAqIC0gTsOjbyBkZWZpbmEgb3V0cmEgKmRlZmF1bHQgbGFuZ3VhZ2UqIHBhcmEgZXN0ZSBtw7NkdWxvLiBDYXNvIGZvciBkZWZpbmlkYSwgc2Vyw6Egc29icmVwb3N0YSBwYXJhXG4gKiB0b2RhIGEgYXBsaWNhw6fDo287XG4gKiAtIENhc28gcHJlY2lzZSBkZSBtw7NkdWxvcyBjYXJyZWdhZG9zIHZpYSAqbGF6eSBsb2FkaW5nKiBjb20gbGluZ3VhZ2VucyBkaWZlcmVudGVzLCB1dGlsaXplIG9cbiAqIG3DqXRvZG8gW2BzZXRMYW5ndWFnZSgpYF0oZG9jdW1lbnRhdGlvbi9wby1pMThuI3NldExhbmd1YWdlKSBkaXNwb25pYmlsaXphZG8gcGVsbyBgUG9JMThuU2VydmljZWBcbiAqIHBhcmEgZGVmaW5pciBhIGxpbmd1YWdlbSBkYSBhcGxpY2HDp8OjbyBlIGRvcyBtw7NkdWxvcyBjb20gYXMgbGluZ3VhZ2VucyBkaWZlcmVudGVzLlxuICovXG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtQb0xhbmd1YWdlTW9kdWxlXVxufSlcbmV4cG9ydCBjbGFzcyBQb0kxOG5Nb2R1bGUge1xuICBzdGF0aWMgY29uZmlnKGNvbmZpZzogUG9JMThuQ29uZmlnKTogTW9kdWxlV2l0aFByb3ZpZGVyczxQb0kxOG5Nb2R1bGU+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IFBvSTE4bk1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogSTE4Tl9DT05GSUcsXG4gICAgICAgICAgdXNlVmFsdWU6IGNvbmZpZ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogQVBQX0lOSVRJQUxJWkVSLFxuICAgICAgICAgIHVzZUZhY3Rvcnk6IGluaXRpYWxpemVMYW5ndWFnZURlZmF1bHQsXG4gICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgZGVwczogW0kxOE5fQ09ORklHLCBQb0xhbmd1YWdlU2VydmljZV1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFBvSTE4blNlcnZpY2UsXG4gICAgICAgICAgdXNlRmFjdG9yeTogcmV0dXJuUG9JMThuU2VydmljZSxcbiAgICAgICAgICBkZXBzOiBbSTE4Tl9DT05GSUcsIEh0dHBDbGllbnQsIFBvTGFuZ3VhZ2VTZXJ2aWNlXVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUxhbmd1YWdlRGVmYXVsdChjb25maWc6IFBvSTE4bkNvbmZpZywgbGFuZ3VhZ2VTZXJ2aWNlOiBQb0xhbmd1YWdlU2VydmljZSkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgc29uYXJqcy9wcmVmZXItaW1tZWRpYXRlLXJldHVyblxuICBjb25zdCBzZXREZWZhdWx0TGFuZ3VhZ2UgPSAoKSA9PiB7XG4gICAgaWYgKGNvbmZpZy5kZWZhdWx0Lmxhbmd1YWdlKSB7XG4gICAgICBsYW5ndWFnZVNlcnZpY2Uuc2V0TGFuZ3VhZ2VEZWZhdWx0KGNvbmZpZy5kZWZhdWx0Lmxhbmd1YWdlKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBzZXREZWZhdWx0TGFuZ3VhZ2U7XG59XG4iXX0=