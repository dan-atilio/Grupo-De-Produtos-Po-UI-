import { Directive, EventEmitter, Input, Output } from '@angular/core';
import { convertToBoolean } from '../../../utils/util';
import * as i0 from "@angular/core";
/**
 *
 * @description
 *
 * Componente para criação de formulários dinâmicos a partir de uma lista de objetos.
 *
 * Também é possível verificar se o formulário está válido e informar valores para a exibição de informações.
 */
export class PoDynamicFormBaseComponent {
    /**
     * @optional
     *
     * @description
     *
     * Nome da propriedade, atribuída ao `PoDynamicFormField.property`, que iniciará o campo com foco.
     */
    autoFocus;
    /**
     * @description
     *
     * Coleção de objetos que implementam a interface `PoDynamicFormField`, para definição dos campos que serão criados
     * dinamicamente.
     *
     * > Ex: `[ { property: 'name' } ]`
     *
     * Regras de tipagem e criação dos componentes:
     *
     * - Caso o *type* informado seja *boolean* o componente criado será o `po-switch`.
     * - Caso o *type* informado seja *currency* e não seja informado um *mask* ou *pattern* o componente criado será o `po-decimal`,
     * caso seja informado um *mask* ou *pattern* o componente criado será o `po-input`.
     * - Caso o *type* informado seja *number* e não seja informado um *mask* ou *pattern* o componente criado será o `po-number`, caso seja
     * informado um *mask* ou *pattern* o componente criado será o `po-input`.
     * - Caso a lista possua a propriedade `options` e a mesma possua até 3 itens o componente criado será o `po-radio-group`
     * ou `po-checkbox-group` se informar a propriedade `optionsMulti`.
     * - Caso a mesma possua 3 ou mais itens, será criado o componente `po-select` ou, `po-multiselect` se a propriedade `optionsMulti`
     * for verdadeira.
     * - Caso o *type* informado seja *date* ou *datetime* o componente criado será o `po-datepicker`.
     * - Caso seja informado a propriedade `optionsService` o componente criado será o `po-combo`.
     * - Caso o *type* informado seja *time* o componente criado será um `po-input` podendo receber um *mask* para formatar
     * o valor exibido, caso não seja informado um *mask* o componente será criado com a máscara '99:99' por padrão.
     * - Caso a lista possua a propriedade `rows` e esta seja definida com valor maior ou igual a 3 o componente criado será
     * o `po-textarea`, caso o valor da propriedade `rows` seja menor que 3 o componente criado será o `po-input`.
     * - Caso seja informada a propriedade `secret` o componente criado será o `po-password`.
     * - Caso o *type* informado seja *string* o componente criado será o `po-input`.
     *
     * @default `[]`
     */
    fields;
    /**
     * Objeto que será utilizado como valor para exibir as informações, será recuperado e preenchido através do atributo *property*
     * dos objetos contidos na propridade `p-fields`.
     *
     * Pode iniciar com valor ou apenas com um objeto vazio que será preenchido conforme descrito acima.
     *
     * > Ex: `{ name: 'po' }`
     */
    value;
    /**
     * @optional
     *
     * @description
     *
     * Na inicialização do componente será repassado o objeto de formulário utilizado no componente,
     * podendo ser utilizado para validações e/ou detecção de mudança dos valores.
     *
     * Portanto existem duas maneiras de recuperar o formulário,
     * através de *template reference* e através do *output*, veja os exemplos abaixo:
     *
     * > *template reference*
     *
     * ```html
     *  <po-dynamic-form #dynamicForm>
     *  </po-dynamic-form>
     *
     *  <po-button p-label="Adicionar" [p-disabled]="dynamicForm?.form.invalid">
     *  </po-button>
     *
     * ```
     *
     * > *Output*
     *
     * ```html
     *  ...
     *  <po-dynamic-form (p-form)="getForm($event)">
     *  </po-dynamic-form>
     *
     *  <po-button p-label="Adicionar" [p-disabled]="dynamicForm?.invalid">
     *  </po-button>
     *  ...
     *
     * ```
     *
     * ```ts
     *  ...
     *
     *  export class AppComponent {
     *
     *    dynamicForm: NgForm;
     *
     *    getForm(form: NgForm) {
     *      this.dynamicForm = form;
     *    }
     *
     *  }
     * ```
     *
     * > Caso a propriedade `p-group-form` for verdadeira não será repassado o formulário, pois o mesmo utilizará
     * o formulário pai.
     */
    formOutput = new EventEmitter();
    /**
     * Função ou serviço que será executado na inicialização do componente.
     *
     * A propriedade aceita os seguintes tipos:
     * - `string`: *Endpoint* usado pelo componente para requisição via `POST`.
     * - `function`: Método que será executado.
     *
     * Ao ser executado, irá receber como parâmetro o objeto informado no `p-value`.
     *
     * O retorno desta função deve ser do tipo [PoDynamicFormLoad](documentation/po-dynamic-form#po-dynamic-form-load),
     * onde o usuário poderá determinar as novas atualizações dos campos, valores e determinar o campo a ser focado.
     *
     * Por exemplo:
     *
     * ```
     * onLoadFields(): PoDynamicFormLoad {
     *
     *   return {
     *     value: { cpf: undefined },
     *     fields: [
     *       { property: 'cpf' }
     *     ],
     *     focus: 'cpf'
     *   };
     * }
     *
     * ```
     * Para referenciar a sua função utilize a propriedade `bind`, por exemplo:
     * ```
     *  [p-load]="onLoadFields.bind(this)"
     * ```
     */
    load;
    /**
     * Função ou serviço para validar as **mudanças do formulário**.
     *
     * A propriedade aceita os seguintes tipos:
     * - `string`: *Endpoint* usado pelo componente para requisição via `POST`.
     * - `function`: Método que será executado.
     *
     * Ao ser executado, irá receber como parâmetro um objeto com o nome da propriedade
     * alterada e o novo valor, conforme a interface `PoDynamicFormFieldChanged`:
     *
     * ```
     * { property: 'property name', value: 'new value' }
     * ```
     *
     * O retorno desta função deve ser do tipo [PoDynamicFormValidation](documentation/po-dynamic-form#po-dynamic-form-validation),
     * onde o usuário poderá determinar as novas atualizações dos campos.
     * Por exemplo:
     *
     * ```
     * onChangeFields(changeValue): PoDynamicFormValidation {
     *
     * if (changeValue.property === 'state') {
     *
     *   return {
     *     value: { city: undefined },
     *     fields: [
     *       { property: 'city', options: this.getCity(changeValue.value.state) }
     *     ],
     *     focus: 'city'
     *   };
     * }
     *
     * ```
     * Para referenciar a sua função utilize a propriedade `bind`, por exemplo:
     * ```
     *  [p-validate]="this.myFunction.bind(this)"
     * ```
     *
     * > Se houver uma lista de campos para validação definida em `p-validate-fields`, a propriedade `validate` só receberá o disparo para os campos equivalentes.
     */
    validate;
    /**
     * @optional
     *
     * @description
     *
     * Lista que define os campos que irão disparar o validate do form.
     */
    validateFields;
    _groupForm = false;
    /**
     * @optional
     *
     * @description
     * Ao informar esta propriedade, o componente passará a utilizar o formulário pai para criar os `FormControl`
     * e com isso é possível recuperar o valor do formulário e suas validações a partir do formulário pai.
     *
     * ```html
     * <form #parentForm="ngForm">
     *
     *   <po-dynamic-form p-group-form [p-fields]="fields"></po-dynamic-form>
     *
     *  <po-button p-label="Adicionar" [p-disabled]="parentForm.invalid"></po-button>
     * </form>
     * ```
     */
    set groupForm(value) {
        this._groupForm = value === '' ? true : convertToBoolean(value);
    }
    get groupForm() {
        return this._groupForm;
    }
    /**
     * @optional
     *
     * @description
     *
     * Ao informar esta propriedade, o componente passará a emitir o valor a cada caractere digitado.
     *
     * Pode ser aplicado nos seguintes componentes:
     * - po-input
     * - po-number
     * - po-decimal
     * - po-textarea
     * - po-password
     *
     * Deve informar os campos que deseja receber as emissões na propriedade `p-validate-fields`.
     *
     *
     */
    validateOnInput = false;
    static ɵfac = function PoDynamicFormBaseComponent_Factory(t) { return new (t || PoDynamicFormBaseComponent)(); };
    static ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoDynamicFormBaseComponent, inputs: { autoFocus: [i0.ɵɵInputFlags.None, "p-auto-focus", "autoFocus"], fields: [i0.ɵɵInputFlags.None, "p-fields", "fields"], value: [i0.ɵɵInputFlags.None, "p-value", "value"], load: [i0.ɵɵInputFlags.None, "p-load", "load"], validate: [i0.ɵɵInputFlags.None, "p-validate", "validate"], validateFields: [i0.ɵɵInputFlags.None, "p-validate-fields", "validateFields"], groupForm: [i0.ɵɵInputFlags.None, "p-group-form", "groupForm"], validateOnInput: [i0.ɵɵInputFlags.HasDecoratorInputTransform, "p-validate-on-input", "validateOnInput", convertToBoolean] }, outputs: { formOutput: "p-form" }, features: [i0.ɵɵInputTransformsFeature] });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoDynamicFormBaseComponent, [{
        type: Directive
    }], null, { autoFocus: [{
            type: Input,
            args: ['p-auto-focus']
        }], fields: [{
            type: Input,
            args: ['p-fields']
        }], value: [{
            type: Input,
            args: ['p-value']
        }], formOutput: [{
            type: Output,
            args: ['p-form']
        }], load: [{
            type: Input,
            args: ['p-load']
        }], validate: [{
            type: Input,
            args: ['p-validate']
        }], validateFields: [{
            type: Input,
            args: ['p-validate-fields']
        }], groupForm: [{
            type: Input,
            args: ['p-group-form']
        }], validateOnInput: [{
            type: Input,
            args: [{ alias: 'p-validate-on-input', transform: convertToBoolean }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tZHluYW1pYy1mb3JtLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9jb21wb25lbnRzL3BvLWR5bmFtaWMvcG8tZHluYW1pYy1mb3JtL3BvLWR5bmFtaWMtZm9ybS1iYXNlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXZFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDOztBQUl2RDs7Ozs7OztHQU9HO0FBRUgsTUFBTSxPQUFPLDBCQUEwQjtJQUNyQzs7Ozs7O09BTUc7SUFDb0IsU0FBUyxDQUFVO0lBRTFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQTZCRztJQUNnQixNQUFNLENBQTRCO0lBRXJEOzs7Ozs7O09BT0c7SUFDZSxLQUFLLENBQU07SUFFN0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQW1ERztJQUNlLFVBQVUsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztJQUVoRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQStCRztJQUNjLElBQUksQ0FBcUI7SUFFMUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXVDRztJQUNrQixRQUFRLENBQXFCO0lBRWxEOzs7Ozs7T0FNRztJQUN5QixjQUFjLENBQWlCO0lBRW5ELFVBQVUsR0FBYSxLQUFLLENBQUM7SUFFckM7Ozs7Ozs7Ozs7Ozs7OztPQWVHO0lBQ0gsSUFBMkIsU0FBUyxDQUFDLEtBQWM7UUFDakQsSUFBSSxDQUFDLFVBQVUsR0FBUSxLQUFLLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7Ozs7Ozs7Ozs7Ozs7OztPQWlCRztJQUNtRSxlQUFlLEdBQVksS0FBSyxDQUFDO29GQTNPNUYsMEJBQTBCOzZEQUExQiwwQkFBMEIsd2hCQTJPYSxnQkFBZ0I7O2lGQTNPdkQsMEJBQTBCO2NBRHRDLFNBQVM7Z0JBU2UsU0FBUztrQkFBL0IsS0FBSzttQkFBQyxjQUFjO1lBZ0NGLE1BQU07a0JBQXhCLEtBQUs7bUJBQUMsVUFBVTtZQVVDLEtBQUs7a0JBQXRCLEtBQUs7bUJBQUMsU0FBUztZQXNERSxVQUFVO2tCQUEzQixNQUFNO21CQUFDLFFBQVE7WUFrQ0MsSUFBSTtrQkFBcEIsS0FBSzttQkFBQyxRQUFRO1lBMENNLFFBQVE7a0JBQTVCLEtBQUs7bUJBQUMsWUFBWTtZQVNTLGNBQWM7a0JBQXpDLEtBQUs7bUJBQUMsbUJBQW1CO1lBb0JDLFNBQVM7a0JBQW5DLEtBQUs7bUJBQUMsY0FBYztZQTBCaUQsZUFBZTtrQkFBcEYsS0FBSzttQkFBQyxFQUFFLEtBQUssRUFBRSxxQkFBcUIsRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmdGb3JtIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5pbXBvcnQgeyBQb0R5bmFtaWNGb3JtRmllbGQgfSBmcm9tICcuL3BvLWR5bmFtaWMtZm9ybS1maWVsZC5pbnRlcmZhY2UnO1xuXG4vKipcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb21wb25lbnRlIHBhcmEgY3JpYcOnw6NvIGRlIGZvcm11bMOhcmlvcyBkaW7Dom1pY29zIGEgcGFydGlyIGRlIHVtYSBsaXN0YSBkZSBvYmpldG9zLlxuICpcbiAqIFRhbWLDqW0gw6kgcG9zc8OtdmVsIHZlcmlmaWNhciBzZSBvIGZvcm11bMOhcmlvIGVzdMOhIHbDoWxpZG8gZSBpbmZvcm1hciB2YWxvcmVzIHBhcmEgYSBleGliacOnw6NvIGRlIGluZm9ybWHDp8O1ZXMuXG4gKi9cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGNsYXNzIFBvRHluYW1pY0Zvcm1CYXNlQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogTm9tZSBkYSBwcm9wcmllZGFkZSwgYXRyaWJ1w61kYSBhbyBgUG9EeW5hbWljRm9ybUZpZWxkLnByb3BlcnR5YCwgcXVlIGluaWNpYXLDoSBvIGNhbXBvIGNvbSBmb2NvLlxuICAgKi9cbiAgQElucHV0KCdwLWF1dG8tZm9jdXMnKSBhdXRvRm9jdXM/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBDb2xlw6fDo28gZGUgb2JqZXRvcyBxdWUgaW1wbGVtZW50YW0gYSBpbnRlcmZhY2UgYFBvRHluYW1pY0Zvcm1GaWVsZGAsIHBhcmEgZGVmaW5pw6fDo28gZG9zIGNhbXBvcyBxdWUgc2Vyw6NvIGNyaWFkb3NcbiAgICogZGluYW1pY2FtZW50ZS5cbiAgICpcbiAgICogPiBFeDogYFsgeyBwcm9wZXJ0eTogJ25hbWUnIH0gXWBcbiAgICpcbiAgICogUmVncmFzIGRlIHRpcGFnZW0gZSBjcmlhw6fDo28gZG9zIGNvbXBvbmVudGVzOlxuICAgKlxuICAgKiAtIENhc28gbyAqdHlwZSogaW5mb3JtYWRvIHNlamEgKmJvb2xlYW4qIG8gY29tcG9uZW50ZSBjcmlhZG8gc2Vyw6EgbyBgcG8tc3dpdGNoYC5cbiAgICogLSBDYXNvIG8gKnR5cGUqIGluZm9ybWFkbyBzZWphICpjdXJyZW5jeSogZSBuw6NvIHNlamEgaW5mb3JtYWRvIHVtICptYXNrKiBvdSAqcGF0dGVybiogbyBjb21wb25lbnRlIGNyaWFkbyBzZXLDoSBvIGBwby1kZWNpbWFsYCxcbiAgICogY2FzbyBzZWphIGluZm9ybWFkbyB1bSAqbWFzayogb3UgKnBhdHRlcm4qIG8gY29tcG9uZW50ZSBjcmlhZG8gc2Vyw6EgbyBgcG8taW5wdXRgLlxuICAgKiAtIENhc28gbyAqdHlwZSogaW5mb3JtYWRvIHNlamEgKm51bWJlciogZSBuw6NvIHNlamEgaW5mb3JtYWRvIHVtICptYXNrKiBvdSAqcGF0dGVybiogbyBjb21wb25lbnRlIGNyaWFkbyBzZXLDoSBvIGBwby1udW1iZXJgLCBjYXNvIHNlamFcbiAgICogaW5mb3JtYWRvIHVtICptYXNrKiBvdSAqcGF0dGVybiogbyBjb21wb25lbnRlIGNyaWFkbyBzZXLDoSBvIGBwby1pbnB1dGAuXG4gICAqIC0gQ2FzbyBhIGxpc3RhIHBvc3N1YSBhIHByb3ByaWVkYWRlIGBvcHRpb25zYCBlIGEgbWVzbWEgcG9zc3VhIGF0w6kgMyBpdGVucyBvIGNvbXBvbmVudGUgY3JpYWRvIHNlcsOhIG8gYHBvLXJhZGlvLWdyb3VwYFxuICAgKiBvdSBgcG8tY2hlY2tib3gtZ3JvdXBgIHNlIGluZm9ybWFyIGEgcHJvcHJpZWRhZGUgYG9wdGlvbnNNdWx0aWAuXG4gICAqIC0gQ2FzbyBhIG1lc21hIHBvc3N1YSAzIG91IG1haXMgaXRlbnMsIHNlcsOhIGNyaWFkbyBvIGNvbXBvbmVudGUgYHBvLXNlbGVjdGAgb3UsIGBwby1tdWx0aXNlbGVjdGAgc2UgYSBwcm9wcmllZGFkZSBgb3B0aW9uc011bHRpYFxuICAgKiBmb3IgdmVyZGFkZWlyYS5cbiAgICogLSBDYXNvIG8gKnR5cGUqIGluZm9ybWFkbyBzZWphICpkYXRlKiBvdSAqZGF0ZXRpbWUqIG8gY29tcG9uZW50ZSBjcmlhZG8gc2Vyw6EgbyBgcG8tZGF0ZXBpY2tlcmAuXG4gICAqIC0gQ2FzbyBzZWphIGluZm9ybWFkbyBhIHByb3ByaWVkYWRlIGBvcHRpb25zU2VydmljZWAgbyBjb21wb25lbnRlIGNyaWFkbyBzZXLDoSBvIGBwby1jb21ib2AuXG4gICAqIC0gQ2FzbyBvICp0eXBlKiBpbmZvcm1hZG8gc2VqYSAqdGltZSogbyBjb21wb25lbnRlIGNyaWFkbyBzZXLDoSB1bSBgcG8taW5wdXRgIHBvZGVuZG8gcmVjZWJlciB1bSAqbWFzayogcGFyYSBmb3JtYXRhclxuICAgKiBvIHZhbG9yIGV4aWJpZG8sIGNhc28gbsOjbyBzZWphIGluZm9ybWFkbyB1bSAqbWFzayogbyBjb21wb25lbnRlIHNlcsOhIGNyaWFkbyBjb20gYSBtw6FzY2FyYSAnOTk6OTknIHBvciBwYWRyw6NvLlxuICAgKiAtIENhc28gYSBsaXN0YSBwb3NzdWEgYSBwcm9wcmllZGFkZSBgcm93c2AgZSBlc3RhIHNlamEgZGVmaW5pZGEgY29tIHZhbG9yIG1haW9yIG91IGlndWFsIGEgMyBvIGNvbXBvbmVudGUgY3JpYWRvIHNlcsOhXG4gICAqIG8gYHBvLXRleHRhcmVhYCwgY2FzbyBvIHZhbG9yIGRhIHByb3ByaWVkYWRlIGByb3dzYCBzZWphIG1lbm9yIHF1ZSAzIG8gY29tcG9uZW50ZSBjcmlhZG8gc2Vyw6EgbyBgcG8taW5wdXRgLlxuICAgKiAtIENhc28gc2VqYSBpbmZvcm1hZGEgYSBwcm9wcmllZGFkZSBgc2VjcmV0YCBvIGNvbXBvbmVudGUgY3JpYWRvIHNlcsOhIG8gYHBvLXBhc3N3b3JkYC5cbiAgICogLSBDYXNvIG8gKnR5cGUqIGluZm9ybWFkbyBzZWphICpzdHJpbmcqIG8gY29tcG9uZW50ZSBjcmlhZG8gc2Vyw6EgbyBgcG8taW5wdXRgLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgW11gXG4gICAqL1xuICBASW5wdXQoJ3AtZmllbGRzJykgZmllbGRzOiBBcnJheTxQb0R5bmFtaWNGb3JtRmllbGQ+O1xuXG4gIC8qKlxuICAgKiBPYmpldG8gcXVlIHNlcsOhIHV0aWxpemFkbyBjb21vIHZhbG9yIHBhcmEgZXhpYmlyIGFzIGluZm9ybWHDp8O1ZXMsIHNlcsOhIHJlY3VwZXJhZG8gZSBwcmVlbmNoaWRvIGF0cmF2w6lzIGRvIGF0cmlidXRvICpwcm9wZXJ0eSpcbiAgICogZG9zIG9iamV0b3MgY29udGlkb3MgbmEgcHJvcHJpZGFkZSBgcC1maWVsZHNgLlxuICAgKlxuICAgKiBQb2RlIGluaWNpYXIgY29tIHZhbG9yIG91IGFwZW5hcyBjb20gdW0gb2JqZXRvIHZhemlvIHF1ZSBzZXLDoSBwcmVlbmNoaWRvIGNvbmZvcm1lIGRlc2NyaXRvIGFjaW1hLlxuICAgKlxuICAgKiA+IEV4OiBgeyBuYW1lOiAncG8nIH1gXG4gICAqL1xuICBASW5wdXQoJ3AtdmFsdWUnKSB2YWx1ZTogYW55O1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIE5hIGluaWNpYWxpemHDp8OjbyBkbyBjb21wb25lbnRlIHNlcsOhIHJlcGFzc2FkbyBvIG9iamV0byBkZSBmb3JtdWzDoXJpbyB1dGlsaXphZG8gbm8gY29tcG9uZW50ZSxcbiAgICogcG9kZW5kbyBzZXIgdXRpbGl6YWRvIHBhcmEgdmFsaWRhw6fDtWVzIGUvb3UgZGV0ZWPDp8OjbyBkZSBtdWRhbsOnYSBkb3MgdmFsb3Jlcy5cbiAgICpcbiAgICogUG9ydGFudG8gZXhpc3RlbSBkdWFzIG1hbmVpcmFzIGRlIHJlY3VwZXJhciBvIGZvcm11bMOhcmlvLFxuICAgKiBhdHJhdsOpcyBkZSAqdGVtcGxhdGUgcmVmZXJlbmNlKiBlIGF0cmF2w6lzIGRvICpvdXRwdXQqLCB2ZWphIG9zIGV4ZW1wbG9zIGFiYWl4bzpcbiAgICpcbiAgICogPiAqdGVtcGxhdGUgcmVmZXJlbmNlKlxuICAgKlxuICAgKiBgYGBodG1sXG4gICAqICA8cG8tZHluYW1pYy1mb3JtICNkeW5hbWljRm9ybT5cbiAgICogIDwvcG8tZHluYW1pYy1mb3JtPlxuICAgKlxuICAgKiAgPHBvLWJ1dHRvbiBwLWxhYmVsPVwiQWRpY2lvbmFyXCIgW3AtZGlzYWJsZWRdPVwiZHluYW1pY0Zvcm0/LmZvcm0uaW52YWxpZFwiPlxuICAgKiAgPC9wby1idXR0b24+XG4gICAqXG4gICAqIGBgYFxuICAgKlxuICAgKiA+ICpPdXRwdXQqXG4gICAqXG4gICAqIGBgYGh0bWxcbiAgICogIC4uLlxuICAgKiAgPHBvLWR5bmFtaWMtZm9ybSAocC1mb3JtKT1cImdldEZvcm0oJGV2ZW50KVwiPlxuICAgKiAgPC9wby1keW5hbWljLWZvcm0+XG4gICAqXG4gICAqICA8cG8tYnV0dG9uIHAtbGFiZWw9XCJBZGljaW9uYXJcIiBbcC1kaXNhYmxlZF09XCJkeW5hbWljRm9ybT8uaW52YWxpZFwiPlxuICAgKiAgPC9wby1idXR0b24+XG4gICAqICAuLi5cbiAgICpcbiAgICogYGBgXG4gICAqXG4gICAqIGBgYHRzXG4gICAqICAuLi5cbiAgICpcbiAgICogIGV4cG9ydCBjbGFzcyBBcHBDb21wb25lbnQge1xuICAgKlxuICAgKiAgICBkeW5hbWljRm9ybTogTmdGb3JtO1xuICAgKlxuICAgKiAgICBnZXRGb3JtKGZvcm06IE5nRm9ybSkge1xuICAgKiAgICAgIHRoaXMuZHluYW1pY0Zvcm0gPSBmb3JtO1xuICAgKiAgICB9XG4gICAqXG4gICAqICB9XG4gICAqIGBgYFxuICAgKlxuICAgKiA+IENhc28gYSBwcm9wcmllZGFkZSBgcC1ncm91cC1mb3JtYCBmb3IgdmVyZGFkZWlyYSBuw6NvIHNlcsOhIHJlcGFzc2FkbyBvIGZvcm11bMOhcmlvLCBwb2lzIG8gbWVzbW8gdXRpbGl6YXLDoVxuICAgKiBvIGZvcm11bMOhcmlvIHBhaS5cbiAgICovXG4gIEBPdXRwdXQoJ3AtZm9ybScpIGZvcm1PdXRwdXQ6IEV2ZW50RW1pdHRlcjxOZ0Zvcm0+ID0gbmV3IEV2ZW50RW1pdHRlcjxOZ0Zvcm0+KCk7XG5cbiAgLyoqXG4gICAqIEZ1bsOnw6NvIG91IHNlcnZpw6dvIHF1ZSBzZXLDoSBleGVjdXRhZG8gbmEgaW5pY2lhbGl6YcOnw6NvIGRvIGNvbXBvbmVudGUuXG4gICAqXG4gICAqIEEgcHJvcHJpZWRhZGUgYWNlaXRhIG9zIHNlZ3VpbnRlcyB0aXBvczpcbiAgICogLSBgc3RyaW5nYDogKkVuZHBvaW50KiB1c2FkbyBwZWxvIGNvbXBvbmVudGUgcGFyYSByZXF1aXNpw6fDo28gdmlhIGBQT1NUYC5cbiAgICogLSBgZnVuY3Rpb25gOiBNw6l0b2RvIHF1ZSBzZXLDoSBleGVjdXRhZG8uXG4gICAqXG4gICAqIEFvIHNlciBleGVjdXRhZG8sIGlyw6EgcmVjZWJlciBjb21vIHBhcsOibWV0cm8gbyBvYmpldG8gaW5mb3JtYWRvIG5vIGBwLXZhbHVlYC5cbiAgICpcbiAgICogTyByZXRvcm5vIGRlc3RhIGZ1bsOnw6NvIGRldmUgc2VyIGRvIHRpcG8gW1BvRHluYW1pY0Zvcm1Mb2FkXShkb2N1bWVudGF0aW9uL3BvLWR5bmFtaWMtZm9ybSNwby1keW5hbWljLWZvcm0tbG9hZCksXG4gICAqIG9uZGUgbyB1c3XDoXJpbyBwb2RlcsOhIGRldGVybWluYXIgYXMgbm92YXMgYXR1YWxpemHDp8O1ZXMgZG9zIGNhbXBvcywgdmFsb3JlcyBlIGRldGVybWluYXIgbyBjYW1wbyBhIHNlciBmb2NhZG8uXG4gICAqXG4gICAqIFBvciBleGVtcGxvOlxuICAgKlxuICAgKiBgYGBcbiAgICogb25Mb2FkRmllbGRzKCk6IFBvRHluYW1pY0Zvcm1Mb2FkIHtcbiAgICpcbiAgICogICByZXR1cm4ge1xuICAgKiAgICAgdmFsdWU6IHsgY3BmOiB1bmRlZmluZWQgfSxcbiAgICogICAgIGZpZWxkczogW1xuICAgKiAgICAgICB7IHByb3BlcnR5OiAnY3BmJyB9XG4gICAqICAgICBdLFxuICAgKiAgICAgZm9jdXM6ICdjcGYnXG4gICAqICAgfTtcbiAgICogfVxuICAgKlxuICAgKiBgYGBcbiAgICogUGFyYSByZWZlcmVuY2lhciBhIHN1YSBmdW7Dp8OjbyB1dGlsaXplIGEgcHJvcHJpZWRhZGUgYGJpbmRgLCBwb3IgZXhlbXBsbzpcbiAgICogYGBgXG4gICAqICBbcC1sb2FkXT1cIm9uTG9hZEZpZWxkcy5iaW5kKHRoaXMpXCJcbiAgICogYGBgXG4gICAqL1xuICBASW5wdXQoJ3AtbG9hZCcpIGxvYWQ/OiBzdHJpbmcgfCBGdW5jdGlvbjtcblxuICAvKipcbiAgICogRnVuw6fDo28gb3Ugc2VydmnDp28gcGFyYSB2YWxpZGFyIGFzICoqbXVkYW7Dp2FzIGRvIGZvcm11bMOhcmlvKiouXG4gICAqXG4gICAqIEEgcHJvcHJpZWRhZGUgYWNlaXRhIG9zIHNlZ3VpbnRlcyB0aXBvczpcbiAgICogLSBgc3RyaW5nYDogKkVuZHBvaW50KiB1c2FkbyBwZWxvIGNvbXBvbmVudGUgcGFyYSByZXF1aXNpw6fDo28gdmlhIGBQT1NUYC5cbiAgICogLSBgZnVuY3Rpb25gOiBNw6l0b2RvIHF1ZSBzZXLDoSBleGVjdXRhZG8uXG4gICAqXG4gICAqIEFvIHNlciBleGVjdXRhZG8sIGlyw6EgcmVjZWJlciBjb21vIHBhcsOibWV0cm8gdW0gb2JqZXRvIGNvbSBvIG5vbWUgZGEgcHJvcHJpZWRhZGVcbiAgICogYWx0ZXJhZGEgZSBvIG5vdm8gdmFsb3IsIGNvbmZvcm1lIGEgaW50ZXJmYWNlIGBQb0R5bmFtaWNGb3JtRmllbGRDaGFuZ2VkYDpcbiAgICpcbiAgICogYGBgXG4gICAqIHsgcHJvcGVydHk6ICdwcm9wZXJ0eSBuYW1lJywgdmFsdWU6ICduZXcgdmFsdWUnIH1cbiAgICogYGBgXG4gICAqXG4gICAqIE8gcmV0b3JubyBkZXN0YSBmdW7Dp8OjbyBkZXZlIHNlciBkbyB0aXBvIFtQb0R5bmFtaWNGb3JtVmFsaWRhdGlvbl0oZG9jdW1lbnRhdGlvbi9wby1keW5hbWljLWZvcm0jcG8tZHluYW1pYy1mb3JtLXZhbGlkYXRpb24pLFxuICAgKiBvbmRlIG8gdXN1w6FyaW8gcG9kZXLDoSBkZXRlcm1pbmFyIGFzIG5vdmFzIGF0dWFsaXphw6fDtWVzIGRvcyBjYW1wb3MuXG4gICAqIFBvciBleGVtcGxvOlxuICAgKlxuICAgKiBgYGBcbiAgICogb25DaGFuZ2VGaWVsZHMoY2hhbmdlVmFsdWUpOiBQb0R5bmFtaWNGb3JtVmFsaWRhdGlvbiB7XG4gICAqXG4gICAqIGlmIChjaGFuZ2VWYWx1ZS5wcm9wZXJ0eSA9PT0gJ3N0YXRlJykge1xuICAgKlxuICAgKiAgIHJldHVybiB7XG4gICAqICAgICB2YWx1ZTogeyBjaXR5OiB1bmRlZmluZWQgfSxcbiAgICogICAgIGZpZWxkczogW1xuICAgKiAgICAgICB7IHByb3BlcnR5OiAnY2l0eScsIG9wdGlvbnM6IHRoaXMuZ2V0Q2l0eShjaGFuZ2VWYWx1ZS52YWx1ZS5zdGF0ZSkgfVxuICAgKiAgICAgXSxcbiAgICogICAgIGZvY3VzOiAnY2l0eSdcbiAgICogICB9O1xuICAgKiB9XG4gICAqXG4gICAqIGBgYFxuICAgKiBQYXJhIHJlZmVyZW5jaWFyIGEgc3VhIGZ1bsOnw6NvIHV0aWxpemUgYSBwcm9wcmllZGFkZSBgYmluZGAsIHBvciBleGVtcGxvOlxuICAgKiBgYGBcbiAgICogIFtwLXZhbGlkYXRlXT1cInRoaXMubXlGdW5jdGlvbi5iaW5kKHRoaXMpXCJcbiAgICogYGBgXG4gICAqXG4gICAqID4gU2UgaG91dmVyIHVtYSBsaXN0YSBkZSBjYW1wb3MgcGFyYSB2YWxpZGHDp8OjbyBkZWZpbmlkYSBlbSBgcC12YWxpZGF0ZS1maWVsZHNgLCBhIHByb3ByaWVkYWRlIGB2YWxpZGF0ZWAgc8OzIHJlY2ViZXLDoSBvIGRpc3Bhcm8gcGFyYSBvcyBjYW1wb3MgZXF1aXZhbGVudGVzLlxuICAgKi9cbiAgQElucHV0KCdwLXZhbGlkYXRlJykgdmFsaWRhdGU/OiBzdHJpbmcgfCBGdW5jdGlvbjtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBMaXN0YSBxdWUgZGVmaW5lIG9zIGNhbXBvcyBxdWUgaXLDo28gZGlzcGFyYXIgbyB2YWxpZGF0ZSBkbyBmb3JtLlxuICAgKi9cbiAgQElucHV0KCdwLXZhbGlkYXRlLWZpZWxkcycpIHZhbGlkYXRlRmllbGRzPzogQXJyYXk8c3RyaW5nPjtcblxuICBwcml2YXRlIF9ncm91cEZvcm0/OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQW8gaW5mb3JtYXIgZXN0YSBwcm9wcmllZGFkZSwgbyBjb21wb25lbnRlIHBhc3NhcsOhIGEgdXRpbGl6YXIgbyBmb3JtdWzDoXJpbyBwYWkgcGFyYSBjcmlhciBvcyBgRm9ybUNvbnRyb2xgXG4gICAqIGUgY29tIGlzc28gw6kgcG9zc8OtdmVsIHJlY3VwZXJhciBvIHZhbG9yIGRvIGZvcm11bMOhcmlvIGUgc3VhcyB2YWxpZGHDp8O1ZXMgYSBwYXJ0aXIgZG8gZm9ybXVsw6FyaW8gcGFpLlxuICAgKlxuICAgKiBgYGBodG1sXG4gICAqIDxmb3JtICNwYXJlbnRGb3JtPVwibmdGb3JtXCI+XG4gICAqXG4gICAqICAgPHBvLWR5bmFtaWMtZm9ybSBwLWdyb3VwLWZvcm0gW3AtZmllbGRzXT1cImZpZWxkc1wiPjwvcG8tZHluYW1pYy1mb3JtPlxuICAgKlxuICAgKiAgPHBvLWJ1dHRvbiBwLWxhYmVsPVwiQWRpY2lvbmFyXCIgW3AtZGlzYWJsZWRdPVwicGFyZW50Rm9ybS5pbnZhbGlkXCI+PC9wby1idXR0b24+XG4gICAqIDwvZm9ybT5cbiAgICogYGBgXG4gICAqL1xuICBASW5wdXQoJ3AtZ3JvdXAtZm9ybScpIHNldCBncm91cEZvcm0odmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9ncm91cEZvcm0gPSA8YW55PnZhbHVlID09PSAnJyA/IHRydWUgOiBjb252ZXJ0VG9Cb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBncm91cEZvcm0oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2dyb3VwRm9ybTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEFvIGluZm9ybWFyIGVzdGEgcHJvcHJpZWRhZGUsIG8gY29tcG9uZW50ZSBwYXNzYXLDoSBhIGVtaXRpciBvIHZhbG9yIGEgY2FkYSBjYXJhY3RlcmUgZGlnaXRhZG8uXG4gICAqXG4gICAqIFBvZGUgc2VyIGFwbGljYWRvIG5vcyBzZWd1aW50ZXMgY29tcG9uZW50ZXM6XG4gICAqIC0gcG8taW5wdXRcbiAgICogLSBwby1udW1iZXJcbiAgICogLSBwby1kZWNpbWFsXG4gICAqIC0gcG8tdGV4dGFyZWFcbiAgICogLSBwby1wYXNzd29yZFxuICAgKlxuICAgKiBEZXZlIGluZm9ybWFyIG9zIGNhbXBvcyBxdWUgZGVzZWphIHJlY2ViZXIgYXMgZW1pc3PDtWVzIG5hIHByb3ByaWVkYWRlIGBwLXZhbGlkYXRlLWZpZWxkc2AuXG4gICAqXG4gICAqXG4gICAqL1xuICBASW5wdXQoeyBhbGlhczogJ3AtdmFsaWRhdGUtb24taW5wdXQnLCB0cmFuc2Zvcm06IGNvbnZlcnRUb0Jvb2xlYW4gfSkgdmFsaWRhdGVPbklucHV0OiBib29sZWFuID0gZmFsc2U7XG59XG4iXX0=