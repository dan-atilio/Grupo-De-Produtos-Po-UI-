import { ChangeDetectionStrategy, Component, Input, Output, EventEmitter } from '@angular/core';
import { Subject } from 'rxjs';
import { debounceTime } from 'rxjs/operators';
import { PoCalendarService } from '../services/po-calendar.service';
import * as i0 from "@angular/core";
import * as i1 from "../services/po-calendar.service";
import * as i2 from "../services/po-calendar.lang.service";
import * as i3 from "../../../services/po-date/po-date.service";
import * as i4 from "@angular/common";
import * as i5 from "../po-calendar-header/po-calendar-header.component";
function PoCalendarWrapperComponent_ng_container_1_div_8_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 10);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const weekDay_r6 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", weekDay_r6, " ");
} }
function PoCalendarWrapperComponent_ng_container_1_div_10_span_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 13);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const day_r7 = i0.ɵɵnextContext().$implicit;
    const ctx_r8 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngClass", ctx_r8.getDayForegroundColor(day_r7));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", day_r7.getDate(), " ");
} }
function PoCalendarWrapperComponent_ng_container_1_div_10_Template(rf, ctx) { if (rf & 1) {
    const _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 11);
    i0.ɵɵlistener("click", function PoCalendarWrapperComponent_ng_container_1_div_10_Template_div_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r11); const day_r7 = restoredCtx.$implicit; const ctx_r10 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r10.onSelectDate(day_r7)); })("mouseenter", function PoCalendarWrapperComponent_ng_container_1_div_10_Template_div_mouseenter_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r11); const day_r7 = restoredCtx.$implicit; const ctx_r12 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r12.onMouseEnter(day_r7)); })("mouseleave", function PoCalendarWrapperComponent_ng_container_1_div_10_Template_div_mouseleave_0_listener() { i0.ɵɵrestoreView(_r11); const ctx_r13 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r13.onMouseLeave()); });
    i0.ɵɵtemplate(1, PoCalendarWrapperComponent_ng_container_1_div_10_span_1_Template, 2, 2, "span", 12);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const day_r7 = ctx.$implicit;
    const ctx_r5 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngClass", ctx_r5.getDayBackgroundColor(day_r7));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", day_r7 !== 0);
} }
function PoCalendarWrapperComponent_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    const _r15 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "po-calendar-header", 2);
    i0.ɵɵlistener("p-previous", function PoCalendarWrapperComponent_ng_container_1_Template_po_calendar_header_p_previous_1_listener() { i0.ɵɵrestoreView(_r15); const ctx_r14 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r14.onPreviousMonth()); })("p-next", function PoCalendarWrapperComponent_ng_container_1_Template_po_calendar_header_p_next_1_listener() { i0.ɵɵrestoreView(_r15); const ctx_r16 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r16.onNextMonth()); });
    i0.ɵɵelementStart(2, "span", 3);
    i0.ɵɵlistener("click", function PoCalendarWrapperComponent_ng_container_1_Template_span_click_2_listener() { i0.ɵɵrestoreView(_r15); const ctx_r17 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r17.selectDisplayMode("month")); });
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "span", 4);
    i0.ɵɵlistener("click", function PoCalendarWrapperComponent_ng_container_1_Template_span_click_4_listener() { i0.ɵɵrestoreView(_r15); const ctx_r18 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r18.selectDisplayMode("year")); });
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 5)(7, "div", 6);
    i0.ɵɵtemplate(8, PoCalendarWrapperComponent_ng_container_1_div_8_Template, 2, 1, "div", 7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "div", 8);
    i0.ɵɵtemplate(10, PoCalendarWrapperComponent_ng_container_1_div_10_Template, 2, 2, "div", 9);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("p-hide-previous", ctx_r0.isEndPart)("p-hide-next", ctx_r0.isStartPart && !ctx_r0.responsive);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r0.displayMonth);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r0.displayYear);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r0.displayWeekDays);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r0.displayDays);
} }
function PoCalendarWrapperComponent_ng_container_2_div_9_Template(rf, ctx) { if (rf & 1) {
    const _r23 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 17);
    i0.ɵɵlistener("click", function PoCalendarWrapperComponent_ng_container_2_div_9_Template_div_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r23); const i_r21 = restoredCtx.index; const ctx_r22 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r22.onSelectMonth(ctx_r22.displayYear, i_r21)); });
    i0.ɵɵelementStart(1, "span", 13);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const month_r20 = ctx.$implicit;
    const i_r21 = ctx.index;
    const ctx_r19 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngClass", ctx_r19.getBackgroundColor(i_r21, ctx_r19.displayMonthNumber));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngClass", ctx_r19.getForegroundColor(i_r21, ctx_r19.displayMonthNumber));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", month_r20, " ");
} }
function PoCalendarWrapperComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    const _r25 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "po-calendar-header", 14);
    i0.ɵɵlistener("p-previous", function PoCalendarWrapperComponent_ng_container_2_Template_po_calendar_header_p_previous_1_listener() { i0.ɵɵrestoreView(_r25); const ctx_r24 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r24.updateYear(-1)); })("p-next", function PoCalendarWrapperComponent_ng_container_2_Template_po_calendar_header_p_next_1_listener() { i0.ɵɵrestoreView(_r25); const ctx_r26 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r26.updateYear(1)); });
    i0.ɵɵelementStart(2, "span", 4);
    i0.ɵɵlistener("click", function PoCalendarWrapperComponent_ng_container_2_Template_span_click_2_listener() { i0.ɵɵrestoreView(_r25); const ctx_r27 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r27.selectDisplayMode("year")); });
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 5)(5, "div", 6)(6, "div", 10);
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(8, "div", 15);
    i0.ɵɵtemplate(9, PoCalendarWrapperComponent_ng_container_2_div_9_Template, 3, 3, "div", 16);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.displayYear, " ");
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.monthLabel, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r1.displayMonths);
} }
function PoCalendarWrapperComponent_ng_container_3_div_8_Template(rf, ctx) { if (rf & 1) {
    const _r32 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20);
    i0.ɵɵlistener("click", function PoCalendarWrapperComponent_ng_container_3_div_8_Template_div_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r32); const year_r29 = restoredCtx.$implicit; const ctx_r31 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r31.onSelectYear(year_r29, ctx_r31.displayMonthNumber)); });
    i0.ɵɵelementStart(1, "span", 13);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const year_r29 = ctx.$implicit;
    const ctx_r28 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("ngClass", ctx_r28.getBackgroundColor(year_r29, ctx_r28.currentYear));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngClass", ctx_r28.getForegroundColor(year_r29, ctx_r28.currentYear));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", year_r29, " ");
} }
function PoCalendarWrapperComponent_ng_container_3_Template(rf, ctx) { if (rf & 1) {
    const _r34 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "po-calendar-header", 14);
    i0.ɵɵlistener("p-previous", function PoCalendarWrapperComponent_ng_container_3_Template_po_calendar_header_p_previous_1_listener() { i0.ɵɵrestoreView(_r34); const ctx_r33 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r33.updateYear(-10)); })("p-next", function PoCalendarWrapperComponent_ng_container_3_Template_po_calendar_header_p_next_1_listener() { i0.ɵɵrestoreView(_r34); const ctx_r35 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r35.updateYear(10)); });
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 5)(4, "div", 6)(5, "div", 10);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "div", 18);
    i0.ɵɵtemplate(8, PoCalendarWrapperComponent_ng_container_3_div_8_Template, 3, 3, "div", 19);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", ctx_r2.displayStartDecade, " - ", ctx_r2.displayFinalDecade, " ");
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.yearLabel, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r2.displayDecade);
} }
function PoCalendarWrapperComponent_ng_container_4_Template(rf, ctx) { if (rf & 1) {
    const _r37 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 21)(2, "div", 22)(3, "button", 23);
    i0.ɵɵlistener("click", function PoCalendarWrapperComponent_ng_container_4_Template_button_click_3_listener() { i0.ɵɵrestoreView(_r37); const ctx_r36 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r36.onSelectDate(ctx_r36.today)); });
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("disabled", ctx_r3.isTodayUnavailable());
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r3.displayToday, " ");
} }
export class PoCalendarWrapperComponent {
    poCalendarService;
    poCalendarLangService;
    poDate;
    value;
    mode = 'day';
    responsive = false;
    partType;
    range = false;
    activateDate = new Date();
    selectedValue;
    minDate;
    maxDate;
    hoverValue;
    headerChange = new EventEmitter();
    selectDate = new EventEmitter();
    hoverDate = new Subject().pipe(debounceTime(100));
    currentYear;
    displayDays;
    displayDecade;
    displayFinalDecade;
    displayMonth;
    displayMonthNumber;
    displayMonths = Array();
    displayStartDecade;
    displayWeekDays = Array();
    displayYear;
    displayToday;
    today = new Date();
    currentMonthNumber;
    date;
    lastDisplay;
    _locale;
    set locale(value) {
        this._locale = value;
        this.initializeLanguage();
    }
    get locale() {
        return this._locale;
    }
    get monthLabel() {
        return this.poCalendarLangService.getMonthLabel();
    }
    get yearLabel() {
        return this.poCalendarLangService.getYearLabel();
    }
    get isDayVisible() {
        return this.mode === 'day';
    }
    get isMonthVisible() {
        return this.mode === 'month';
    }
    get isYearVisible() {
        return this.mode === 'year';
    }
    get isStartPart() {
        return this.partType === 'start';
    }
    get isEndPart() {
        return this.partType === 'end';
    }
    constructor(poCalendarService, poCalendarLangService, poDate) {
        this.poCalendarService = poCalendarService;
        this.poCalendarLangService = poCalendarLangService;
        this.poDate = poDate;
    }
    ngOnInit() {
        this.init();
    }
    ngOnChanges(changes) {
        const { activateDate } = changes;
        if (activateDate) {
            this.updateDate(activateDate.currentValue);
        }
    }
    getBackgroundColor(displayValue, propertyValue) {
        return displayValue === propertyValue ? 'po-calendar-box-background-selected' : 'po-calendar-box-background';
    }
    getDayBackgroundColor(date) {
        return this.getDayColor(date, 'background');
    }
    getDayForegroundColor(date) {
        return this.getDayColor(date, 'foreground');
    }
    getForegroundColor(displayValue, propertyValue) {
        return displayValue === propertyValue ? 'po-calendar-box-foreground-selected' : 'po-calendar-box-foreground';
    }
    isTodayUnavailable() {
        return this.minDate > this.today || this.maxDate < this.today;
    }
    onNextMonth() {
        this.displayMonthNumber < 11
            ? this.updateDisplay(this.displayYear, this.displayMonthNumber + 1)
            : this.updateDisplay(this.displayYear + 1, 0);
        this.headerChange.emit({ month: this.displayMonthNumber, year: this.displayYear });
    }
    onPreviousMonth() {
        if (this.displayMonthNumber > 0) {
            this.updateDisplay(this.displayYear, this.displayMonthNumber - 1);
        }
        else {
            this.updateDisplay(this.displayYear - 1, 11);
        }
        this.headerChange.emit({ month: this.displayMonthNumber, year: this.displayYear });
    }
    onMouseEnter(day) {
        this.hoverDate.next(day);
    }
    onMouseLeave() {
        this.hoverDate.next(null);
    }
    // Ao selecionar uma data
    onSelectDate(date) {
        this.selectDate.emit(date);
    }
    // Ao selecionar um mês
    onSelectMonth(year, month) {
        this.selectDisplayMode('day');
        this.updateDisplay(year, month);
        this.headerChange.emit({ month, year });
    }
    // Ao selecionar um ano
    onSelectYear(year, month) {
        // Se veio da tela de seleção de mês
        this.selectDisplayMode(this.lastDisplay === 'month' ? 'month' : 'day');
        this.currentYear = year;
        this.updateDisplay(year, month);
        this.headerChange.emit({ month, year });
    }
    selectDisplayMode(mode) {
        this.lastDisplay = this.mode;
        this.mode = mode;
    }
    updateYear(value) {
        this.updateDisplay(this.displayYear + value, this.displayMonthNumber);
    }
    addAllYearsInDecade(year) {
        let i;
        for (i = year; i < year + 10; i++) {
            this.displayDecade.push(i);
        }
    }
    equalsDate(date1, date2) {
        try {
            return (date1.getFullYear() === date2.getFullYear() &&
                date1.getMonth() === date2.getMonth() &&
                date1.getDate() === date2.getDate());
        }
        catch (error) {
            return false;
        }
    }
    // Obtém um array de todos os anos desta década
    getDecadeArray(year) {
        this.displayDecade = Array();
        if (year % 10 !== 0) {
            while (year % 10 !== 0) {
                year--;
            }
        }
        this.updateDecade(year);
    }
    getColorForDate(date, local) {
        return this.poDate.validateDateRange(date, this.minDate, this.maxDate)
            ? `po-calendar-box-${local}-selected`
            : `po-calendar-box-${local}-selected-disabled`;
    }
    getColorForDefaultDate(date, local) {
        return this.poDate.validateDateRange(date, this.minDate, this.maxDate)
            ? `po-calendar-box-${local}`
            : `po-calendar-box-${local}-disabled`;
    }
    getColorForToday(date, local) {
        return this.poDate.validateDateRange(date, this.minDate, this.maxDate)
            ? `po-calendar-box-${local}-today`
            : `po-calendar-box-${local}-today-disabled`;
    }
    getColorForDateRange(date, local) {
        return this.poDate.validateDateRange(date, this.minDate, this.maxDate)
            ? `po-calendar-box-${local}-in-range`
            : `po-calendar-box-${local}-in-range-disabled`;
    }
    getDayColor(date, local) {
        const start = this.selectedValue?.start;
        const end = this.selectedValue?.end;
        if (this.range && (this.equalsDate(date, start) || this.equalsDate(date, end))) {
            return this.getColorForDate(date, local);
        }
        else if (this.range && start && end && date > start && date < end) {
            return this.getColorForDateRange(date, local);
        }
        else if (this.range && start && !end && date > start && date < this.hoverValue) {
            return `po-calendar-box-${local}-hover`;
        }
        else if (!this.range && this.equalsDate(date, this.value)) {
            return this.getColorForDate(date, local);
        }
        else if (this.equalsDate(date, this.today)) {
            return this.getColorForToday(date, local);
        }
        else {
            return this.getColorForDefaultDate(date, local);
        }
    }
    init() {
        this.updateDate(this.activateDate);
        this.initializeLanguage();
        this.selectDisplayMode('day');
    }
    initializeLanguage() {
        this.poCalendarLangService.setLanguage(this.locale);
        this.displayWeekDays = this.poCalendarLangService.getWeekDaysArray();
        this.displayMonths = this.poCalendarLangService.getMonthsArray();
        this.displayMonth = this.displayMonths[this.displayMonthNumber];
        this.displayToday = this.poCalendarLangService.getTodayLabel();
    }
    updateDate(value = new Date()) {
        const date = new Date(value);
        this.currentMonthNumber = date.getMonth();
        this.currentYear = date.getFullYear();
        this.updateDisplay(this.currentYear, this.currentMonthNumber);
    }
    updateDecade(year) {
        this.addAllYearsInDecade(year);
        this.displayStartDecade = year;
        this.displayFinalDecade = year + 9;
    }
    updateDisplay(year, month) {
        const calendarArray = this.poCalendarService.monthDays(year, month);
        this.displayDays = [].concat.apply([], calendarArray);
        this.displayMonthNumber = month;
        this.displayMonth = this.displayMonths[month];
        this.displayYear = year;
        this.getDecadeArray(year);
    }
    static ɵfac = function PoCalendarWrapperComponent_Factory(t) { return new (t || PoCalendarWrapperComponent)(i0.ɵɵdirectiveInject(i1.PoCalendarService), i0.ɵɵdirectiveInject(i2.PoCalendarLangService), i0.ɵɵdirectiveInject(i3.PoDateService)); };
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoCalendarWrapperComponent, selectors: [["po-calendar-wrapper"]], inputs: { value: [i0.ɵɵInputFlags.None, "p-value", "value"], mode: [i0.ɵɵInputFlags.None, "p-mode", "mode"], responsive: [i0.ɵɵInputFlags.None, "p-responsive", "responsive"], partType: [i0.ɵɵInputFlags.None, "p-part-type", "partType"], range: [i0.ɵɵInputFlags.None, "p-range", "range"], activateDate: [i0.ɵɵInputFlags.None, "p-activate-date", "activateDate"], selectedValue: [i0.ɵɵInputFlags.None, "p-selected-value", "selectedValue"], minDate: [i0.ɵɵInputFlags.None, "p-min-date", "minDate"], maxDate: [i0.ɵɵInputFlags.None, "p-max-date", "maxDate"], hoverValue: [i0.ɵɵInputFlags.None, "p-hover-value", "hoverValue"], locale: [i0.ɵɵInputFlags.None, "p-locale", "locale"] }, outputs: { headerChange: "p-header-change", selectDate: "p-select-date", hoverDate: "p-hover-date" }, features: [i0.ɵɵProvidersFeature([PoCalendarService]), i0.ɵɵNgOnChangesFeature], decls: 5, vars: 4, consts: [[1, "po-calendar-wrapper"], [4, "ngIf"], [3, "p-hide-previous", "p-hide-next", "p-previous", "p-next"], [1, "po-clickable", "po-mr-1", 3, "click"], [1, "po-clickable", 3, "click"], [1, "po-calendar-content"], [1, "po-calendar-labels"], ["class", "po-calendar-label", 4, "ngFor", "ngForOf"], [1, "po-calendar-content-list-day"], ["class", "po-calendar-day", "attr-calendar", "", 3, "ngClass", "click", "mouseenter", "mouseleave", 4, "ngFor", "ngForOf"], [1, "po-calendar-label"], ["attr-calendar", "", 1, "po-calendar-day", 3, "ngClass", "click", "mouseenter", "mouseleave"], [3, "ngClass", 4, "ngIf"], [3, "ngClass"], [3, "p-previous", "p-next"], [1, "po-calendar-content-list-month"], ["class", "po-calendar-month", "attr-calendar", "", 3, "ngClass", "click", 4, "ngFor", "ngForOf"], ["attr-calendar", "", 1, "po-calendar-month", 3, "ngClass", "click"], [1, "po-calendar-content-list-year"], ["class", "po-calendar-year", "attr-calendar", "", 3, "ngClass", "click", 4, "ngFor", "ngForOf"], ["attr-calendar", "", 1, "po-calendar-year", 3, "ngClass", "click"], [1, "po-calendar-footer"], [1, "po-calendar-footer-today"], ["type", "button", 1, "po-calendar-footer-today-button", 3, "disabled", "click"]], template: function PoCalendarWrapperComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵelementStart(0, "div", 0);
            i0.ɵɵtemplate(1, PoCalendarWrapperComponent_ng_container_1_Template, 11, 6, "ng-container", 1)(2, PoCalendarWrapperComponent_ng_container_2_Template, 10, 3, "ng-container", 1)(3, PoCalendarWrapperComponent_ng_container_3_Template, 9, 4, "ng-container", 1)(4, PoCalendarWrapperComponent_ng_container_4_Template, 5, 2, "ng-container", 1);
            i0.ɵɵelementEnd();
        } if (rf & 2) {
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.isDayVisible);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.isMonthVisible);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.isYearVisible);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", !ctx.range);
        } }, dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.PoCalendarHeaderComponent], encapsulation: 2, changeDetection: 0 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoCalendarWrapperComponent, [{
        type: Component,
        args: [{ selector: 'po-calendar-wrapper', providers: [PoCalendarService], changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"po-calendar-wrapper\">\n  <ng-container *ngIf=\"isDayVisible\">\n    <po-calendar-header\n      [p-hide-previous]=\"isEndPart\"\n      [p-hide-next]=\"isStartPart && !responsive\"\n      (p-previous)=\"onPreviousMonth()\"\n      (p-next)=\"onNextMonth()\"\n    >\n      <span class=\"po-clickable po-mr-1\" (click)=\"selectDisplayMode('month')\">{{ displayMonth }}</span>\n      <span class=\"po-clickable\" (click)=\"selectDisplayMode('year')\">{{ displayYear }}</span>\n    </po-calendar-header>\n\n    <div class=\"po-calendar-content\">\n      <div class=\"po-calendar-labels\">\n        <div class=\"po-calendar-label\" *ngFor=\"let weekDay of displayWeekDays\">\n          {{ weekDay }}\n        </div>\n      </div>\n\n      <div class=\"po-calendar-content-list-day\">\n        <div\n          *ngFor=\"let day of displayDays\"\n          class=\"po-calendar-day\"\n          [ngClass]=\"getDayBackgroundColor(day)\"\n          (click)=\"onSelectDate(day)\"\n          (mouseenter)=\"onMouseEnter(day)\"\n          (mouseleave)=\"onMouseLeave()\"\n          attr-calendar\n        >\n          <span *ngIf=\"day !== 0\" [ngClass]=\"getDayForegroundColor(day)\">\n            {{ day.getDate() }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"isMonthVisible\">\n    <po-calendar-header (p-previous)=\"updateYear(-1)\" (p-next)=\"updateYear(1)\">\n      <span class=\"po-clickable\" (click)=\"selectDisplayMode('year')\">\n        {{ displayYear }}\n      </span>\n    </po-calendar-header>\n\n    <div class=\"po-calendar-content\">\n      <div class=\"po-calendar-labels\">\n        <div class=\"po-calendar-label\">\n          {{ monthLabel }}\n        </div>\n      </div>\n      <div class=\"po-calendar-content-list-month\">\n        <div\n          *ngFor=\"let month of displayMonths; let i = index\"\n          class=\"po-calendar-month\"\n          [ngClass]=\"getBackgroundColor(i, displayMonthNumber)\"\n          (click)=\"onSelectMonth(displayYear, i)\"\n          attr-calendar\n        >\n          <span [ngClass]=\"getForegroundColor(i, displayMonthNumber)\">\n            {{ month }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"isYearVisible\">\n    <po-calendar-header (p-previous)=\"updateYear(-10)\" (p-next)=\"updateYear(10)\">\n      {{ displayStartDecade }} - {{ displayFinalDecade }}\n    </po-calendar-header>\n\n    <div class=\"po-calendar-content\">\n      <div class=\"po-calendar-labels\">\n        <div class=\"po-calendar-label\">\n          {{ yearLabel }}\n        </div>\n      </div>\n\n      <div class=\"po-calendar-content-list-year\">\n        <div\n          *ngFor=\"let year of displayDecade; let i = index\"\n          class=\"po-calendar-year\"\n          [ngClass]=\"getBackgroundColor(year, currentYear)\"\n          (click)=\"onSelectYear(year, displayMonthNumber)\"\n          attr-calendar\n        >\n          <span [ngClass]=\"getForegroundColor(year, currentYear)\">\n            {{ year }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"!range\">\n    <div class=\"po-calendar-footer\">\n      <div class=\"po-calendar-footer-today\">\n        <button\n          type=\"button\"\n          class=\"po-calendar-footer-today-button\"\n          (click)=\"onSelectDate(today)\"\n          [disabled]=\"isTodayUnavailable()\"\n        >\n          {{ displayToday }}\n        </button>\n      </div>\n    </div>\n  </ng-container>\n</div>\n" }]
    }], () => [{ type: i1.PoCalendarService }, { type: i2.PoCalendarLangService }, { type: i3.PoDateService }], { value: [{
            type: Input,
            args: ['p-value']
        }], mode: [{
            type: Input,
            args: ['p-mode']
        }], responsive: [{
            type: Input,
            args: ['p-responsive']
        }], partType: [{
            type: Input,
            args: ['p-part-type']
        }], range: [{
            type: Input,
            args: ['p-range']
        }], activateDate: [{
            type: Input,
            args: ['p-activate-date']
        }], selectedValue: [{
            type: Input,
            args: ['p-selected-value']
        }], minDate: [{
            type: Input,
            args: ['p-min-date']
        }], maxDate: [{
            type: Input,
            args: ['p-max-date']
        }], hoverValue: [{
            type: Input,
            args: ['p-hover-value']
        }], headerChange: [{
            type: Output,
            args: ['p-header-change']
        }], selectDate: [{
            type: Output,
            args: ['p-select-date']
        }], hoverDate: [{
            type: Output,
            args: ['p-hover-date']
        }], locale: [{
            type: Input,
            args: ['p-locale']
        }] }); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoCalendarWrapperComponent, { className: "PoCalendarWrapperComponent", filePath: "lib/components/po-calendar/po-calendar-wrapper/po-calendar-wrapper.component.ts", lineNumber: 16 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2FsZW5kYXItd3JhcHBlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tY2FsZW5kYXIvcG8tY2FsZW5kYXItd3JhcHBlci9wby1jYWxlbmRhci13cmFwcGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1jYWxlbmRhci9wby1jYWxlbmRhci13cmFwcGVyL3BvLWNhbGVuZGFyLXdyYXBwZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQXFCLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFbkgsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHOUMsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0saUNBQWlDLENBQUM7Ozs7Ozs7O0lDUTVELCtCQUF1RTtJQUNyRSxZQUNGO0lBQUEsaUJBQU07OztJQURKLGNBQ0Y7SUFERSwyQ0FDRjs7O0lBYUUsZ0NBQStEO0lBQzdELFlBQ0Y7SUFBQSxpQkFBTzs7OztJQUZpQiw4REFBc0M7SUFDNUQsY0FDRjtJQURFLGlEQUNGOzs7O0lBWEYsK0JBUUM7SUFKQyxpUEFBUyxlQUFBLDRCQUFpQixDQUFBLElBQUMsOE9BQ2IsZUFBQSw0QkFBaUIsQ0FBQSxJQURKLG9MQUViLGVBQUEsc0JBQWMsQ0FBQSxJQUZEO0lBSzNCLG9HQUVPO0lBQ1QsaUJBQU07Ozs7SUFUSiw4REFBc0M7SUFNL0IsY0FBZTtJQUFmLG1DQUFlOzs7O0lBNUI5Qiw2QkFBbUM7SUFDakMsNkNBS0M7SUFGQyx3TUFBYyxl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QTNCLEtBQUs7bUJBQUMsWUFBWTtZQUVLLFVBQVU7a0JBQWpDLEtBQUs7bUJBQUMsZUFBZTtZQUVLLFlBQVk7a0JBQXRDLE1BQU07bUJBQUMsaUJBQWlCO1lBRUEsVUFBVTtrQkFBbEMsTUFBTTttQkFBQyxlQUFlO1lBRUMsU0FBUztrQkFBaEMsTUFBTTttQkFBQyxjQUFjO1lBcUJDLE1BQU07a0JBQTVCLEtBQUs7bUJBQUMsVUFBVTs7a0ZBOUNOLDBCQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIElucHV0LCBPbkNoYW5nZXMsIE9uSW5pdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBQb0NhbGVuZGFyTGFuZ1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9wby1jYWxlbmRhci5sYW5nLnNlcnZpY2UnO1xuaW1wb3J0IHsgUG9DYWxlbmRhclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9wby1jYWxlbmRhci5zZXJ2aWNlJztcbmltcG9ydCB7IFBvRGF0ZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wby1kYXRlL3BvLWRhdGUuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BvLWNhbGVuZGFyLXdyYXBwZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tY2FsZW5kYXItd3JhcHBlci5jb21wb25lbnQuaHRtbCcsXG4gIHByb3ZpZGVyczogW1BvQ2FsZW5kYXJTZXJ2aWNlXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbn0pXG5leHBvcnQgY2xhc3MgUG9DYWxlbmRhcldyYXBwZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgncC12YWx1ZScpIHZhbHVlO1xuXG4gIEBJbnB1dCgncC1tb2RlJykgbW9kZTogJ2RheScgfCAnbW9udGgnIHwgJ3llYXInID0gJ2RheSc7XG5cbiAgQElucHV0KCdwLXJlc3BvbnNpdmUnKSByZXNwb25zaXZlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgQElucHV0KCdwLXBhcnQtdHlwZScpIHBhcnRUeXBlOiAnc3RhcnQnIHwgJ2VuZCc7XG5cbiAgQElucHV0KCdwLXJhbmdlJykgcmFuZ2U6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBASW5wdXQoJ3AtYWN0aXZhdGUtZGF0ZScpIGFjdGl2YXRlRGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgQElucHV0KCdwLXNlbGVjdGVkLXZhbHVlJykgc2VsZWN0ZWRWYWx1ZTtcblxuICBASW5wdXQoJ3AtbWluLWRhdGUnKSBtaW5EYXRlO1xuXG4gIEBJbnB1dCgncC1tYXgtZGF0ZScpIG1heERhdGU7XG5cbiAgQElucHV0KCdwLWhvdmVyLXZhbHVlJykgaG92ZXJWYWx1ZTogRGF0ZTtcblxuICBAT3V0cHV0KCdwLWhlYWRlci1jaGFuZ2UnKSBoZWFkZXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBAT3V0cHV0KCdwLXNlbGVjdC1kYXRlJykgc2VsZWN0RGF0ZSA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBPdXRwdXQoJ3AtaG92ZXItZGF0ZScpIGhvdmVyRGF0ZSA9IG5ldyBTdWJqZWN0PERhdGU+KCkucGlwZShkZWJvdW5jZVRpbWUoMTAwKSk7XG5cbiAgY3VycmVudFllYXI6IG51bWJlcjtcbiAgZGlzcGxheURheXM6IEFycmF5PG51bWJlcj47XG4gIGRpc3BsYXlEZWNhZGU6IEFycmF5PG51bWJlcj47XG4gIGRpc3BsYXlGaW5hbERlY2FkZTogbnVtYmVyO1xuICBkaXNwbGF5TW9udGg6IGFueTtcbiAgZGlzcGxheU1vbnRoTnVtYmVyOiBudW1iZXI7XG4gIGRpc3BsYXlNb250aHM6IEFycmF5PGFueT4gPSBBcnJheSgpO1xuICBkaXNwbGF5U3RhcnREZWNhZGU6IG51bWJlcjtcbiAgZGlzcGxheVdlZWtEYXlzOiBBcnJheTxhbnk+ID0gQXJyYXkoKTtcbiAgZGlzcGxheVllYXI6IG51bWJlcjtcbiAgZGlzcGxheVRvZGF5OiBzdHJpbmc7XG4gIHRvZGF5OiBEYXRlID0gbmV3IERhdGUoKTtcblxuICBwcm90ZWN0ZWQgY3VycmVudE1vbnRoTnVtYmVyOiBudW1iZXI7XG4gIHByb3RlY3RlZCBkYXRlOiBEYXRlO1xuICBwcm90ZWN0ZWQgbGFzdERpc3BsYXk6IHN0cmluZztcblxuICBwcml2YXRlIF9sb2NhbGU6IHN0cmluZztcblxuICBASW5wdXQoJ3AtbG9jYWxlJykgc2V0IGxvY2FsZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fbG9jYWxlID0gdmFsdWU7XG4gICAgdGhpcy5pbml0aWFsaXplTGFuZ3VhZ2UoKTtcbiAgfVxuXG4gIGdldCBsb2NhbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xvY2FsZTtcbiAgfVxuXG4gIGdldCBtb250aExhYmVsKCkge1xuICAgIHJldHVybiB0aGlzLnBvQ2FsZW5kYXJMYW5nU2VydmljZS5nZXRNb250aExhYmVsKCk7XG4gIH1cblxuICBnZXQgeWVhckxhYmVsKCkge1xuICAgIHJldHVybiB0aGlzLnBvQ2FsZW5kYXJMYW5nU2VydmljZS5nZXRZZWFyTGFiZWwoKTtcbiAgfVxuXG4gIGdldCBpc0RheVZpc2libGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ2RheSc7XG4gIH1cblxuICBnZXQgaXNNb250aFZpc2libGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ21vbnRoJztcbiAgfVxuXG4gIGdldCBpc1llYXJWaXNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLm1vZGUgPT09ICd5ZWFyJztcbiAgfVxuXG4gIGdldCBpc1N0YXJ0UGFydCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0VHlwZSA9PT0gJ3N0YXJ0JztcbiAgfVxuXG4gIGdldCBpc0VuZFBhcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydFR5cGUgPT09ICdlbmQnO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBwb0NhbGVuZGFyU2VydmljZTogUG9DYWxlbmRhclNlcnZpY2UsXG4gICAgcHJpdmF0ZSBwb0NhbGVuZGFyTGFuZ1NlcnZpY2U6IFBvQ2FsZW5kYXJMYW5nU2VydmljZSxcbiAgICBwcml2YXRlIHBvRGF0ZTogUG9EYXRlU2VydmljZVxuICApIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgY29uc3QgeyBhY3RpdmF0ZURhdGUgfSA9IGNoYW5nZXM7XG5cbiAgICBpZiAoYWN0aXZhdGVEYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZURhdGUoYWN0aXZhdGVEYXRlLmN1cnJlbnRWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0QmFja2dyb3VuZENvbG9yKGRpc3BsYXlWYWx1ZTogbnVtYmVyLCBwcm9wZXJ0eVZhbHVlOiBudW1iZXIpIHtcbiAgICByZXR1cm4gZGlzcGxheVZhbHVlID09PSBwcm9wZXJ0eVZhbHVlID8gJ3BvLWNhbGVuZGFyLWJveC1iYWNrZ3JvdW5kLXNlbGVjdGVkJyA6ICdwby1jYWxlbmRhci1ib3gtYmFja2dyb3VuZCc7XG4gIH1cblxuICBnZXREYXlCYWNrZ3JvdW5kQ29sb3IoZGF0ZTogRGF0ZSkge1xuICAgIHJldHVybiB0aGlzLmdldERheUNvbG9yKGRhdGUsICdiYWNrZ3JvdW5kJyk7XG4gIH1cblxuICBnZXREYXlGb3JlZ3JvdW5kQ29sb3IoZGF0ZTogRGF0ZSkge1xuICAgIHJldHVybiB0aGlzLmdldERheUNvbG9yKGRhdGUsICdmb3JlZ3JvdW5kJyk7XG4gIH1cblxuICBnZXRGb3JlZ3JvdW5kQ29sb3IoZGlzcGxheVZhbHVlOiBudW1iZXIsIHByb3BlcnR5VmFsdWU6IG51bWJlcikge1xuICAgIHJldHVybiBkaXNwbGF5VmFsdWUgPT09IHByb3BlcnR5VmFsdWUgPyAncG8tY2FsZW5kYXItYm94LWZvcmVncm91bmQtc2VsZWN0ZWQnIDogJ3BvLWNhbGVuZGFyLWJveC1mb3JlZ3JvdW5kJztcbiAgfVxuXG4gIGlzVG9kYXlVbmF2YWlsYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5taW5EYXRlID4gdGhpcy50b2RheSB8fCB0aGlzLm1heERhdGUgPCB0aGlzLnRvZGF5O1xuICB9XG5cbiAgb25OZXh0TW9udGgoKSB7XG4gICAgdGhpcy5kaXNwbGF5TW9udGhOdW1iZXIgPCAxMVxuICAgICAgPyB0aGlzLnVwZGF0ZURpc3BsYXkodGhpcy5kaXNwbGF5WWVhciwgdGhpcy5kaXNwbGF5TW9udGhOdW1iZXIgKyAxKVxuICAgICAgOiB0aGlzLnVwZGF0ZURpc3BsYXkodGhpcy5kaXNwbGF5WWVhciArIDEsIDApO1xuXG4gICAgdGhpcy5oZWFkZXJDaGFuZ2UuZW1pdCh7IG1vbnRoOiB0aGlzLmRpc3BsYXlNb250aE51bWJlciwgeWVhcjogdGhpcy5kaXNwbGF5WWVhciB9KTtcbiAgfVxuXG4gIG9uUHJldmlvdXNNb250aCgpIHtcbiAgICBpZiAodGhpcy5kaXNwbGF5TW9udGhOdW1iZXIgPiAwKSB7XG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkodGhpcy5kaXNwbGF5WWVhciwgdGhpcy5kaXNwbGF5TW9udGhOdW1iZXIgLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVEaXNwbGF5KHRoaXMuZGlzcGxheVllYXIgLSAxLCAxMSk7XG4gICAgfVxuXG4gICAgdGhpcy5oZWFkZXJDaGFuZ2UuZW1pdCh7IG1vbnRoOiB0aGlzLmRpc3BsYXlNb250aE51bWJlciwgeWVhcjogdGhpcy5kaXNwbGF5WWVhciB9KTtcbiAgfVxuXG4gIG9uTW91c2VFbnRlcihkYXkpIHtcbiAgICAoPFN1YmplY3Q8RGF0ZT4+dGhpcy5ob3ZlckRhdGUpLm5leHQoZGF5KTtcbiAgfVxuXG4gIG9uTW91c2VMZWF2ZSgpIHtcbiAgICAoPFN1YmplY3Q8RGF0ZT4+dGhpcy5ob3ZlckRhdGUpLm5leHQobnVsbCk7XG4gIH1cblxuICAvLyBBbyBzZWxlY2lvbmFyIHVtYSBkYXRhXG4gIG9uU2VsZWN0RGF0ZShkYXRlOiBEYXRlKSB7XG4gICAgdGhpcy5zZWxlY3REYXRlLmVtaXQoZGF0ZSk7XG4gIH1cblxuICAvLyBBbyBzZWxlY2lvbmFyIHVtIG3DqnNcbiAgb25TZWxlY3RNb250aCh5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIpIHtcbiAgICB0aGlzLnNlbGVjdERpc3BsYXlNb2RlKCdkYXknKTtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoeWVhciwgbW9udGgpO1xuXG4gICAgdGhpcy5oZWFkZXJDaGFuZ2UuZW1pdCh7IG1vbnRoLCB5ZWFyIH0pO1xuICB9XG5cbiAgLy8gQW8gc2VsZWNpb25hciB1bSBhbm9cbiAgb25TZWxlY3RZZWFyKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlcikge1xuICAgIC8vIFNlIHZlaW8gZGEgdGVsYSBkZSBzZWxlw6fDo28gZGUgbcOqc1xuICAgIHRoaXMuc2VsZWN0RGlzcGxheU1vZGUodGhpcy5sYXN0RGlzcGxheSA9PT0gJ21vbnRoJyA/ICdtb250aCcgOiAnZGF5Jyk7XG5cbiAgICB0aGlzLmN1cnJlbnRZZWFyID0geWVhcjtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoeWVhciwgbW9udGgpO1xuXG4gICAgdGhpcy5oZWFkZXJDaGFuZ2UuZW1pdCh7IG1vbnRoLCB5ZWFyIH0pO1xuICB9XG5cbiAgc2VsZWN0RGlzcGxheU1vZGUobW9kZTogJ21vbnRoJyB8ICdkYXknIHwgJ3llYXInKSB7XG4gICAgdGhpcy5sYXN0RGlzcGxheSA9IHRoaXMubW9kZTtcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICB9XG5cbiAgdXBkYXRlWWVhcih2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy51cGRhdGVEaXNwbGF5KHRoaXMuZGlzcGxheVllYXIgKyB2YWx1ZSwgdGhpcy5kaXNwbGF5TW9udGhOdW1iZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRBbGxZZWFyc0luRGVjYWRlKHllYXI6IG51bWJlcikge1xuICAgIGxldCBpO1xuICAgIGZvciAoaSA9IHllYXI7IGkgPCB5ZWFyICsgMTA7IGkrKykge1xuICAgICAgdGhpcy5kaXNwbGF5RGVjYWRlLnB1c2goaSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlcXVhbHNEYXRlKGRhdGUxOiBEYXRlLCBkYXRlMjogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBkYXRlMS5nZXRGdWxsWWVhcigpID09PSBkYXRlMi5nZXRGdWxsWWVhcigpICYmXG4gICAgICAgIGRhdGUxLmdldE1vbnRoKCkgPT09IGRhdGUyLmdldE1vbnRoKCkgJiZcbiAgICAgICAgZGF0ZTEuZ2V0RGF0ZSgpID09PSBkYXRlMi5nZXREYXRlKClcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBPYnTDqW0gdW0gYXJyYXkgZGUgdG9kb3Mgb3MgYW5vcyBkZXN0YSBkw6ljYWRhXG4gIHByaXZhdGUgZ2V0RGVjYWRlQXJyYXkoeWVhcikge1xuICAgIHRoaXMuZGlzcGxheURlY2FkZSA9IEFycmF5KCk7XG5cbiAgICBpZiAoeWVhciAlIDEwICE9PSAwKSB7XG4gICAgICB3aGlsZSAoeWVhciAlIDEwICE9PSAwKSB7XG4gICAgICAgIHllYXItLTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy51cGRhdGVEZWNhZGUoeWVhcik7XG4gIH1cblxuICBwcml2YXRlIGdldENvbG9yRm9yRGF0ZShkYXRlOiBEYXRlLCBsb2NhbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMucG9EYXRlLnZhbGlkYXRlRGF0ZVJhbmdlKGRhdGUsIHRoaXMubWluRGF0ZSwgdGhpcy5tYXhEYXRlKVxuICAgICAgPyBgcG8tY2FsZW5kYXItYm94LSR7bG9jYWx9LXNlbGVjdGVkYFxuICAgICAgOiBgcG8tY2FsZW5kYXItYm94LSR7bG9jYWx9LXNlbGVjdGVkLWRpc2FibGVkYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q29sb3JGb3JEZWZhdWx0RGF0ZShkYXRlOiBEYXRlLCBsb2NhbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMucG9EYXRlLnZhbGlkYXRlRGF0ZVJhbmdlKGRhdGUsIHRoaXMubWluRGF0ZSwgdGhpcy5tYXhEYXRlKVxuICAgICAgPyBgcG8tY2FsZW5kYXItYm94LSR7bG9jYWx9YFxuICAgICAgOiBgcG8tY2FsZW5kYXItYm94LSR7bG9jYWx9LWRpc2FibGVkYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q29sb3JGb3JUb2RheShkYXRlOiBEYXRlLCBsb2NhbDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMucG9EYXRlLnZhbGlkYXRlRGF0ZVJhbmdlKGRhdGUsIHRoaXMubWluRGF0ZSwgdGhpcy5tYXhEYXRlKVxuICAgICAgPyBgcG8tY2FsZW5kYXItYm94LSR7bG9jYWx9LXRvZGF5YFxuICAgICAgOiBgcG8tY2FsZW5kYXItYm94LSR7bG9jYWx9LXRvZGF5LWRpc2FibGVkYDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q29sb3JGb3JEYXRlUmFuZ2UoZGF0ZTogRGF0ZSwgbG9jYWw6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnBvRGF0ZS52YWxpZGF0ZURhdGVSYW5nZShkYXRlLCB0aGlzLm1pbkRhdGUsIHRoaXMubWF4RGF0ZSlcbiAgICAgID8gYHBvLWNhbGVuZGFyLWJveC0ke2xvY2FsfS1pbi1yYW5nZWBcbiAgICAgIDogYHBvLWNhbGVuZGFyLWJveC0ke2xvY2FsfS1pbi1yYW5nZS1kaXNhYmxlZGA7XG4gIH1cblxuICBwcml2YXRlIGdldERheUNvbG9yKGRhdGU6IERhdGUsIGxvY2FsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuc2VsZWN0ZWRWYWx1ZT8uc3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5zZWxlY3RlZFZhbHVlPy5lbmQ7XG5cbiAgICBpZiAodGhpcy5yYW5nZSAmJiAodGhpcy5lcXVhbHNEYXRlKGRhdGUsIHN0YXJ0KSB8fCB0aGlzLmVxdWFsc0RhdGUoZGF0ZSwgZW5kKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbG9yRm9yRGF0ZShkYXRlLCBsb2NhbCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnJhbmdlICYmIHN0YXJ0ICYmIGVuZCAmJiBkYXRlID4gc3RhcnQgJiYgZGF0ZSA8IGVuZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sb3JGb3JEYXRlUmFuZ2UoZGF0ZSwgbG9jYWwpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5yYW5nZSAmJiBzdGFydCAmJiAhZW5kICYmIGRhdGUgPiBzdGFydCAmJiBkYXRlIDwgdGhpcy5ob3ZlclZhbHVlKSB7XG4gICAgICByZXR1cm4gYHBvLWNhbGVuZGFyLWJveC0ke2xvY2FsfS1ob3ZlcmA7XG4gICAgfSBlbHNlIGlmICghdGhpcy5yYW5nZSAmJiB0aGlzLmVxdWFsc0RhdGUoZGF0ZSwgdGhpcy52YWx1ZSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbG9yRm9yRGF0ZShkYXRlLCBsb2NhbCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmVxdWFsc0RhdGUoZGF0ZSwgdGhpcy50b2RheSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENvbG9yRm9yVG9kYXkoZGF0ZSwgbG9jYWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDb2xvckZvckRlZmF1bHREYXRlKGRhdGUsIGxvY2FsKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluaXQoKSB7XG4gICAgdGhpcy51cGRhdGVEYXRlKHRoaXMuYWN0aXZhdGVEYXRlKTtcbiAgICB0aGlzLmluaXRpYWxpemVMYW5ndWFnZSgpO1xuICAgIHRoaXMuc2VsZWN0RGlzcGxheU1vZGUoJ2RheScpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplTGFuZ3VhZ2UoKSB7XG4gICAgdGhpcy5wb0NhbGVuZGFyTGFuZ1NlcnZpY2Uuc2V0TGFuZ3VhZ2UodGhpcy5sb2NhbGUpO1xuICAgIHRoaXMuZGlzcGxheVdlZWtEYXlzID0gdGhpcy5wb0NhbGVuZGFyTGFuZ1NlcnZpY2UuZ2V0V2Vla0RheXNBcnJheSgpO1xuICAgIHRoaXMuZGlzcGxheU1vbnRocyA9IHRoaXMucG9DYWxlbmRhckxhbmdTZXJ2aWNlLmdldE1vbnRoc0FycmF5KCk7XG4gICAgdGhpcy5kaXNwbGF5TW9udGggPSB0aGlzLmRpc3BsYXlNb250aHNbdGhpcy5kaXNwbGF5TW9udGhOdW1iZXJdO1xuICAgIHRoaXMuZGlzcGxheVRvZGF5ID0gdGhpcy5wb0NhbGVuZGFyTGFuZ1NlcnZpY2UuZ2V0VG9kYXlMYWJlbCgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVEYXRlKHZhbHVlOiBEYXRlID0gbmV3IERhdGUoKSkge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG5cbiAgICB0aGlzLmN1cnJlbnRNb250aE51bWJlciA9IGRhdGUuZ2V0TW9udGgoKTtcbiAgICB0aGlzLmN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIHRoaXMudXBkYXRlRGlzcGxheSh0aGlzLmN1cnJlbnRZZWFyLCB0aGlzLmN1cnJlbnRNb250aE51bWJlcik7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURlY2FkZSh5ZWFyOiBudW1iZXIpIHtcbiAgICB0aGlzLmFkZEFsbFllYXJzSW5EZWNhZGUoeWVhcik7XG4gICAgdGhpcy5kaXNwbGF5U3RhcnREZWNhZGUgPSB5ZWFyO1xuICAgIHRoaXMuZGlzcGxheUZpbmFsRGVjYWRlID0geWVhciArIDk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXkoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKSB7XG4gICAgY29uc3QgY2FsZW5kYXJBcnJheSA9IHRoaXMucG9DYWxlbmRhclNlcnZpY2UubW9udGhEYXlzKHllYXIsIG1vbnRoKTtcbiAgICB0aGlzLmRpc3BsYXlEYXlzID0gW10uY29uY2F0LmFwcGx5KFtdLCBjYWxlbmRhckFycmF5KTtcbiAgICB0aGlzLmRpc3BsYXlNb250aE51bWJlciA9IG1vbnRoO1xuICAgIHRoaXMuZGlzcGxheU1vbnRoID0gdGhpcy5kaXNwbGF5TW9udGhzW21vbnRoXTtcbiAgICB0aGlzLmRpc3BsYXlZZWFyID0geWVhcjtcbiAgICB0aGlzLmdldERlY2FkZUFycmF5KHllYXIpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwicG8tY2FsZW5kYXItd3JhcHBlclwiPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiaXNEYXlWaXNpYmxlXCI+XG4gICAgPHBvLWNhbGVuZGFyLWhlYWRlclxuICAgICAgW3AtaGlkZS1wcmV2aW91c109XCJpc0VuZFBhcnRcIlxuICAgICAgW3AtaGlkZS1uZXh0XT1cImlzU3RhcnRQYXJ0ICYmICFyZXNwb25zaXZlXCJcbiAgICAgIChwLXByZXZpb3VzKT1cIm9uUHJldmlvdXNNb250aCgpXCJcbiAgICAgIChwLW5leHQpPVwib25OZXh0TW9udGgoKVwiXG4gICAgPlxuICAgICAgPHNwYW4gY2xhc3M9XCJwby1jbGlja2FibGUgcG8tbXItMVwiIChjbGljayk9XCJzZWxlY3REaXNwbGF5TW9kZSgnbW9udGgnKVwiPnt7IGRpc3BsYXlNb250aCB9fTwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwicG8tY2xpY2thYmxlXCIgKGNsaWNrKT1cInNlbGVjdERpc3BsYXlNb2RlKCd5ZWFyJylcIj57eyBkaXNwbGF5WWVhciB9fTwvc3Bhbj5cbiAgICA8L3BvLWNhbGVuZGFyLWhlYWRlcj5cblxuICAgIDxkaXYgY2xhc3M9XCJwby1jYWxlbmRhci1jb250ZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicG8tY2FsZW5kYXItbGFiZWxzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwby1jYWxlbmRhci1sYWJlbFwiICpuZ0Zvcj1cImxldCB3ZWVrRGF5IG9mIGRpc3BsYXlXZWVrRGF5c1wiPlxuICAgICAgICAgIHt7IHdlZWtEYXkgfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cInBvLWNhbGVuZGFyLWNvbnRlbnQtbGlzdC1kYXlcIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICpuZ0Zvcj1cImxldCBkYXkgb2YgZGlzcGxheURheXNcIlxuICAgICAgICAgIGNsYXNzPVwicG8tY2FsZW5kYXItZGF5XCJcbiAgICAgICAgICBbbmdDbGFzc109XCJnZXREYXlCYWNrZ3JvdW5kQ29sb3IoZGF5KVwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uU2VsZWN0RGF0ZShkYXkpXCJcbiAgICAgICAgICAobW91c2VlbnRlcik9XCJvbk1vdXNlRW50ZXIoZGF5KVwiXG4gICAgICAgICAgKG1vdXNlbGVhdmUpPVwib25Nb3VzZUxlYXZlKClcIlxuICAgICAgICAgIGF0dHItY2FsZW5kYXJcbiAgICAgICAgPlxuICAgICAgICAgIDxzcGFuICpuZ0lmPVwiZGF5ICE9PSAwXCIgW25nQ2xhc3NdPVwiZ2V0RGF5Rm9yZWdyb3VuZENvbG9yKGRheSlcIj5cbiAgICAgICAgICAgIHt7IGRheS5nZXREYXRlKCkgfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc01vbnRoVmlzaWJsZVwiPlxuICAgIDxwby1jYWxlbmRhci1oZWFkZXIgKHAtcHJldmlvdXMpPVwidXBkYXRlWWVhcigtMSlcIiAocC1uZXh0KT1cInVwZGF0ZVllYXIoMSlcIj5cbiAgICAgIDxzcGFuIGNsYXNzPVwicG8tY2xpY2thYmxlXCIgKGNsaWNrKT1cInNlbGVjdERpc3BsYXlNb2RlKCd5ZWFyJylcIj5cbiAgICAgICAge3sgZGlzcGxheVllYXIgfX1cbiAgICAgIDwvc3Bhbj5cbiAgICA8L3BvLWNhbGVuZGFyLWhlYWRlcj5cblxuICAgIDxkaXYgY2xhc3M9XCJwby1jYWxlbmRhci1jb250ZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicG8tY2FsZW5kYXItbGFiZWxzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwby1jYWxlbmRhci1sYWJlbFwiPlxuICAgICAgICAgIHt7IG1vbnRoTGFiZWwgfX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwby1jYWxlbmRhci1jb250ZW50LWxpc3QtbW9udGhcIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICpuZ0Zvcj1cImxldCBtb250aCBvZiBkaXNwbGF5TW9udGhzOyBsZXQgaSA9IGluZGV4XCJcbiAgICAgICAgICBjbGFzcz1cInBvLWNhbGVuZGFyLW1vbnRoXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJnZXRCYWNrZ3JvdW5kQ29sb3IoaSwgZGlzcGxheU1vbnRoTnVtYmVyKVwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uU2VsZWN0TW9udGgoZGlzcGxheVllYXIsIGkpXCJcbiAgICAgICAgICBhdHRyLWNhbGVuZGFyXG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBbbmdDbGFzc109XCJnZXRGb3JlZ3JvdW5kQ29sb3IoaSwgZGlzcGxheU1vbnRoTnVtYmVyKVwiPlxuICAgICAgICAgICAge3sgbW9udGggfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbmctY29udGFpbmVyPlxuXG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc1llYXJWaXNpYmxlXCI+XG4gICAgPHBvLWNhbGVuZGFyLWhlYWRlciAocC1wcmV2aW91cyk9XCJ1cGRhdGVZZWFyKC0xMClcIiAocC1uZXh0KT1cInVwZGF0ZVllYXIoMTApXCI+XG4gICAgICB7eyBkaXNwbGF5U3RhcnREZWNhZGUgfX0gLSB7eyBkaXNwbGF5RmluYWxEZWNhZGUgfX1cbiAgICA8L3BvLWNhbGVuZGFyLWhlYWRlcj5cblxuICAgIDxkaXYgY2xhc3M9XCJwby1jYWxlbmRhci1jb250ZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicG8tY2FsZW5kYXItbGFiZWxzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwby1jYWxlbmRhci1sYWJlbFwiPlxuICAgICAgICAgIHt7IHllYXJMYWJlbCB9fVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwicG8tY2FsZW5kYXItY29udGVudC1saXN0LXllYXJcIj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICpuZ0Zvcj1cImxldCB5ZWFyIG9mIGRpc3BsYXlEZWNhZGU7IGxldCBpID0gaW5kZXhcIlxuICAgICAgICAgIGNsYXNzPVwicG8tY2FsZW5kYXIteWVhclwiXG4gICAgICAgICAgW25nQ2xhc3NdPVwiZ2V0QmFja2dyb3VuZENvbG9yKHllYXIsIGN1cnJlbnRZZWFyKVwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uU2VsZWN0WWVhcih5ZWFyLCBkaXNwbGF5TW9udGhOdW1iZXIpXCJcbiAgICAgICAgICBhdHRyLWNhbGVuZGFyXG4gICAgICAgID5cbiAgICAgICAgICA8c3BhbiBbbmdDbGFzc109XCJnZXRGb3JlZ3JvdW5kQ29sb3IoeWVhciwgY3VycmVudFllYXIpXCI+XG4gICAgICAgICAgICB7eyB5ZWFyIH19XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L25nLWNvbnRhaW5lcj5cblxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiIXJhbmdlXCI+XG4gICAgPGRpdiBjbGFzcz1cInBvLWNhbGVuZGFyLWZvb3RlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInBvLWNhbGVuZGFyLWZvb3Rlci10b2RheVwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgY2xhc3M9XCJwby1jYWxlbmRhci1mb290ZXItdG9kYXktYnV0dG9uXCJcbiAgICAgICAgICAoY2xpY2spPVwib25TZWxlY3REYXRlKHRvZGF5KVwiXG4gICAgICAgICAgW2Rpc2FibGVkXT1cImlzVG9kYXlVbmF2YWlsYWJsZSgpXCJcbiAgICAgICAgPlxuICAgICAgICAgIHt7IGRpc3BsYXlUb2RheSB9fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L25nLWNvbnRhaW5lcj5cbjwvZGl2PlxuIl19