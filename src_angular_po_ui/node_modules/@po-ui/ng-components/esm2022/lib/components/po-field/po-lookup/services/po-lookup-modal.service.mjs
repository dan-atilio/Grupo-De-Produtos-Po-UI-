import { Injectable, EventEmitter } from '@angular/core';
import { PoLookupModalComponent } from '../po-lookup-modal/po-lookup-modal.component';
import * as i0 from "@angular/core";
import * as i1 from "../../../../services/po-component-injector/po-component-injector.service";
/**
 * @docsPrivate
 *
 * Serviço responsável por controlar a abertura do componente Po Lookup Modal.
 */
export class PoLookupModalService {
    poComponentInjector;
    selectValueEvent = new EventEmitter();
    componentRef = null;
    constructor(poComponentInjector) {
        this.poComponentInjector = poComponentInjector;
    }
    /**
     * Método responsável por abrir a modal de busca das informações.
     *
     * @param advancedFilters {Array<PoDynamicFormField>} Objeto utilizado para criar o busca avançada.
     * @param service {PoLookupFilter} Serviço responsável por realizar a busca no serviço dos dados.
     * @param columns {Array<PoLookupColumn>} Definição das colunas na modal de busca.
     * @param filterParams {any} Valor que será repassado aos métodos do serviço para auxiliar no filtro dos dados.
     * @param title {string} Definição do título da modal.
     * @param literals {PoLookupLiterals} Literais utilizadas no componente.
     * @param selectedItems {any} Valor que está selecionado que será repassado para o modal para apresentar na tabela.
     * @param fieldLabel {string} Valor que será utilizado como descrição do campo.
     * @param fieldValue {string} Valor que será utilizado como valor do campo.
     * @param changeVisibleColumns {function} Função que será executada quando for alterada a visibilidade das colunas.
     * @param columnRestoreManager {function} Função que será executada quando for restaurar as colunas padrão.
     */
    openModal(params) {
        const { advancedFilters, service, columns, filterParams, hideColumnsManager, title, literals, infiniteScroll, multiple, selectedItems, fieldLabel, fieldValue, spacing, textWrap, changeVisibleColumns, columnRestoreManager } = params;
        this.componentRef = this.poComponentInjector.createComponentInApplication(PoLookupModalComponent);
        this.componentRef.instance.advancedFilters = advancedFilters;
        this.componentRef.instance.title = title;
        this.componentRef.instance.columns = columns;
        this.componentRef.instance.filterService = service;
        this.componentRef.instance.filterParams = filterParams;
        this.componentRef.instance.literals = literals;
        this.componentRef.instance.model.subscribe($event => {
            this.selectValue($event);
        });
        this.componentRef.instance.infiniteScroll = infiniteScroll;
        this.componentRef.instance.multiple = multiple;
        this.componentRef.instance.selectedItems = selectedItems;
        this.componentRef.instance.fieldLabel = fieldLabel;
        this.componentRef.instance.fieldValue = fieldValue;
        this.componentRef.instance.changeVisibleColumns = changeVisibleColumns;
        this.componentRef.instance.columnRestoreManager = columnRestoreManager;
        this.componentRef.instance.hideColumnsManager = hideColumnsManager;
        this.componentRef.instance.spacing = spacing;
        this.componentRef.instance.textWrap = textWrap;
        this.componentRef.changeDetectorRef.detectChanges();
        this.componentRef.instance.openModal();
    }
    setChangeColumns(columns) {
        if (this.componentRef !== null) {
            this.componentRef.instance.columns = columns;
            this.componentRef.changeDetectorRef.detectChanges();
        }
    }
    // Este metodo é chamado quando é selecionado um item na lookup modal.
    selectValue(value) {
        if (value) {
            this.selectValueEvent.emit(value);
        }
        this.componentRef.destroy();
    }
    static ɵfac = function PoLookupModalService_Factory(t) { return new (t || PoLookupModalService)(i0.ɵɵinject(i1.PoComponentInjectorService)); };
    static ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: PoLookupModalService, factory: PoLookupModalService.ɵfac });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoLookupModalService, [{
        type: Injectable
    }], () => [{ type: i1.PoComponentInjectorService }], null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbG9va3VwLW1vZGFsLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tZmllbGQvcG8tbG9va3VwL3NlcnZpY2VzL3BvLWxvb2t1cC1tb2RhbC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQWdCLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU92RSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQzs7O0FBRXRGOzs7O0dBSUc7QUFFSCxNQUFNLE9BQU8sb0JBQW9CO0lBS1g7SUFKcEIsZ0JBQWdCLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7SUFFdEQsWUFBWSxHQUFzQixJQUFJLENBQUM7SUFFL0MsWUFBb0IsbUJBQStDO1FBQS9DLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBNEI7SUFBRyxDQUFDO0lBRXZFOzs7Ozs7Ozs7Ozs7OztPQWNHO0lBQ0gsU0FBUyxDQUFDLE1BaUJUO1FBQ0MsTUFBTSxFQUNKLGVBQWUsRUFDZixPQUFPLEVBQ1AsT0FBTyxFQUNQLFlBQVksRUFDWixrQkFBa0IsRUFDbEIsS0FBSyxFQUNMLFFBQVEsRUFDUixjQUFjLEVBQ2QsUUFBUSxFQUNSLGFBQWEsRUFDYixVQUFVLEVBQ1YsVUFBVSxFQUNWLE9BQU8sRUFDUCxRQUFRLEVBQ1Isb0JBQW9CLEVBQ3BCLG9CQUFvQixFQUNyQixHQUFHLE1BQU0sQ0FBQztRQUVYLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLDRCQUE0QixDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDbEcsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUM3RCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDN0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQztRQUNuRCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEdBQUcsWUFBWSxDQUFDO1FBQ3ZELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDL0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNsRCxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztRQUMzRCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQy9DLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDekQsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUNuRCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQ25ELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLG9CQUFvQixDQUFDO1FBQ3ZFLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLG9CQUFvQixHQUFHLG9CQUFvQixDQUFDO1FBQ3ZFLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLGtCQUFrQixHQUFHLGtCQUFrQixDQUFDO1FBQ25FLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDN0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUMvQyxJQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3BELElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3pDLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxPQUFPO1FBQ3RCLElBQUksSUFBSSxDQUFDLFlBQVksS0FBSyxJQUFJLEVBQUU7WUFDOUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztZQUM3QyxJQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3JEO0lBQ0gsQ0FBQztJQUVELHNFQUFzRTtJQUN0RSxXQUFXLENBQUMsS0FBSztRQUNmLElBQUksS0FBSyxFQUFFO1lBQ1QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNuQztRQUNELElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDOUIsQ0FBQzs4RUFoR1Usb0JBQW9CO2dFQUFwQixvQkFBb0IsV0FBcEIsb0JBQW9COztpRkFBcEIsb0JBQW9CO2NBRGhDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBDb21wb25lbnRSZWYsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBQb0R5bmFtaWNGb3JtRmllbGQgfSBmcm9tICcuLy4uLy4uLy4uL3BvLWR5bmFtaWMvcG8tZHluYW1pYy1mb3JtL3BvLWR5bmFtaWMtZm9ybS1maWVsZC5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9Db21wb25lbnRJbmplY3RvclNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi8uLi9zZXJ2aWNlcy9wby1jb21wb25lbnQtaW5qZWN0b3IvcG8tY29tcG9uZW50LWluamVjdG9yLnNlcnZpY2UnO1xuaW1wb3J0IHsgUG9Mb29rdXBDb2x1bW4gfSBmcm9tICcuLi8uLi8uLi8uLi9jb21wb25lbnRzL3BvLWZpZWxkL3BvLWxvb2t1cC9pbnRlcmZhY2VzL3BvLWxvb2t1cC1jb2x1bW4uaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvTG9va3VwRmlsdGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29tcG9uZW50cy9wby1maWVsZC9wby1sb29rdXAvaW50ZXJmYWNlcy9wby1sb29rdXAtZmlsdGVyLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb0xvb2t1cExpdGVyYWxzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wby1sb29rdXAtbGl0ZXJhbHMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvTG9va3VwTW9kYWxDb21wb25lbnQgfSBmcm9tICcuLi9wby1sb29rdXAtbW9kYWwvcG8tbG9va3VwLW1vZGFsLmNvbXBvbmVudCc7XG5cbi8qKlxuICogQGRvY3NQcml2YXRlXG4gKlxuICogU2VydmnDp28gcmVzcG9uc8OhdmVsIHBvciBjb250cm9sYXIgYSBhYmVydHVyYSBkbyBjb21wb25lbnRlIFBvIExvb2t1cCBNb2RhbC5cbiAqL1xuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFBvTG9va3VwTW9kYWxTZXJ2aWNlIHtcbiAgc2VsZWN0VmFsdWVFdmVudDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBwcml2YXRlIGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmPGFueT4gPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcG9Db21wb25lbnRJbmplY3RvcjogUG9Db21wb25lbnRJbmplY3RvclNlcnZpY2UpIHt9XG5cbiAgLyoqXG4gICAqIE3DqXRvZG8gcmVzcG9uc8OhdmVsIHBvciBhYnJpciBhIG1vZGFsIGRlIGJ1c2NhIGRhcyBpbmZvcm1hw6fDtWVzLlxuICAgKlxuICAgKiBAcGFyYW0gYWR2YW5jZWRGaWx0ZXJzIHtBcnJheTxQb0R5bmFtaWNGb3JtRmllbGQ+fSBPYmpldG8gdXRpbGl6YWRvIHBhcmEgY3JpYXIgbyBidXNjYSBhdmFuw6dhZGEuXG4gICAqIEBwYXJhbSBzZXJ2aWNlIHtQb0xvb2t1cEZpbHRlcn0gU2VydmnDp28gcmVzcG9uc8OhdmVsIHBvciByZWFsaXphciBhIGJ1c2NhIG5vIHNlcnZpw6dvIGRvcyBkYWRvcy5cbiAgICogQHBhcmFtIGNvbHVtbnMge0FycmF5PFBvTG9va3VwQ29sdW1uPn0gRGVmaW5pw6fDo28gZGFzIGNvbHVuYXMgbmEgbW9kYWwgZGUgYnVzY2EuXG4gICAqIEBwYXJhbSBmaWx0ZXJQYXJhbXMge2FueX0gVmFsb3IgcXVlIHNlcsOhIHJlcGFzc2FkbyBhb3MgbcOpdG9kb3MgZG8gc2VydmnDp28gcGFyYSBhdXhpbGlhciBubyBmaWx0cm8gZG9zIGRhZG9zLlxuICAgKiBAcGFyYW0gdGl0bGUge3N0cmluZ30gRGVmaW5pw6fDo28gZG8gdMOtdHVsbyBkYSBtb2RhbC5cbiAgICogQHBhcmFtIGxpdGVyYWxzIHtQb0xvb2t1cExpdGVyYWxzfSBMaXRlcmFpcyB1dGlsaXphZGFzIG5vIGNvbXBvbmVudGUuXG4gICAqIEBwYXJhbSBzZWxlY3RlZEl0ZW1zIHthbnl9IFZhbG9yIHF1ZSBlc3TDoSBzZWxlY2lvbmFkbyBxdWUgc2Vyw6EgcmVwYXNzYWRvIHBhcmEgbyBtb2RhbCBwYXJhIGFwcmVzZW50YXIgbmEgdGFiZWxhLlxuICAgKiBAcGFyYW0gZmllbGRMYWJlbCB7c3RyaW5nfSBWYWxvciBxdWUgc2Vyw6EgdXRpbGl6YWRvIGNvbW8gZGVzY3Jpw6fDo28gZG8gY2FtcG8uXG4gICAqIEBwYXJhbSBmaWVsZFZhbHVlIHtzdHJpbmd9IFZhbG9yIHF1ZSBzZXLDoSB1dGlsaXphZG8gY29tbyB2YWxvciBkbyBjYW1wby5cbiAgICogQHBhcmFtIGNoYW5nZVZpc2libGVDb2x1bW5zIHtmdW5jdGlvbn0gRnVuw6fDo28gcXVlIHNlcsOhIGV4ZWN1dGFkYSBxdWFuZG8gZm9yIGFsdGVyYWRhIGEgdmlzaWJpbGlkYWRlIGRhcyBjb2x1bmFzLlxuICAgKiBAcGFyYW0gY29sdW1uUmVzdG9yZU1hbmFnZXIge2Z1bmN0aW9ufSBGdW7Dp8OjbyBxdWUgc2Vyw6EgZXhlY3V0YWRhIHF1YW5kbyBmb3IgcmVzdGF1cmFyIGFzIGNvbHVuYXMgcGFkcsOjby5cbiAgICovXG4gIG9wZW5Nb2RhbChwYXJhbXM6IHtcbiAgICBhZHZhbmNlZEZpbHRlcnM6IEFycmF5PFBvRHluYW1pY0Zvcm1GaWVsZD47XG4gICAgc2VydmljZTogUG9Mb29rdXBGaWx0ZXI7XG4gICAgY29sdW1uczogQXJyYXk8UG9Mb29rdXBDb2x1bW4+O1xuICAgIGZpbHRlclBhcmFtczogYW55O1xuICAgIGhpZGVDb2x1bW5zTWFuYWdlcjogYm9vbGVhbjtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGxpdGVyYWxzOiBQb0xvb2t1cExpdGVyYWxzO1xuICAgIGluZmluaXRlU2Nyb2xsOiBib29sZWFuO1xuICAgIG11bHRpcGxlOiBib29sZWFuO1xuICAgIHNlbGVjdGVkSXRlbXM6IEFycmF5PGFueT47XG4gICAgZmllbGRMYWJlbDogc3RyaW5nO1xuICAgIGZpZWxkVmFsdWU6IHN0cmluZztcbiAgICBzcGFjaW5nOiBzdHJpbmc7XG4gICAgdGV4dFdyYXA6IGJvb2xlYW47XG4gICAgY2hhbmdlVmlzaWJsZUNvbHVtbnM6IEZ1bmN0aW9uO1xuICAgIGNvbHVtblJlc3RvcmVNYW5hZ2VyOiBGdW5jdGlvbjtcbiAgfSk6IHZvaWQge1xuICAgIGNvbnN0IHtcbiAgICAgIGFkdmFuY2VkRmlsdGVycyxcbiAgICAgIHNlcnZpY2UsXG4gICAgICBjb2x1bW5zLFxuICAgICAgZmlsdGVyUGFyYW1zLFxuICAgICAgaGlkZUNvbHVtbnNNYW5hZ2VyLFxuICAgICAgdGl0bGUsXG4gICAgICBsaXRlcmFscyxcbiAgICAgIGluZmluaXRlU2Nyb2xsLFxuICAgICAgbXVsdGlwbGUsXG4gICAgICBzZWxlY3RlZEl0ZW1zLFxuICAgICAgZmllbGRMYWJlbCxcbiAgICAgIGZpZWxkVmFsdWUsXG4gICAgICBzcGFjaW5nLFxuICAgICAgdGV4dFdyYXAsXG4gICAgICBjaGFuZ2VWaXNpYmxlQ29sdW1ucyxcbiAgICAgIGNvbHVtblJlc3RvcmVNYW5hZ2VyXG4gICAgfSA9IHBhcmFtcztcblxuICAgIHRoaXMuY29tcG9uZW50UmVmID0gdGhpcy5wb0NvbXBvbmVudEluamVjdG9yLmNyZWF0ZUNvbXBvbmVudEluQXBwbGljYXRpb24oUG9Mb29rdXBNb2RhbENvbXBvbmVudCk7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuYWR2YW5jZWRGaWx0ZXJzID0gYWR2YW5jZWRGaWx0ZXJzO1xuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnRpdGxlID0gdGl0bGU7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuZmlsdGVyU2VydmljZSA9IHNlcnZpY2U7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuZmlsdGVyUGFyYW1zID0gZmlsdGVyUGFyYW1zO1xuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmxpdGVyYWxzID0gbGl0ZXJhbHM7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UubW9kZWwuc3Vic2NyaWJlKCRldmVudCA9PiB7XG4gICAgICB0aGlzLnNlbGVjdFZhbHVlKCRldmVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuaW5maW5pdGVTY3JvbGwgPSBpbmZpbml0ZVNjcm9sbDtcbiAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5tdWx0aXBsZSA9IG11bHRpcGxlO1xuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLnNlbGVjdGVkSXRlbXMgPSBzZWxlY3RlZEl0ZW1zO1xuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmZpZWxkTGFiZWwgPSBmaWVsZExhYmVsO1xuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmZpZWxkVmFsdWUgPSBmaWVsZFZhbHVlO1xuICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmNoYW5nZVZpc2libGVDb2x1bW5zID0gY2hhbmdlVmlzaWJsZUNvbHVtbnM7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UuY29sdW1uUmVzdG9yZU1hbmFnZXIgPSBjb2x1bW5SZXN0b3JlTWFuYWdlcjtcbiAgICB0aGlzLmNvbXBvbmVudFJlZi5pbnN0YW5jZS5oaWRlQ29sdW1uc01hbmFnZXIgPSBoaWRlQ29sdW1uc01hbmFnZXI7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uuc3BhY2luZyA9IHNwYWNpbmc7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2UudGV4dFdyYXAgPSB0ZXh0V3JhcDtcbiAgICB0aGlzLmNvbXBvbmVudFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgdGhpcy5jb21wb25lbnRSZWYuaW5zdGFuY2Uub3Blbk1vZGFsKCk7XG4gIH1cblxuICBzZXRDaGFuZ2VDb2x1bW5zKGNvbHVtbnMpIHtcbiAgICBpZiAodGhpcy5jb21wb25lbnRSZWYgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50UmVmLmluc3RhbmNlLmNvbHVtbnMgPSBjb2x1bW5zO1xuICAgICAgdGhpcy5jb21wb25lbnRSZWYuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEVzdGUgbWV0b2RvIMOpIGNoYW1hZG8gcXVhbmRvIMOpIHNlbGVjaW9uYWRvIHVtIGl0ZW0gbmEgbG9va3VwIG1vZGFsLlxuICBzZWxlY3RWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZWxlY3RWYWx1ZUV2ZW50LmVtaXQodmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLmNvbXBvbmVudFJlZi5kZXN0cm95KCk7XG4gIH1cbn1cbiJdfQ==