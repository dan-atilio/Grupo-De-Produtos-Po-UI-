import { PoUploadStatus } from './po-upload-status.enum';
// Classe responsável pelo arquivo do PO Upload
export class PoUploadFile {
    // Nome do arquivo.
    name;
    // Arquivo bruto.
    rawFile;
    // Status de envio do arquivo.
    status;
    // Identificador do arquivo.
    uid;
    // Extensão do arquivo.
    extension;
    // Tamanho do arquivo em bytes;
    size;
    // propriedade para auxiliar a exibição do texto no componente progress
    displayName;
    // porcentagem utilizada para repassar ao componente progress
    percent;
    constructor(file) {
        if (file) {
            this.name = file.name;
            this.displayName = `${file.name} - ${this.getFileSize(file.size)}`;
            this.extension = this.getExtension(file.name);
            this.size = file.size;
            this.rawFile = file;
            this.uid = this.generateUUID();
            this.status = PoUploadStatus.None;
        }
    }
    getExtension(value) {
        if (value) {
            const extension = value.substr(value.lastIndexOf('.'));
            return extension.toLowerCase();
        }
        return '';
    }
    generateUUID() {
        function s4() {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        }
        return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
    }
    // Retorna o tamanho do arquivo em KBytes.
    getFileSize(size) {
        let kbSize = 0;
        if (size) {
            kbSize = Math.ceil(size / 1024);
        }
        return `${kbSize} KB`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdXBsb2FkLWZpbGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tZmllbGQvcG8tdXBsb2FkL3BvLXVwbG9hZC1maWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUV6RCwrQ0FBK0M7QUFDL0MsTUFBTSxPQUFPLFlBQVk7SUFDdkIsbUJBQW1CO0lBQ1osSUFBSSxDQUFTO0lBQ3BCLGlCQUFpQjtJQUNWLE9BQU8sQ0FBTztJQUNyQiw4QkFBOEI7SUFDdkIsTUFBTSxDQUFrQjtJQUMvQiw0QkFBNEI7SUFDckIsR0FBRyxDQUFTO0lBQ25CLHVCQUF1QjtJQUNoQixTQUFTLENBQVM7SUFDekIsK0JBQStCO0lBQ3hCLElBQUksQ0FBUztJQUVwQix1RUFBdUU7SUFDdkUsV0FBVyxDQUFVO0lBRXJCLDZEQUE2RDtJQUM3RCxPQUFPLENBQVU7SUFFakIsWUFBWSxJQUFTO1FBQ25CLElBQUksSUFBSSxFQUFFO1lBQ1IsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxNQUFNLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDbkUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7WUFDcEIsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDL0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDO1NBQ25DO0lBQ0gsQ0FBQztJQUVPLFlBQVksQ0FBQyxLQUFhO1FBQ2hDLElBQUksS0FBSyxFQUFFO1lBQ1QsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdkQsT0FBTyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDaEM7UUFFRCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFFTyxZQUFZO1FBQ2xCLFNBQVMsRUFBRTtZQUNULE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUM7aUJBQzdDLFFBQVEsQ0FBQyxFQUFFLENBQUM7aUJBQ1osU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLENBQUM7UUFFRCxPQUFPLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUN2RixDQUFDO0lBRUQsMENBQTBDO0lBQ2xDLFdBQVcsQ0FBQyxJQUFZO1FBQzlCLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztRQUVmLElBQUksSUFBSSxFQUFFO1lBQ1IsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO1NBQ2pDO1FBRUQsT0FBTyxHQUFHLE1BQU0sS0FBSyxDQUFDO0lBQ3hCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvVXBsb2FkU3RhdHVzIH0gZnJvbSAnLi9wby11cGxvYWQtc3RhdHVzLmVudW0nO1xuXG4vLyBDbGFzc2UgcmVzcG9uc8OhdmVsIHBlbG8gYXJxdWl2byBkbyBQTyBVcGxvYWRcbmV4cG9ydCBjbGFzcyBQb1VwbG9hZEZpbGUge1xuICAvLyBOb21lIGRvIGFycXVpdm8uXG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIC8vIEFycXVpdm8gYnJ1dG8uXG4gIHB1YmxpYyByYXdGaWxlOiBGaWxlO1xuICAvLyBTdGF0dXMgZGUgZW52aW8gZG8gYXJxdWl2by5cbiAgcHVibGljIHN0YXR1cz86IFBvVXBsb2FkU3RhdHVzO1xuICAvLyBJZGVudGlmaWNhZG9yIGRvIGFycXVpdm8uXG4gIHB1YmxpYyB1aWQ6IHN0cmluZztcbiAgLy8gRXh0ZW5zw6NvIGRvIGFycXVpdm8uXG4gIHB1YmxpYyBleHRlbnNpb246IHN0cmluZztcbiAgLy8gVGFtYW5obyBkbyBhcnF1aXZvIGVtIGJ5dGVzO1xuICBwdWJsaWMgc2l6ZTogbnVtYmVyO1xuXG4gIC8vIHByb3ByaWVkYWRlIHBhcmEgYXV4aWxpYXIgYSBleGliacOnw6NvIGRvIHRleHRvIG5vIGNvbXBvbmVudGUgcHJvZ3Jlc3NcbiAgZGlzcGxheU5hbWU/OiBzdHJpbmc7XG5cbiAgLy8gcG9yY2VudGFnZW0gdXRpbGl6YWRhIHBhcmEgcmVwYXNzYXIgYW8gY29tcG9uZW50ZSBwcm9ncmVzc1xuICBwZXJjZW50PzogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGZpbGU6IGFueSkge1xuICAgIGlmIChmaWxlKSB7XG4gICAgICB0aGlzLm5hbWUgPSBmaWxlLm5hbWU7XG4gICAgICB0aGlzLmRpc3BsYXlOYW1lID0gYCR7ZmlsZS5uYW1lfSAtICR7dGhpcy5nZXRGaWxlU2l6ZShmaWxlLnNpemUpfWA7XG4gICAgICB0aGlzLmV4dGVuc2lvbiA9IHRoaXMuZ2V0RXh0ZW5zaW9uKGZpbGUubmFtZSk7XG4gICAgICB0aGlzLnNpemUgPSBmaWxlLnNpemU7XG4gICAgICB0aGlzLnJhd0ZpbGUgPSBmaWxlO1xuICAgICAgdGhpcy51aWQgPSB0aGlzLmdlbmVyYXRlVVVJRCgpO1xuICAgICAgdGhpcy5zdGF0dXMgPSBQb1VwbG9hZFN0YXR1cy5Ob25lO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0RXh0ZW5zaW9uKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IHZhbHVlLnN1YnN0cih2YWx1ZS5sYXN0SW5kZXhPZignLicpKTtcbiAgICAgIHJldHVybiBleHRlbnNpb24udG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlVVVJRCgpIHtcbiAgICBmdW5jdGlvbiBzNCgpIHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxuICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgIC5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHM0KCkgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xuICB9XG5cbiAgLy8gUmV0b3JuYSBvIHRhbWFuaG8gZG8gYXJxdWl2byBlbSBLQnl0ZXMuXG4gIHByaXZhdGUgZ2V0RmlsZVNpemUoc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBsZXQga2JTaXplID0gMDtcblxuICAgIGlmIChzaXplKSB7XG4gICAgICBrYlNpemUgPSBNYXRoLmNlaWwoc2l6ZSAvIDEwMjQpO1xuICAgIH1cblxuICAgIHJldHVybiBgJHtrYlNpemV9IEtCYDtcbiAgfVxufVxuIl19