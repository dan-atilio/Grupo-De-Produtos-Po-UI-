import { Component, EventEmitter, Input, Output, TemplateRef, ViewChild } from '@angular/core';
import { filter } from 'rxjs';
import { convertToBoolean } from '../../../utils/util';
import { PoTagType } from '../../po-tag';
import * as i0 from "@angular/core";
import * as i1 from "../services/po-accordion.service";
function PoAccordionItemComponent_ng_template_0_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵprojection(0);
} }
const _c0 = ["*"];
/**
 * @description
 *
 * Componente utilizado para renderizar os itens do `po-accordion`.
 *
 * O componente `po-accordion` já faz o controle de abertura e fechamento dos itens automaticamente,
 * mas caso houver a necessidade de abrir algum dos `po-accordion-item` via Typescript, pode ser feita da seguinte forma:
 *
 * ```
 * <po-accordion>
 *   <po-accordion-item p-label="PO Accordion 1" #item1>
 *      Accordion 1
 *   </po-accordion-item>
 *
 *   <po-accordion-item p-label="PO Accordion 2">
 *      Accordion 2
 *   </po-accordion-item>
 * </po-accordion>
 * ```
 *
 * e no typescript pode-se utilizar o `@ViewChild`:
 *
 * ```
 *  @ViewChild(PoAccordionItemComponent, { static: true }) item1: PoAccordionItemComponent;
 *
 *  ngAfterContentInit() {
 *    // ou utilizar o método collapse()
 *    this.item1.expand();
 *  }
 * ```
 */
export class PoAccordionItemComponent {
    accordionService;
    _type;
    /** Título do item. */
    label;
    /**
     * @optional
     *
     * @description
     *
     * Label da Tag.
     *
     */
    labelTag;
    /**
     * @optional
     *
     * @description
     *
     * Desabilita item.
     *
     * @default `false`
     */
    disabledItem = false;
    /**
     * @optional
     *
     * @description
     *
     * Define o tipo da *tag* caso ela esteja sendo exibida.
     *
     * Valores válidos:
     *  - `success`: cor verde utilizada para simbolizar sucesso ou êxito.
     *  - `warning`: cor amarela que representa aviso ou advertência.
     *  - `danger`: cor vermelha para erro ou aviso crítico.
     *  - `info`: cor cinza escuro que caracteriza conteúdo informativo.
     *
     *
     * @default `info`
     */
    set typeTag(value) {
        this._type = Object.values(PoTagType).includes(value) ? value : undefined;
    }
    get typeTag() {
        return this._type;
    }
    /** Evento disparado ao expandir o item, seja manualmente ou programaticamente. */
    expandEvent = new EventEmitter();
    /** Evento disparado ao retrair o item, seja manualmente ou programaticamente. */
    collapseEvent = new EventEmitter();
    templateRef;
    expanded;
    expandSubscription;
    collapseSubscription;
    constructor(accordionService) {
        this.accordionService = accordionService;
        this.expandSubscription = this.accordionService
            .receiveFromChildAccordionClicked()
            .pipe(filter(poAccordionItem => poAccordionItem === this && poAccordionItem.expanded))
            .subscribe(() => {
            this.expandEvent.emit();
        });
        this.collapseSubscription = this.accordionService
            .receiveFromChildAccordionClicked()
            .pipe(filter(poAccordionItem => poAccordionItem === this && !poAccordionItem.expanded))
            .subscribe(() => {
            this.collapseEvent.emit();
        });
    }
    ngOnDestroy() {
        this.expandSubscription.unsubscribe();
        this.collapseSubscription.unsubscribe();
    }
    /**
     * Método para colapsar o `po-accordion-item`.
     */
    collapse() {
        if (!this.disabledItem) {
            this.expanded = false;
            this.accordionService.sendToParentAccordionItemClicked(this);
        }
    }
    /**
     * Método para expandir o `po-accordion-item`.
     */
    expand() {
        if (!this.disabledItem) {
            this.expanded = true;
            this.accordionService.sendToParentAccordionItemClicked(this);
        }
    }
    static ɵfac = function PoAccordionItemComponent_Factory(t) { return new (t || PoAccordionItemComponent)(i0.ɵɵdirectiveInject(i1.PoAccordionService)); };
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoAccordionItemComponent, selectors: [["po-accordion-item"]], viewQuery: function PoAccordionItemComponent_Query(rf, ctx) { if (rf & 1) {
            i0.ɵɵviewQuery(TemplateRef, 7);
        } if (rf & 2) {
            let _t;
            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.templateRef = _t.first);
        } }, inputs: { label: [i0.ɵɵInputFlags.None, "p-label", "label"], labelTag: [i0.ɵɵInputFlags.None, "p-label-tag", "labelTag"], disabledItem: [i0.ɵɵInputFlags.HasDecoratorInputTransform, "p-disabled", "disabledItem", convertToBoolean], typeTag: [i0.ɵɵInputFlags.None, "p-type-tag", "typeTag"] }, outputs: { expandEvent: "p-expand", collapseEvent: "p-collapse" }, features: [i0.ɵɵInputTransformsFeature], ngContentSelectors: _c0, decls: 1, vars: 0, template: function PoAccordionItemComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵprojectionDef();
            i0.ɵɵtemplate(0, PoAccordionItemComponent_ng_template_0_Template, 1, 0, "ng-template");
        } }, encapsulation: 2 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoAccordionItemComponent, [{
        type: Component,
        args: [{ selector: 'po-accordion-item', template: "<ng-template>\n  <ng-content></ng-content>\n</ng-template>\n" }]
    }], () => [{ type: i1.PoAccordionService }], { label: [{
            type: Input,
            args: ['p-label']
        }], labelTag: [{
            type: Input,
            args: ['p-label-tag']
        }], disabledItem: [{
            type: Input,
            args: [{ alias: 'p-disabled', transform: convertToBoolean }]
        }], typeTag: [{
            type: Input,
            args: ['p-type-tag']
        }], expandEvent: [{
            type: Output,
            args: ['p-expand']
        }], collapseEvent: [{
            type: Output,
            args: ['p-collapse']
        }], templateRef: [{
            type: ViewChild,
            args: [TemplateRef, { static: true }]
        }] }); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoAccordionItemComponent, { className: "PoAccordionItemComponent", filePath: "lib/components/po-accordion/po-accordion-item/po-accordion-item.component.ts", lineNumber: 43 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tYWNjb3JkaW9uLWl0ZW0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9jb21wb25lbnRzL3BvLWFjY29yZGlvbi9wby1hY2NvcmRpb24taXRlbS9wby1hY2NvcmRpb24taXRlbS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tYWNjb3JkaW9uL3BvLWFjY29yZGlvbi1pdGVtL3BvLWFjY29yZGlvbi1pdGVtLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBYSxNQUFNLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMxRyxPQUFPLEVBQWdCLE1BQU0sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUU1QyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFDOzs7O0lDSHZDLGtCQUF5Qjs7O0FETTNCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0E4Qkc7QUFLSCxNQUFNLE9BQU8sd0JBQXdCO0lBZ0VmO0lBL0RaLEtBQUssQ0FBYTtJQUUxQixzQkFBc0I7SUFDSixLQUFLLENBQVM7SUFFaEM7Ozs7Ozs7T0FPRztJQUNtQixRQUFRLENBQVM7SUFFdkM7Ozs7Ozs7O09BUUc7SUFDMEQsWUFBWSxHQUFZLEtBQUssQ0FBQztJQUUzRjs7Ozs7Ozs7Ozs7Ozs7O09BZUc7SUFDSCxJQUF5QixPQUFPLENBQUMsS0FBZ0I7UUFDL0MsSUFBSSxDQUFDLEtBQUssR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDbkYsQ0FBQztJQUVELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBRUQsa0ZBQWtGO0lBQzlELFdBQVcsR0FBRyxJQUFJLFlBQVksRUFBUSxDQUFDO0lBRTNELGlGQUFpRjtJQUMzRCxhQUFhLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztJQUVyQixXQUFXLENBQW1CO0lBRXhFLFFBQVEsQ0FBVTtJQUVWLGtCQUFrQixDQUFlO0lBQ2pDLG9CQUFvQixDQUFlO0lBRTNDLFlBQW9CLGdCQUFvQztRQUFwQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQW9CO1FBQ3RELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsZ0JBQWdCO2FBQzVDLGdDQUFnQyxFQUFFO2FBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxlQUFlLEtBQUssSUFBSSxJQUFJLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUNyRixTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ2QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMxQixDQUFDLENBQUMsQ0FBQztRQUVMLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsZ0JBQWdCO2FBQzlDLGdDQUFnQyxFQUFFO2FBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQyxlQUFlLEtBQUssSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ3RGLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDZCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzVCLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDdEMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzFDLENBQUM7SUFFRDs7T0FFRztJQUNILFFBQVE7UUFDTixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRTtZQUN0QixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztZQUV0QixJQUFJLENBQUMsZ0JBQWdCLENBQUMsZ0NBQWdDLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDOUQ7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNO1FBQ0osSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7WUFFckIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGdDQUFnQyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlEO0lBQ0gsQ0FBQztrRkF6R1Usd0JBQXdCOzZEQUF4Qix3QkFBd0I7MkJBeUR4QixXQUFXOzs7O2dPQWhDbUIsZ0JBQWdCOztZQ25FM0Qsc0ZBRWM7OztpRkR3Q0Qsd0JBQXdCO2NBSnBDLFNBQVM7MkJBQ0UsbUJBQW1CO21EQU9YLEtBQUs7a0JBQXRCLEtBQUs7bUJBQUMsU0FBUztZQVVNLFFBQVE7a0JBQTdCLEtBQUs7bUJBQUMsYUFBYTtZQVd5QyxZQUFZO2tCQUF4RSxLQUFLO21CQUFDLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUU7WUFrQmxDLE9BQU87a0JBQS9CLEtBQUs7bUJBQUMsWUFBWTtZQVNDLFdBQVc7a0JBQTlCLE1BQU07bUJBQUMsVUFBVTtZQUdJLGFBQWE7a0JBQWxDLE1BQU07bUJBQUMsWUFBWTtZQUVzQixXQUFXO2tCQUFwRCxTQUFTO21CQUFDLFdBQVcsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7O2tGQXpEN0Isd0JBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkRlc3Ryb3ksIE91dHB1dCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBmaWx0ZXIgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWwnO1xuaW1wb3J0IHsgUG9UYWdUeXBlIH0gZnJvbSAnLi4vLi4vcG8tdGFnJztcbmltcG9ydCB7IFBvQWNjb3JkaW9uU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3BvLWFjY29yZGlvbi5zZXJ2aWNlJztcblxuLyoqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb21wb25lbnRlIHV0aWxpemFkbyBwYXJhIHJlbmRlcml6YXIgb3MgaXRlbnMgZG8gYHBvLWFjY29yZGlvbmAuXG4gKlxuICogTyBjb21wb25lbnRlIGBwby1hY2NvcmRpb25gIGrDoSBmYXogbyBjb250cm9sZSBkZSBhYmVydHVyYSBlIGZlY2hhbWVudG8gZG9zIGl0ZW5zIGF1dG9tYXRpY2FtZW50ZSxcbiAqIG1hcyBjYXNvIGhvdXZlciBhIG5lY2Vzc2lkYWRlIGRlIGFicmlyIGFsZ3VtIGRvcyBgcG8tYWNjb3JkaW9uLWl0ZW1gIHZpYSBUeXBlc2NyaXB0LCBwb2RlIHNlciBmZWl0YSBkYSBzZWd1aW50ZSBmb3JtYTpcbiAqXG4gKiBgYGBcbiAqIDxwby1hY2NvcmRpb24+XG4gKiAgIDxwby1hY2NvcmRpb24taXRlbSBwLWxhYmVsPVwiUE8gQWNjb3JkaW9uIDFcIiAjaXRlbTE+XG4gKiAgICAgIEFjY29yZGlvbiAxXG4gKiAgIDwvcG8tYWNjb3JkaW9uLWl0ZW0+XG4gKlxuICogICA8cG8tYWNjb3JkaW9uLWl0ZW0gcC1sYWJlbD1cIlBPIEFjY29yZGlvbiAyXCI+XG4gKiAgICAgIEFjY29yZGlvbiAyXG4gKiAgIDwvcG8tYWNjb3JkaW9uLWl0ZW0+XG4gKiA8L3BvLWFjY29yZGlvbj5cbiAqIGBgYFxuICpcbiAqIGUgbm8gdHlwZXNjcmlwdCBwb2RlLXNlIHV0aWxpemFyIG8gYEBWaWV3Q2hpbGRgOlxuICpcbiAqIGBgYFxuICogIEBWaWV3Q2hpbGQoUG9BY2NvcmRpb25JdGVtQ29tcG9uZW50LCB7IHN0YXRpYzogdHJ1ZSB9KSBpdGVtMTogUG9BY2NvcmRpb25JdGVtQ29tcG9uZW50O1xuICpcbiAqICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gKiAgICAvLyBvdSB1dGlsaXphciBvIG3DqXRvZG8gY29sbGFwc2UoKVxuICogICAgdGhpcy5pdGVtMS5leHBhbmQoKTtcbiAqICB9XG4gKiBgYGBcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncG8tYWNjb3JkaW9uLWl0ZW0nLFxuICB0ZW1wbGF0ZVVybDogJ3BvLWFjY29yZGlvbi1pdGVtLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBQb0FjY29yZGlvbkl0ZW1Db21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xuICBwcml2YXRlIF90eXBlPzogUG9UYWdUeXBlO1xuXG4gIC8qKiBUw610dWxvIGRvIGl0ZW0uICovXG4gIEBJbnB1dCgncC1sYWJlbCcpIGxhYmVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogTGFiZWwgZGEgVGFnLlxuICAgKlxuICAgKi9cbiAgQElucHV0KCdwLWxhYmVsLXRhZycpIGxhYmVsVGFnOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVzYWJpbGl0YSBpdGVtLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqL1xuICBASW5wdXQoeyBhbGlhczogJ3AtZGlzYWJsZWQnLCB0cmFuc2Zvcm06IGNvbnZlcnRUb0Jvb2xlYW4gfSkgZGlzYWJsZWRJdGVtOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIG8gdGlwbyBkYSAqdGFnKiBjYXNvIGVsYSBlc3RlamEgc2VuZG8gZXhpYmlkYS5cbiAgICpcbiAgICogVmFsb3JlcyB2w6FsaWRvczpcbiAgICogIC0gYHN1Y2Nlc3NgOiBjb3IgdmVyZGUgdXRpbGl6YWRhIHBhcmEgc2ltYm9saXphciBzdWNlc3NvIG91IMOqeGl0by5cbiAgICogIC0gYHdhcm5pbmdgOiBjb3IgYW1hcmVsYSBxdWUgcmVwcmVzZW50YSBhdmlzbyBvdSBhZHZlcnTDqm5jaWEuXG4gICAqICAtIGBkYW5nZXJgOiBjb3IgdmVybWVsaGEgcGFyYSBlcnJvIG91IGF2aXNvIGNyw610aWNvLlxuICAgKiAgLSBgaW5mb2A6IGNvciBjaW56YSBlc2N1cm8gcXVlIGNhcmFjdGVyaXphIGNvbnRlw7pkbyBpbmZvcm1hdGl2by5cbiAgICpcbiAgICpcbiAgICogQGRlZmF1bHQgYGluZm9gXG4gICAqL1xuICBASW5wdXQoJ3AtdHlwZS10YWcnKSBzZXQgdHlwZVRhZyh2YWx1ZTogUG9UYWdUeXBlKSB7XG4gICAgdGhpcy5fdHlwZSA9ICg8YW55Pk9iamVjdCkudmFsdWVzKFBvVGFnVHlwZSkuaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBnZXQgdHlwZVRhZygpOiBQb1RhZ1R5cGUge1xuICAgIHJldHVybiB0aGlzLl90eXBlO1xuICB9XG5cbiAgLyoqIEV2ZW50byBkaXNwYXJhZG8gYW8gZXhwYW5kaXIgbyBpdGVtLCBzZWphIG1hbnVhbG1lbnRlIG91IHByb2dyYW1hdGljYW1lbnRlLiAqL1xuICBAT3V0cHV0KCdwLWV4cGFuZCcpIGV4cGFuZEV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIC8qKiBFdmVudG8gZGlzcGFyYWRvIGFvIHJldHJhaXIgbyBpdGVtLCBzZWphIG1hbnVhbG1lbnRlIG91IHByb2dyYW1hdGljYW1lbnRlLiAqL1xuICBAT3V0cHV0KCdwLWNvbGxhcHNlJykgY29sbGFwc2VFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBAVmlld0NoaWxkKFRlbXBsYXRlUmVmLCB7IHN0YXRpYzogdHJ1ZSB9KSB0ZW1wbGF0ZVJlZjogVGVtcGxhdGVSZWY8YW55PjtcblxuICBleHBhbmRlZDogYm9vbGVhbjtcblxuICBwcml2YXRlIGV4cGFuZFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuICBwcml2YXRlIGNvbGxhcHNlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhY2NvcmRpb25TZXJ2aWNlOiBQb0FjY29yZGlvblNlcnZpY2UpIHtcbiAgICB0aGlzLmV4cGFuZFN1YnNjcmlwdGlvbiA9IHRoaXMuYWNjb3JkaW9uU2VydmljZVxuICAgICAgLnJlY2VpdmVGcm9tQ2hpbGRBY2NvcmRpb25DbGlja2VkKClcbiAgICAgIC5waXBlKGZpbHRlcihwb0FjY29yZGlvbkl0ZW0gPT4gcG9BY2NvcmRpb25JdGVtID09PSB0aGlzICYmIHBvQWNjb3JkaW9uSXRlbS5leHBhbmRlZCkpXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgdGhpcy5leHBhbmRFdmVudC5lbWl0KCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuY29sbGFwc2VTdWJzY3JpcHRpb24gPSB0aGlzLmFjY29yZGlvblNlcnZpY2VcbiAgICAgIC5yZWNlaXZlRnJvbUNoaWxkQWNjb3JkaW9uQ2xpY2tlZCgpXG4gICAgICAucGlwZShmaWx0ZXIocG9BY2NvcmRpb25JdGVtID0+IHBvQWNjb3JkaW9uSXRlbSA9PT0gdGhpcyAmJiAhcG9BY2NvcmRpb25JdGVtLmV4cGFuZGVkKSlcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICB0aGlzLmNvbGxhcHNlRXZlbnQuZW1pdCgpO1xuICAgICAgfSk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmV4cGFuZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIHRoaXMuY29sbGFwc2VTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNw6l0b2RvIHBhcmEgY29sYXBzYXIgbyBgcG8tYWNjb3JkaW9uLWl0ZW1gLlxuICAgKi9cbiAgY29sbGFwc2UoKSB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkSXRlbSkge1xuICAgICAgdGhpcy5leHBhbmRlZCA9IGZhbHNlO1xuXG4gICAgICB0aGlzLmFjY29yZGlvblNlcnZpY2Uuc2VuZFRvUGFyZW50QWNjb3JkaW9uSXRlbUNsaWNrZWQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE3DqXRvZG8gcGFyYSBleHBhbmRpciBvIGBwby1hY2NvcmRpb24taXRlbWAuXG4gICAqL1xuICBleHBhbmQoKSB7XG4gICAgaWYgKCF0aGlzLmRpc2FibGVkSXRlbSkge1xuICAgICAgdGhpcy5leHBhbmRlZCA9IHRydWU7XG5cbiAgICAgIHRoaXMuYWNjb3JkaW9uU2VydmljZS5zZW5kVG9QYXJlbnRBY2NvcmRpb25JdGVtQ2xpY2tlZCh0aGlzKTtcbiAgICB9XG4gIH1cbn1cbiIsIjxuZy10ZW1wbGF0ZT5cbiAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==