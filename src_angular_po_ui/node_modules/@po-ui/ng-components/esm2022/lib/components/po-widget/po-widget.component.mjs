import { Component } from '@angular/core';
import { PoWidgetBaseComponent } from './po-widget-base.component';
import { PoKeyCodeEnum } from './../../enums/po-key-code.enum';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../po-container/po-container.component";
import * as i3 from "../po-icon/po-icon.component";
function PoWidgetComponent_div_1_span_1_Template(rf, ctx) { if (rf & 1) {
    const _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "span", 9);
    i0.ɵɵlistener("click", function PoWidgetComponent_div_1_span_1_Template_span_click_0_listener($event) { i0.ɵɵrestoreView(_r7); const ctx_r6 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r6.runTitleAction($event)); });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r2.title, " ");
} }
function PoWidgetComponent_div_1_ng_template_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵtext(0);
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵtextInterpolate(ctx_r3.title);
} }
function PoWidgetComponent_div_1_div_4_po_icon_1_Template(rf, ctx) { if (rf & 1) {
    const _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "po-icon", 13);
    i0.ɵɵlistener("click", function PoWidgetComponent_div_1_div_4_po_icon_1_Template_po_icon_click_0_listener($event) { i0.ɵɵrestoreView(_r11); const ctx_r10 = i0.ɵɵnextContext(3); return i0.ɵɵresetView(ctx_r10.settingOutput($event)); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r8 = i0.ɵɵnextContext(3);
    i0.ɵɵpropertyInterpolate1("id", "settingAction-", ctx_r8.id, "");
} }
function PoWidgetComponent_div_1_div_4_po_icon_2_Template(rf, ctx) { if (rf & 1) {
    const _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "po-icon", 14);
    i0.ɵɵlistener("click", function PoWidgetComponent_div_1_div_4_po_icon_2_Template_po_icon_click_0_listener($event) { i0.ɵɵrestoreView(_r13); const ctx_r12 = i0.ɵɵnextContext(3); return i0.ɵɵresetView(ctx_r12.openHelp($event)); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r9 = i0.ɵɵnextContext(3);
    i0.ɵɵpropertyInterpolate1("id", "helpLink-", ctx_r9.id, "");
} }
function PoWidgetComponent_div_1_div_4_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 10);
    i0.ɵɵtemplate(1, PoWidgetComponent_div_1_div_4_po_icon_1_Template, 1, 1, "po-icon", 11)(2, PoWidgetComponent_div_1_div_4_po_icon_2_Template, 1, 1, "po-icon", 12);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r5 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r5.setting.observers[0]);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r5.help);
} }
function PoWidgetComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 5);
    i0.ɵɵtemplate(1, PoWidgetComponent_div_1_span_1_Template, 2, 1, "span", 6)(2, PoWidgetComponent_div_1_ng_template_2_Template, 1, 1, "ng-template", null, 7, i0.ɵɵtemplateRefExtractor)(4, PoWidgetComponent_div_1_div_4_Template, 3, 2, "div", 8);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const _r4 = i0.ɵɵreference(3);
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.showTitleAction)("ngIfElse", _r4);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r0.setting.observers[0] || ctx_r0.help);
} }
function PoWidgetComponent_div_5_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r18 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 18)(1, "a", 19);
    i0.ɵɵlistener("click", function PoWidgetComponent_div_5_div_1_Template_a_click_1_listener($event) { i0.ɵɵrestoreView(_r18); const ctx_r17 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r17.runPrimaryAction($event)); });
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r14 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵpropertyInterpolate1("id", "primaryAct-", ctx_r14.id, "");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r14.primaryLabel);
} }
function PoWidgetComponent_div_5_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r20 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20)(1, "a", 19);
    i0.ɵɵlistener("click", function PoWidgetComponent_div_5_div_2_Template_a_click_1_listener($event) { i0.ɵɵrestoreView(_r20); const ctx_r19 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r19.runPrimaryAction($event)); });
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r15 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵpropertyInterpolate1("id", "primaryAct-", ctx_r15.id, "");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r15.primaryLabel);
} }
function PoWidgetComponent_div_5_div_3_Template(rf, ctx) { if (rf & 1) {
    const _r22 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20)(1, "a", 19);
    i0.ɵɵlistener("click", function PoWidgetComponent_div_5_div_3_Template_a_click_1_listener($event) { i0.ɵɵrestoreView(_r22); const ctx_r21 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r21.runSecondaryAction($event)); });
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r16 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵpropertyInterpolate1("id", "secondaryAct-", ctx_r16.id, "");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r16.secondaryLabel);
} }
function PoWidgetComponent_div_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15);
    i0.ɵɵtemplate(1, PoWidgetComponent_div_5_div_1_Template, 3, 2, "div", 16)(2, PoWidgetComponent_div_5_div_2_Template, 3, 2, "div", 17)(3, PoWidgetComponent_div_5_div_3_Template, 3, 2, "div", 17);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.secondaryLabel);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.secondaryLabel);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.secondaryLabel);
} }
const _c0 = ["*"];
/**
 * @docsExtends PoWidgetBaseComponent
 *
 * @example
 *
 * <example name="po-widget-basic" title="PO Widget Basic">
 *  <file name="sample-po-widget-basic/sample-po-widget-basic.component.html"> </file>
 *  <file name="sample-po-widget-basic/sample-po-widget-basic.component.ts"> </file>
 * </example>
 *
 * <example name="po-widget-labs" title="PO Widget Labs">
 *  <file name="sample-po-widget-labs/sample-po-widget-labs.component.html"> </file>
 *  <file name="sample-po-widget-labs/sample-po-widget-labs.component.ts"> </file>
 * </example>
 *
 * <example name="po-widget-finance-dashboard" title="PO Widget - Finance dashboard">
 *  <file name="sample-po-widget-finance-dashboard/sample-po-widget-finance-dashboard.component.html"> </file>
 *  <file name="sample-po-widget-finance-dashboard/sample-po-widget-finance-dashboard.component.ts"> </file>
 * </example>
 *
 * <example name="po-widget-card" title="PO Widget - Card">
 *  <file name="sample-po-widget-card/sample-po-widget-card.component.html"> </file>
 *  <file name="sample-po-widget-card/sample-po-widget-card.component.ts"> </file>
 * </example>
 *
 */
export class PoWidgetComponent extends PoWidgetBaseComponent {
    get showTitleAction() {
        return !!this.titleAction.observers[0];
    }
    constructor(viewRef) {
        super();
    }
    ngOnInit() {
        this.setHeight(this.height);
    }
    hasTitleHelpOrSetting() {
        return !!this.title || !!this.help || !!this.setting.observers[0];
    }
    onClick(event) {
        if (this.click.observed && !this.disabled) {
            this.click.emit(event);
        }
    }
    onKeyDown(event) {
        if (this.click.observed &&
            !this.disabled &&
            (event.which === PoKeyCodeEnum.space || event.keyCode === PoKeyCodeEnum.space)) {
            this.click.emit(event);
            event.preventDefault();
        }
    }
    openHelp(event) {
        if (!this.disabled) {
            event.stopPropagation();
            window.open(this.help, '_blank');
        }
    }
    runPrimaryAction(event) {
        if (!this.disabled) {
            event.stopPropagation();
            this.primaryAction.emit();
        }
    }
    runSecondaryAction(event) {
        if (!this.disabled) {
            event.stopPropagation();
            this.secondaryAction.emit();
        }
    }
    runTitleAction(event) {
        if (!this.disabled) {
            event.stopPropagation();
            this.titleAction.emit();
        }
    }
    setHeight(height) {
        if (height) {
            let bodyHeight = height;
            const hasSettingOrHelp = this.setting.observers.length > 0 || this.help;
            const footerBorder = 1;
            const footerHeight = 40;
            const settingHeight = 37;
            const shadowHeight = 2;
            const titleHeight = 50;
            if (this.noShadow) {
                bodyHeight -= shadowHeight;
            }
            if (hasSettingOrHelp && !this.title) {
                bodyHeight -= settingHeight;
            }
            if (this.title) {
                bodyHeight -= titleHeight;
            }
            if (this.primaryLabel) {
                bodyHeight -= footerHeight + footerBorder;
            }
            this.containerHeight = `${bodyHeight}px`;
        }
        else {
            this.containerHeight = `auto`;
        }
    }
    settingOutput(event) {
        if (!this.disabled) {
            event.stopPropagation();
            this.setting.emit();
        }
    }
    static ɵfac = function PoWidgetComponent_Factory(t) { return new (t || PoWidgetComponent)(i0.ɵɵdirectiveInject(i0.ViewContainerRef)); };
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoWidgetComponent, selectors: [["po-widget"]], features: [i0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c0, decls: 6, vars: 16, consts: [[3, "tabindex", "click", "keydown"], ["class", "po-widget-header", 4, "ngIf"], ["p-no-border", "", 3, "p-height"], [1, "po-widget-body"], ["class", "po-widget-footer", 4, "ngIf"], [1, "po-widget-header"], ["class", "po-widget-title-action", 3, "click", 4, "ngIf", "ngIfElse"], ["noTitleAction", ""], ["class", "po-pull-right", 4, "ngIf"], [1, "po-widget-title-action", 3, "click"], [1, "po-pull-right"], ["p-icon", "ICON_SETTINGS", "class", "po-clickable", 3, "id", "click", 4, "ngIf"], ["p-icon", "ICON_HELP", "class", "po-clickable", 3, "id", "click", 4, "ngIf"], ["p-icon", "ICON_SETTINGS", 1, "po-clickable", 3, "id", "click"], ["p-icon", "ICON_HELP", 1, "po-clickable", 3, "id", "click"], [1, "po-widget-footer"], ["class", "po-widget-xl", 4, "ngIf"], ["class", "po-widget-md", 4, "ngIf"], [1, "po-widget-xl"], [1, "po-widget-action", 3, "id", "click"], [1, "po-widget-md"]], template: function PoWidgetComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵprojectionDef();
            i0.ɵɵelementStart(0, "div", 0);
            i0.ɵɵlistener("click", function PoWidgetComponent_Template_div_click_0_listener($event) { return ctx.onClick($event); })("keydown", function PoWidgetComponent_Template_div_keydown_0_listener($event) { return ctx.onKeyDown($event); });
            i0.ɵɵtemplate(1, PoWidgetComponent_div_1_Template, 5, 3, "div", 1);
            i0.ɵɵelementStart(2, "po-container", 2)(3, "div", 3);
            i0.ɵɵprojection(4);
            i0.ɵɵelementEnd()();
            i0.ɵɵtemplate(5, PoWidgetComponent_div_5_Template, 4, 3, "div", 4);
            i0.ɵɵelementEnd();
        } if (rf & 2) {
            i0.ɵɵstyleProp("background-image", ctx.background ? "url(" + ctx.background + ")" : undefined);
            i0.ɵɵclassProp("po-clickable", ctx.click.observers.length)("po-widget", !ctx.primary)("po-widget-disabled", ctx.disabled)("po-widget-primary", ctx.primary)("po-widget-no-shadow", ctx.click.observers.length && ctx.noShadow);
            i0.ɵɵproperty("tabindex", ctx.disabled || !ctx.click.observers.length ? -1 : 0);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.hasTitleHelpOrSetting());
            i0.ɵɵadvance();
            i0.ɵɵproperty("p-height", ctx.containerHeight);
            i0.ɵɵadvance(3);
            i0.ɵɵproperty("ngIf", ctx.primaryLabel);
        } }, dependencies: [i1.NgIf, i2.PoContainerComponent, i3.PoIconComponent], encapsulation: 2 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoWidgetComponent, [{
        type: Component,
        args: [{ selector: 'po-widget', template: "<div\n  [class.po-clickable]=\"click.observers.length\"\n  [class.po-widget]=\"!primary\"\n  [class.po-widget-disabled]=\"disabled\"\n  [class.po-widget-primary]=\"primary\"\n  [class.po-widget-no-shadow]=\"click.observers.length && noShadow\"\n  [style.background-image]=\"background ? 'url(' + background + ')' : undefined\"\n  (click)=\"onClick($event)\"\n  (keydown)=\"onKeyDown($event)\"\n  [tabindex]=\"disabled || !click.observers.length ? -1 : 0\"\n>\n  <div *ngIf=\"hasTitleHelpOrSetting()\" class=\"po-widget-header\">\n    <span *ngIf=\"showTitleAction; else noTitleAction\" class=\"po-widget-title-action\" (click)=\"runTitleAction($event)\">\n      {{ title }}\n    </span>\n    <ng-template #noTitleAction>{{ title }}</ng-template>\n\n    <div *ngIf=\"setting.observers[0] || help\" class=\"po-pull-right\">\n      <po-icon\n        id=\"settingAction-{{ id }}\"\n        *ngIf=\"setting.observers[0]\"\n        p-icon=\"ICON_SETTINGS\"\n        class=\"po-clickable\"\n        (click)=\"settingOutput($event)\"\n      >\n      </po-icon>\n      <po-icon id=\"helpLink-{{ id }}\" *ngIf=\"help\" p-icon=\"ICON_HELP\" (click)=\"openHelp($event)\" class=\"po-clickable\">\n      </po-icon>\n    </div>\n  </div>\n\n  <po-container p-no-border [p-height]=\"containerHeight\">\n    <div class=\"po-widget-body\">\n      <ng-content></ng-content>\n    </div>\n  </po-container>\n\n  <div *ngIf=\"primaryLabel\" class=\"po-widget-footer\">\n    <div class=\"po-widget-xl\" *ngIf=\"!secondaryLabel\">\n      <a class=\"po-widget-action\" id=\"primaryAct-{{ id }}\" (click)=\"runPrimaryAction($event)\">{{ primaryLabel }}</a>\n    </div>\n\n    <div class=\"po-widget-md\" *ngIf=\"secondaryLabel\">\n      <a class=\"po-widget-action\" id=\"primaryAct-{{ id }}\" (click)=\"runPrimaryAction($event)\">{{ primaryLabel }}</a>\n    </div>\n    <div class=\"po-widget-md\" *ngIf=\"secondaryLabel\">\n      <a class=\"po-widget-action\" id=\"secondaryAct-{{ id }}\" (click)=\"runSecondaryAction($event)\">{{\n        secondaryLabel\n      }}</a>\n    </div>\n  </div>\n</div>\n" }]
    }], () => [{ type: i0.ViewContainerRef }], null); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoWidgetComponent, { className: "PoWidgetComponent", filePath: "lib/components/po-widget/po-widget.component.ts", lineNumber: 36 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8td2lkZ2V0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby13aWRnZXQvcG8td2lkZ2V0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby13aWRnZXQvcG8td2lkZ2V0LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQTRCLE1BQU0sZUFBZSxDQUFDO0FBRXBFLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ25FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQzs7Ozs7OztJQ1MzRCwrQkFBa0g7SUFBakMsMEtBQVMsZUFBQSw2QkFBc0IsQ0FBQSxJQUFDO0lBQy9HLFlBQ0Y7SUFBQSxpQkFBTzs7O0lBREwsY0FDRjtJQURFLDZDQUNGOzs7SUFDNEIsWUFBVzs7O0lBQVgsa0NBQVc7Ozs7SUFHckMsbUNBTUM7SUFEQyx3TEFBUyxlQUFBLDZCQUFxQixDQUFBLElBQUM7SUFFakMsaUJBQVU7OztJQU5SLGdFQUEyQjs7OztJQU83QixtQ0FBZ0g7SUFBaEQsd0xBQVMsZUFBQSx3QkFBZ0IsQ0FBQSxJQUFDO0lBQzFGLGlCQUFVOzs7SUFERCwyREFBc0I7OztJQVRqQywrQkFBZ0U7SUFDOUQsdUZBT1UsMEVBQUE7SUFHWixpQkFBTTs7O0lBUkQsY0FBMEI7SUFBMUIsa0RBQTBCO0lBTUksY0FBVTtJQUFWLGtDQUFVOzs7SUFmL0MsOEJBQThEO0lBQzVELDBFQUVPLDRHQUFBLDJEQUFBO0lBZVQsaUJBQU07Ozs7SUFqQkcsY0FBdUI7SUFBdkIsNkNBQXVCLGlCQUFBO0lBS3hCLGVBQWtDO0lBQWxDLGlFQUFrQzs7OztJQXFCeEMsK0JBQWtELFlBQUE7SUFDSyx3S0FB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QUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDbEIsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDckI7SUFDSCxDQUFDOzJFQXBHVSxpQkFBaUI7NkRBQWpCLGlCQUFpQjs7WUNuQzlCLDhCQVVDO1lBSEMsaUdBQVMsbUJBQWUsSUFBQyx3RkFDZCxxQkFBaUIsSUFESDtZQUl6QixrRUFrQk07WUFFTix1Q0FBdUQsYUFBQTtZQUVuRCxrQkFBeUI7WUFDM0IsaUJBQU0sRUFBQTtZQUdSLGtFQWFNO1lBQ1IsaUJBQU07O1lBN0NKLDhGQUE2RTtZQUw3RSwwREFBNkMsMkJBQUEsb0NBQUEsa0NBQUEsbUVBQUE7WUFRN0MsK0VBQXlEO1lBRW5ELGNBQTZCO1lBQTdCLGtEQUE2QjtZQW9CVCxjQUE0QjtZQUE1Qiw4Q0FBNEI7WUFNaEQsZUFBa0I7WUFBbEIsdUNBQWtCOzs7aUZERmIsaUJBQWlCO2NBSjdCLFNBQVM7MkJBQ0UsV0FBVzs7a0ZBR1YsaUJBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9XaWRnZXRCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi9wby13aWRnZXQtYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgUG9LZXlDb2RlRW51bSB9IGZyb20gJy4vLi4vLi4vZW51bXMvcG8ta2V5LWNvZGUuZW51bSc7XG5cbi8qKlxuICogQGRvY3NFeHRlbmRzIFBvV2lkZ2V0QmFzZUNvbXBvbmVudFxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInBvLXdpZGdldC1iYXNpY1wiIHRpdGxlPVwiUE8gV2lkZ2V0IEJhc2ljXCI+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby13aWRnZXQtYmFzaWMvc2FtcGxlLXBvLXdpZGdldC1iYXNpYy5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby13aWRnZXQtYmFzaWMvc2FtcGxlLXBvLXdpZGdldC1iYXNpYy5jb21wb25lbnQudHNcIj4gPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJwby13aWRnZXQtbGFic1wiIHRpdGxlPVwiUE8gV2lkZ2V0IExhYnNcIj5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLXdpZGdldC1sYWJzL3NhbXBsZS1wby13aWRnZXQtbGFicy5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby13aWRnZXQtbGFicy9zYW1wbGUtcG8td2lkZ2V0LWxhYnMuY29tcG9uZW50LnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwicG8td2lkZ2V0LWZpbmFuY2UtZGFzaGJvYXJkXCIgdGl0bGU9XCJQTyBXaWRnZXQgLSBGaW5hbmNlIGRhc2hib2FyZFwiPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8td2lkZ2V0LWZpbmFuY2UtZGFzaGJvYXJkL3NhbXBsZS1wby13aWRnZXQtZmluYW5jZS1kYXNoYm9hcmQuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8td2lkZ2V0LWZpbmFuY2UtZGFzaGJvYXJkL3NhbXBsZS1wby13aWRnZXQtZmluYW5jZS1kYXNoYm9hcmQuY29tcG9uZW50LnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwicG8td2lkZ2V0LWNhcmRcIiB0aXRsZT1cIlBPIFdpZGdldCAtIENhcmRcIj5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLXdpZGdldC1jYXJkL3NhbXBsZS1wby13aWRnZXQtY2FyZC5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby13aWRnZXQtY2FyZC9zYW1wbGUtcG8td2lkZ2V0LWNhcmQuY29tcG9uZW50LnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BvLXdpZGdldCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby13aWRnZXQuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFBvV2lkZ2V0Q29tcG9uZW50IGV4dGVuZHMgUG9XaWRnZXRCYXNlQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgZ2V0IHNob3dUaXRsZUFjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnRpdGxlQWN0aW9uLm9ic2VydmVyc1swXTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHZpZXdSZWY6IFZpZXdDb250YWluZXJSZWYpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zZXRIZWlnaHQodGhpcy5oZWlnaHQpO1xuICB9XG5cbiAgaGFzVGl0bGVIZWxwT3JTZXR0aW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMudGl0bGUgfHwgISF0aGlzLmhlbHAgfHwgISF0aGlzLnNldHRpbmcub2JzZXJ2ZXJzWzBdO1xuICB9XG5cbiAgb25DbGljayhldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmICh0aGlzLmNsaWNrLm9ic2VydmVkICYmICF0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLmNsaWNrLmVtaXQoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIG9uS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY2xpY2sub2JzZXJ2ZWQgJiZcbiAgICAgICF0aGlzLmRpc2FibGVkICYmXG4gICAgICAoZXZlbnQud2hpY2ggPT09IFBvS2V5Q29kZUVudW0uc3BhY2UgfHwgZXZlbnQua2V5Q29kZSA9PT0gUG9LZXlDb2RlRW51bS5zcGFjZSlcbiAgICApIHtcbiAgICAgIHRoaXMuY2xpY2suZW1pdChldmVudCk7XG5cbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbkhlbHAoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgd2luZG93Lm9wZW4odGhpcy5oZWxwLCAnX2JsYW5rJyk7XG4gICAgfVxuICB9XG5cbiAgcnVuUHJpbWFyeUFjdGlvbihldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnByaW1hcnlBY3Rpb24uZW1pdCgpO1xuICAgIH1cbiAgfVxuXG4gIHJ1blNlY29uZGFyeUFjdGlvbihldmVudDogTW91c2VFdmVudCkge1xuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNlY29uZGFyeUFjdGlvbi5lbWl0KCk7XG4gICAgfVxuICB9XG5cbiAgcnVuVGl0bGVBY3Rpb24oZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy50aXRsZUFjdGlvbi5lbWl0KCk7XG4gICAgfVxuICB9XG5cbiAgc2V0SGVpZ2h0KGhlaWdodDogbnVtYmVyKSB7XG4gICAgaWYgKGhlaWdodCkge1xuICAgICAgbGV0IGJvZHlIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBjb25zdCBoYXNTZXR0aW5nT3JIZWxwID0gdGhpcy5zZXR0aW5nLm9ic2VydmVycy5sZW5ndGggPiAwIHx8IHRoaXMuaGVscDtcbiAgICAgIGNvbnN0IGZvb3RlckJvcmRlciA9IDE7XG4gICAgICBjb25zdCBmb290ZXJIZWlnaHQgPSA0MDtcbiAgICAgIGNvbnN0IHNldHRpbmdIZWlnaHQgPSAzNztcbiAgICAgIGNvbnN0IHNoYWRvd0hlaWdodCA9IDI7XG4gICAgICBjb25zdCB0aXRsZUhlaWdodCA9IDUwO1xuXG4gICAgICBpZiAodGhpcy5ub1NoYWRvdykge1xuICAgICAgICBib2R5SGVpZ2h0IC09IHNoYWRvd0hlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc1NldHRpbmdPckhlbHAgJiYgIXRoaXMudGl0bGUpIHtcbiAgICAgICAgYm9keUhlaWdodCAtPSBzZXR0aW5nSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy50aXRsZSkge1xuICAgICAgICBib2R5SGVpZ2h0IC09IHRpdGxlSGVpZ2h0O1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcmltYXJ5TGFiZWwpIHtcbiAgICAgICAgYm9keUhlaWdodCAtPSBmb290ZXJIZWlnaHQgKyBmb290ZXJCb3JkZXI7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY29udGFpbmVySGVpZ2h0ID0gYCR7Ym9keUhlaWdodH1weGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29udGFpbmVySGVpZ2h0ID0gYGF1dG9gO1xuICAgIH1cbiAgfVxuXG4gIHNldHRpbmdPdXRwdXQoZXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zZXR0aW5nLmVtaXQoKTtcbiAgICB9XG4gIH1cbn1cbiIsIjxkaXZcbiAgW2NsYXNzLnBvLWNsaWNrYWJsZV09XCJjbGljay5vYnNlcnZlcnMubGVuZ3RoXCJcbiAgW2NsYXNzLnBvLXdpZGdldF09XCIhcHJpbWFyeVwiXG4gIFtjbGFzcy5wby13aWRnZXQtZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICBbY2xhc3MucG8td2lkZ2V0LXByaW1hcnldPVwicHJpbWFyeVwiXG4gIFtjbGFzcy5wby13aWRnZXQtbm8tc2hhZG93XT1cImNsaWNrLm9ic2VydmVycy5sZW5ndGggJiYgbm9TaGFkb3dcIlxuICBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XCJiYWNrZ3JvdW5kID8gJ3VybCgnICsgYmFja2dyb3VuZCArICcpJyA6IHVuZGVmaW5lZFwiXG4gIChjbGljayk9XCJvbkNsaWNrKCRldmVudClcIlxuICAoa2V5ZG93bik9XCJvbktleURvd24oJGV2ZW50KVwiXG4gIFt0YWJpbmRleF09XCJkaXNhYmxlZCB8fCAhY2xpY2sub2JzZXJ2ZXJzLmxlbmd0aCA/IC0xIDogMFwiXG4+XG4gIDxkaXYgKm5nSWY9XCJoYXNUaXRsZUhlbHBPclNldHRpbmcoKVwiIGNsYXNzPVwicG8td2lkZ2V0LWhlYWRlclwiPlxuICAgIDxzcGFuICpuZ0lmPVwic2hvd1RpdGxlQWN0aW9uOyBlbHNlIG5vVGl0bGVBY3Rpb25cIiBjbGFzcz1cInBvLXdpZGdldC10aXRsZS1hY3Rpb25cIiAoY2xpY2spPVwicnVuVGl0bGVBY3Rpb24oJGV2ZW50KVwiPlxuICAgICAge3sgdGl0bGUgfX1cbiAgICA8L3NwYW4+XG4gICAgPG5nLXRlbXBsYXRlICNub1RpdGxlQWN0aW9uPnt7IHRpdGxlIH19PC9uZy10ZW1wbGF0ZT5cblxuICAgIDxkaXYgKm5nSWY9XCJzZXR0aW5nLm9ic2VydmVyc1swXSB8fCBoZWxwXCIgY2xhc3M9XCJwby1wdWxsLXJpZ2h0XCI+XG4gICAgICA8cG8taWNvblxuICAgICAgICBpZD1cInNldHRpbmdBY3Rpb24te3sgaWQgfX1cIlxuICAgICAgICAqbmdJZj1cInNldHRpbmcub2JzZXJ2ZXJzWzBdXCJcbiAgICAgICAgcC1pY29uPVwiSUNPTl9TRVRUSU5HU1wiXG4gICAgICAgIGNsYXNzPVwicG8tY2xpY2thYmxlXCJcbiAgICAgICAgKGNsaWNrKT1cInNldHRpbmdPdXRwdXQoJGV2ZW50KVwiXG4gICAgICA+XG4gICAgICA8L3BvLWljb24+XG4gICAgICA8cG8taWNvbiBpZD1cImhlbHBMaW5rLXt7IGlkIH19XCIgKm5nSWY9XCJoZWxwXCIgcC1pY29uPVwiSUNPTl9IRUxQXCIgKGNsaWNrKT1cIm9wZW5IZWxwKCRldmVudClcIiBjbGFzcz1cInBvLWNsaWNrYWJsZVwiPlxuICAgICAgPC9wby1pY29uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8cG8tY29udGFpbmVyIHAtbm8tYm9yZGVyIFtwLWhlaWdodF09XCJjb250YWluZXJIZWlnaHRcIj5cbiAgICA8ZGl2IGNsYXNzPVwicG8td2lkZ2V0LWJvZHlcIj5cbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICA8L2Rpdj5cbiAgPC9wby1jb250YWluZXI+XG5cbiAgPGRpdiAqbmdJZj1cInByaW1hcnlMYWJlbFwiIGNsYXNzPVwicG8td2lkZ2V0LWZvb3RlclwiPlxuICAgIDxkaXYgY2xhc3M9XCJwby13aWRnZXQteGxcIiAqbmdJZj1cIiFzZWNvbmRhcnlMYWJlbFwiPlxuICAgICAgPGEgY2xhc3M9XCJwby13aWRnZXQtYWN0aW9uXCIgaWQ9XCJwcmltYXJ5QWN0LXt7IGlkIH19XCIgKGNsaWNrKT1cInJ1blByaW1hcnlBY3Rpb24oJGV2ZW50KVwiPnt7IHByaW1hcnlMYWJlbCB9fTwvYT5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJwby13aWRnZXQtbWRcIiAqbmdJZj1cInNlY29uZGFyeUxhYmVsXCI+XG4gICAgICA8YSBjbGFzcz1cInBvLXdpZGdldC1hY3Rpb25cIiBpZD1cInByaW1hcnlBY3Qte3sgaWQgfX1cIiAoY2xpY2spPVwicnVuUHJpbWFyeUFjdGlvbigkZXZlbnQpXCI+e3sgcHJpbWFyeUxhYmVsIH19PC9hPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJwby13aWRnZXQtbWRcIiAqbmdJZj1cInNlY29uZGFyeUxhYmVsXCI+XG4gICAgICA8YSBjbGFzcz1cInBvLXdpZGdldC1hY3Rpb25cIiBpZD1cInNlY29uZGFyeUFjdC17eyBpZCB9fVwiIChjbGljayk9XCJydW5TZWNvbmRhcnlBY3Rpb24oJGV2ZW50KVwiPnt7XG4gICAgICAgIHNlY29uZGFyeUxhYmVsXG4gICAgICB9fTwvYT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==