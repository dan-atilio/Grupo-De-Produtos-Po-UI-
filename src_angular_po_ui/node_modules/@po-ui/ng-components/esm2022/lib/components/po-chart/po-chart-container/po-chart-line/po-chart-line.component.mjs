import { Component } from '@angular/core';
import { PoChartLineBaseComponent } from './po-chart-line-base.component';
import * as i0 from "@angular/core";
import * as i1 from "../../services/po-chart-maths.service";
import * as i2 from "@angular/common";
import * as i3 from "./po-chart-path/po-chart-path.component";
import * as i4 from "./po-chart-series-point/po-chart-series-point.component";
const _c0 = ["po-chart-line", ""];
function PoChartLineComponent__svg_g_2_Template(rf, ctx) { if (rf & 1) {
    const _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵnamespaceSVG();
    i0.ɵɵelementStart(0, "g", 2);
    i0.ɵɵlistener("mouseenter", function PoChartLineComponent__svg_g_2_Template__svg_g_mouseenter_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r5); const i_r3 = restoredCtx.index; const ctx_r4 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r4.onEnter(i_r3)); })("mouseleave", function PoChartLineComponent__svg_g_2_Template__svg_g_mouseleave_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r5); const i_r3 = restoredCtx.index; const ctx_r6 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r6.onLeave(i_r3)); });
    i0.ɵɵelement(1, "g", 3);
    i0.ɵɵelementStart(2, "g", 4);
    i0.ɵɵlistener("p-point-click", function PoChartLineComponent__svg_g_2_Template__svg_g_p_point_click_2_listener($event) { i0.ɵɵrestoreView(_r5); const ctx_r7 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r7.onSeriePointClick($event)); })("p-point-hover", function PoChartLineComponent__svg_g_2_Template__svg_g_p_point_hover_2_listener($event) { i0.ɵɵrestoreView(_r5); const ctx_r8 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r8.onSeriePointHover($event)); });
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const item_r2 = ctx.$implicit;
    const i_r3 = ctx.index;
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵclassMap("po-chart-line-path-group-" + i_r3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("p-chart-line", ctx_r1.chartType === "line")("p-animate", ctx_r1.animate)("p-color", item_r2.color)("p-coordinates", item_r2 == null ? null : item_r2.coordinates)("p-is-active", item_r2.isActive);
    i0.ɵɵattribute("key", "po-chart-line-path-" + i_r3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("p-animate", ctx_r1.animate)("p-chart-line", ctx_r1.chartType === "line")("p-color", item_r2.color)("p-coordinates", ctx_r1.seriesPointsCoordinates[i_r3])("p-is-active", ctx_r1.activeTooltip)("p-relative-to", "po-chart-line-path-group-" + i_r3);
    i0.ɵɵattribute("key", "po-chart-line-path-points-group-" + i_r3);
} }
export class PoChartLineComponent extends PoChartLineBaseComponent {
    mathsService;
    renderer;
    elementRef;
    constructor(mathsService, renderer, elementRef) {
        super(mathsService, renderer, elementRef);
        this.mathsService = mathsService;
        this.renderer = renderer;
        this.elementRef = elementRef;
    }
    onEnter(serieIndex) {
        return null;
    }
    onLeave(serieIndex) {
        return null;
    }
    onSeriePointHover(selectedItem) {
        const { relativeTo, ...item } = selectedItem;
        this.reorderSVGGroup(relativeTo);
        this.pointHover.emit(item);
    }
    // É necessário reordenar os svgs on hover pois eventualmente os elemntos svg ficam por trás de outros. Não há z-index para svgElement.
    reorderSVGGroup(pathGroup) {
        const pathGroupElement = this.elementRef.nativeElement.querySelectorAll(`.${pathGroup}`);
        this.animate = false;
        this.renderer.appendChild(this.chartLine.nativeElement, pathGroupElement[0]);
    }
    static ɵfac = function PoChartLineComponent_Factory(t) { return new (t || PoChartLineComponent)(i0.ɵɵdirectiveInject(i1.PoChartMathsService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef)); };
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoChartLineComponent, selectors: [["", "po-chart-line", ""]], features: [i0.ɵɵInheritDefinitionFeature], attrs: _c0, decls: 3, vars: 2, consts: [["chartLine", ""], [3, "class", "mouseenter", "mouseleave", 4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "mouseenter", "mouseleave"], ["po-chart-path", "", 3, "p-chart-line", "p-animate", "p-color", "p-coordinates", "p-is-active"], ["po-chart-series-point", "", 3, "p-animate", "p-chart-line", "p-color", "p-coordinates", "p-is-active", "p-relative-to", "p-point-click", "p-point-hover"]], template: function PoChartLineComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵnamespaceSVG();
            i0.ɵɵelementStart(0, "g", null, 0);
            i0.ɵɵtemplate(2, PoChartLineComponent__svg_g_2_Template, 3, 15, "g", 1);
            i0.ɵɵelementEnd();
        } if (rf & 2) {
            i0.ɵɵadvance(2);
            i0.ɵɵproperty("ngForOf", ctx.seriesPathsCoordinates)("ngForTrackBy", ctx.trackBy);
        } }, dependencies: [i2.NgForOf, i3.PoChartPathComponent, i4.PoChartSeriesPointComponent], encapsulation: 2 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoChartLineComponent, [{
        type: Component,
        args: [{ selector: '[po-chart-line]', template: "<svg:g #chartLine>\n\n  <svg:g *ngFor=\"let item of seriesPathsCoordinates; let i = index; trackBy: trackBy\"\n    [class]=\"'po-chart-line-path-group-' + i\"\n    (mouseenter)=\"onEnter(i)\"\n    (mouseleave)=\"onLeave(i)\"\n  >\n    <!-- SERIES PATHS -->\n    <svg:g po-chart-path\n      [p-chart-line]=\"chartType === 'line'\"\n      [attr.key]=\"'po-chart-line-path-' + i\"\n      [p-animate]=\"animate\"\n      [p-color]=\"item.color\" \n      [p-coordinates]=\"item?.coordinates\"\n      [p-is-active]=\"item.isActive\"\n      >\n      </svg:g>\n\n    <!-- SERIES POINTS -->\n    <svg:g po-chart-series-point\n      [p-animate]=\"animate\"\n      [p-chart-line]=\"chartType === 'line'\"\n      [p-color]=\"item.color\"\n      [p-coordinates]=\"seriesPointsCoordinates[i]\"\n      [p-is-active]=\"activeTooltip\"\n      [p-relative-to]=\"'po-chart-line-path-group-' + i\" \n      [attr.key]=\"'po-chart-line-path-points-group-' + i\"\n      (p-point-click)=\"onSeriePointClick($event)\"\n      (p-point-hover)=\"onSeriePointHover($event)\"\n      ></svg:g>\n  </svg:g>\n\n</svg:g>" }]
    }], () => [{ type: i1.PoChartMathsService }, { type: i0.Renderer2 }, { type: i0.ElementRef }], null); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoChartLineComponent, { className: "PoChartLineComponent", filePath: "lib/components/po-chart/po-chart-container/po-chart-line/po-chart-line.component.ts", lineNumber: 10 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtbGluZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tY2hhcnQvcG8tY2hhcnQtY29udGFpbmVyL3BvLWNoYXJ0LWxpbmUvcG8tY2hhcnQtbGluZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tY2hhcnQvcG8tY2hhcnQtY29udGFpbmVyL3BvLWNoYXJ0LWxpbmUvcG8tY2hhcnQtbGluZS5jb21wb25lbnQuc3ZnIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXlCLE1BQU0sZUFBZSxDQUFDO0FBRWpFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDOzs7Ozs7Ozs7O0lDQXhFLDRCQUlDO0lBRkMsa09BQWMsZUFBQSxvQkFBVSxDQUFBLElBQUMscU5BQ1gsZUFBQSxvQkFBVSxDQUFBLElBREM7SUFJekIsdUJBUVU7SUFHViw0QkFVRztJQUZELDBMQUFpQixlQUFBLGdDQUF5QixDQUFBLElBQUMsNktBQzFCLGVBQUEsZ0NBQXlCLENBQUEsSUFEQztJQUUxQyxpQkFBUSxFQUFBOzs7OztJQTFCWCxpREFBeUM7SUFNdkMsY0FBcUM7SUFBckMsMERBQXFDLDZCQUFBLDBCQUFBLCtEQUFBLGlDQUFBO0lBQ3JDLG1EQUFzQztJQVV0QyxjQUFxQjtJQUFyQiwwQ0FBcUIsNkNBQUEsMEJBQUEsdURBQUEscUNBQUEscURBQUE7SUFNckIsZ0VBQW1EOztBRGpCekQsTUFBTSxPQUFPLG9CQUFxQixTQUFRLHdCQUF3QjtJQUVwRDtJQUNBO0lBQ0E7SUFIWixZQUNZLFlBQWlDLEVBQ2pDLFFBQW1CLEVBQ25CLFVBQXNCO1FBRWhDLEtBQUssQ0FBQyxZQUFZLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBSmhDLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQUNqQyxhQUFRLEdBQVIsUUFBUSxDQUFXO1FBQ25CLGVBQVUsR0FBVixVQUFVLENBQVk7SUFHbEMsQ0FBQztJQUVELE9BQU8sQ0FBQyxVQUFrQjtRQUN4QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFDRCxPQUFPLENBQUMsVUFBa0I7UUFDeEIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsaUJBQWlCLENBQUMsWUFBaUI7UUFDakMsTUFBTSxFQUFFLFVBQVUsRUFBRSxHQUFHLElBQUksRUFBRSxHQUFHLFlBQVksQ0FBQztRQUU3QyxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCx1SUFBdUk7SUFDL0gsZUFBZSxDQUFDLFNBQWlCO1FBQ3ZDLE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQyxDQUFDO1FBRXpGLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxFQUFFLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0UsQ0FBQzs4RUE3QlUsb0JBQW9COzZEQUFwQixvQkFBb0I7WUNUakMsbUJBQWtCO1lBQWxCLGtDQUFrQjtZQUVoQix1RUE0QlE7WUFFVixpQkFBUTs7WUE5QmtCLGVBQTJCO1lBQTNCLG9EQUEyQiw2QkFBQTs7O2lGRE94QyxvQkFBb0I7Y0FKaEMsU0FBUzsyQkFDRSxpQkFBaUI7O2tGQUdoQixvQkFBb0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIFJlbmRlcmVyMiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBQb0NoYXJ0TGluZUJhc2VDb21wb25lbnQgfSBmcm9tICcuL3BvLWNoYXJ0LWxpbmUtYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgUG9DaGFydE1hdGhzU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BvLWNoYXJ0LW1hdGhzLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdbcG8tY2hhcnQtbGluZV0nLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tY2hhcnQtbGluZS5jb21wb25lbnQuc3ZnJ1xufSlcbmV4cG9ydCBjbGFzcyBQb0NoYXJ0TGluZUNvbXBvbmVudCBleHRlbmRzIFBvQ2hhcnRMaW5lQmFzZUNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBtYXRoc1NlcnZpY2U6IFBvQ2hhcnRNYXRoc1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIHJlbmRlcmVyOiBSZW5kZXJlcjIsXG4gICAgcHJvdGVjdGVkIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWZcbiAgKSB7XG4gICAgc3VwZXIobWF0aHNTZXJ2aWNlLCByZW5kZXJlciwgZWxlbWVudFJlZik7XG4gIH1cblxuICBvbkVudGVyKHNlcmllSW5kZXg6IG51bWJlcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIG9uTGVhdmUoc2VyaWVJbmRleDogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBvblNlcmllUG9pbnRIb3ZlcihzZWxlY3RlZEl0ZW06IGFueSkge1xuICAgIGNvbnN0IHsgcmVsYXRpdmVUbywgLi4uaXRlbSB9ID0gc2VsZWN0ZWRJdGVtO1xuXG4gICAgdGhpcy5yZW9yZGVyU1ZHR3JvdXAocmVsYXRpdmVUbyk7XG4gICAgdGhpcy5wb2ludEhvdmVyLmVtaXQoaXRlbSk7XG4gIH1cblxuICAvLyDDiSBuZWNlc3PDoXJpbyByZW9yZGVuYXIgb3Mgc3ZncyBvbiBob3ZlciBwb2lzIGV2ZW50dWFsbWVudGUgb3MgZWxlbW50b3Mgc3ZnIGZpY2FtIHBvciB0csOhcyBkZSBvdXRyb3MuIE7Do28gaMOhIHotaW5kZXggcGFyYSBzdmdFbGVtZW50LlxuICBwcml2YXRlIHJlb3JkZXJTVkdHcm91cChwYXRoR3JvdXA6IHN0cmluZykge1xuICAgIGNvbnN0IHBhdGhHcm91cEVsZW1lbnQgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtwYXRoR3JvdXB9YCk7XG5cbiAgICB0aGlzLmFuaW1hdGUgPSBmYWxzZTtcbiAgICB0aGlzLnJlbmRlcmVyLmFwcGVuZENoaWxkKHRoaXMuY2hhcnRMaW5lLm5hdGl2ZUVsZW1lbnQsIHBhdGhHcm91cEVsZW1lbnRbMF0pO1xuICB9XG59XG4iLCI8c3ZnOmcgI2NoYXJ0TGluZT5cblxuICA8c3ZnOmcgKm5nRm9yPVwibGV0IGl0ZW0gb2Ygc2VyaWVzUGF0aHNDb29yZGluYXRlczsgbGV0IGkgPSBpbmRleDsgdHJhY2tCeTogdHJhY2tCeVwiXG4gICAgW2NsYXNzXT1cIidwby1jaGFydC1saW5lLXBhdGgtZ3JvdXAtJyArIGlcIlxuICAgIChtb3VzZWVudGVyKT1cIm9uRW50ZXIoaSlcIlxuICAgIChtb3VzZWxlYXZlKT1cIm9uTGVhdmUoaSlcIlxuICA+XG4gICAgPCEtLSBTRVJJRVMgUEFUSFMgLS0+XG4gICAgPHN2ZzpnIHBvLWNoYXJ0LXBhdGhcbiAgICAgIFtwLWNoYXJ0LWxpbmVdPVwiY2hhcnRUeXBlID09PSAnbGluZSdcIlxuICAgICAgW2F0dHIua2V5XT1cIidwby1jaGFydC1saW5lLXBhdGgtJyArIGlcIlxuICAgICAgW3AtYW5pbWF0ZV09XCJhbmltYXRlXCJcbiAgICAgIFtwLWNvbG9yXT1cIml0ZW0uY29sb3JcIiBcbiAgICAgIFtwLWNvb3JkaW5hdGVzXT1cIml0ZW0/LmNvb3JkaW5hdGVzXCJcbiAgICAgIFtwLWlzLWFjdGl2ZV09XCJpdGVtLmlzQWN0aXZlXCJcbiAgICAgID5cbiAgICAgIDwvc3ZnOmc+XG5cbiAgICA8IS0tIFNFUklFUyBQT0lOVFMgLS0+XG4gICAgPHN2ZzpnIHBvLWNoYXJ0LXNlcmllcy1wb2ludFxuICAgICAgW3AtYW5pbWF0ZV09XCJhbmltYXRlXCJcbiAgICAgIFtwLWNoYXJ0LWxpbmVdPVwiY2hhcnRUeXBlID09PSAnbGluZSdcIlxuICAgICAgW3AtY29sb3JdPVwiaXRlbS5jb2xvclwiXG4gICAgICBbcC1jb29yZGluYXRlc109XCJzZXJpZXNQb2ludHNDb29yZGluYXRlc1tpXVwiXG4gICAgICBbcC1pcy1hY3RpdmVdPVwiYWN0aXZlVG9vbHRpcFwiXG4gICAgICBbcC1yZWxhdGl2ZS10b109XCIncG8tY2hhcnQtbGluZS1wYXRoLWdyb3VwLScgKyBpXCIgXG4gICAgICBbYXR0ci5rZXldPVwiJ3BvLWNoYXJ0LWxpbmUtcGF0aC1wb2ludHMtZ3JvdXAtJyArIGlcIlxuICAgICAgKHAtcG9pbnQtY2xpY2spPVwib25TZXJpZVBvaW50Q2xpY2soJGV2ZW50KVwiXG4gICAgICAocC1wb2ludC1ob3Zlcik9XCJvblNlcmllUG9pbnRIb3ZlcigkZXZlbnQpXCJcbiAgICAgID48L3N2ZzpnPlxuICA8L3N2ZzpnPlxuXG48L3N2ZzpnPiJdfQ==