import { Input, Directive } from '@angular/core';
import { convertToInt } from '../../utils/util';
import { poGaugeMinHeight } from './po-gauge-default-values.constant';
import * as i0 from "@angular/core";
import * as i1 from "../../services/po-color/po-color.service";
/**
 * @description
 *
 * O componente `po-gauge` provê a representação de um valor através de um arco. É muito comum, por exemplo, para demonstrar o desempenho ou progresso de algo.
 * O `po-gauge` possui dois tipos de tratamentos:
 * - É possível demonstrar um dado percentual simples em conjunto com uma descrição resumida em seu interior;
 * - Para um demonstrativo mais elaborado, consegue-se definir alcances em cores, um breve texto descritivo e um ponteiro indicando o valor desejado.
 *
 * #### Guia de uso para Gráficos
 *
 * > Veja nosso [guia de uso para gráficos](/guides/guide-charts) para auxiliar na construção do seu gráfico,
 * informando em qual caso utilizar, o que devemos evitar e boas práticas relacionada a cores.
 */
export class PoGaugeBaseComponent {
    colorService;
    _description;
    _height = poGaugeMinHeight;
    _ranges = [];
    _title;
    _value;
    /**
     * @optional
     *
     * @description
     *
     * Define o texto que será exibido no gauge.
     * Há dois posicionamentos para ele:
     * - Se houver definição para `p-ranges`, o descritivo será exibido no topo do container, ficando acima do gauge;
     * - Na ausência de `p-ranges`, será incorporado dentro do arco do gauge, e abaixo de `p-value`.
     *
     * Para ambos os casos, se o conteúdo ultrapassar a área designada, serão geradas automaticamente reticências.
     * No entanto, será possível visualizar a mensagem através de um tooltip no passar do mouse sobre o texto.
     *
     * > Para uma melhor experiência do usuário, é recomendado um descritivo breve e com poucas palavras.
     * Desta forma evita-se o *overflow* do texto.
     */
    set description(value) {
        this._description = value;
        this.svgContainerSize();
    }
    get description() {
        return this._description;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define a altura do gauge.
     *
     * O valor mínimo aceito é 300px.
     *
     * @default `300px`
     */
    set height(value) {
        this._height = this.setGaugeHeight(value);
        this.svgContainerSize();
    }
    get height() {
        return this._height;
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição para o alcance de cores. Ao adicionar pelo menos um item na lista,
     * incorpora-se o ponteiro que assinala o valor passado em `p-value`.
     * Se o valor de `p-value` for inferior ao mínimo valor definido em `PoGaugeRanges.from`, o domínio mínimo do gauge será `p-value`.
     * A mesma regra prevalece para valores máximos.
     */
    set ranges(value) {
        this._ranges = Array.isArray(value) ? this.verifyColors(value) : [];
        this.svgContainerSize();
    }
    get ranges() {
        return this._ranges;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o título do gauge.
     */
    set title(value) {
        this._title = value;
        this.svgContainerSize();
    }
    get title() {
        return this._title;
    }
    /**
     * @optional
     *
     * @description
     *
     * Valor referente ao valor da série. Seu comportamento segue a seguintes regras:
     *
     * - Sem `p-ranges`: Os valores passados para `p-value` e `p-description` serão centralizados no interior do arco.
     * A base do valor será percentual tendo como base os alcances entre zero e 100%. Se passado um valor superior a 100,
     * A colorização do gauge será completa e o valor passado será exibido no interior do arco.
     * - Com `p-ranges`: A descrição será exibida acima do gauge e haverá um ponteiro marcando o valor passado em `p-value`.
     * Considerando que o alcance em `ranges` é aberto, então a escala de `p-value` será em relação ao menor/maior alcance
     * absoluto definido em `p-ranges`.
     * Se passado um `p-value` inferior em relação ao mínimo valor definido em `p-ranges`, o domínio mínimo do gauge partirá de `p-value`.
     * A mesma regra prevalece para valores máximos.
     *
     */
    set value(gaugeValue) {
        if (typeof gaugeValue === 'number' || (typeof gaugeValue === 'string' && gaugeValue.trim())) {
            const value = !isNaN(gaugeValue) ? Number(gaugeValue) : undefined;
            this._value = value;
        }
        else {
            this._value = undefined;
        }
    }
    get value() {
        return this._value;
    }
    constructor(colorService) {
        this.colorService = colorService;
    }
    verifyColors(ranges) {
        return this.colorService.getColors(ranges);
    }
    setGaugeHeight(height) {
        const gaugeHeight = convertToInt(height);
        return gaugeHeight && gaugeHeight > poGaugeMinHeight ? gaugeHeight : poGaugeMinHeight;
    }
    static ɵfac = function PoGaugeBaseComponent_Factory(t) { return new (t || PoGaugeBaseComponent)(i0.ɵɵdirectiveInject(i1.PoColorService)); };
    static ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoGaugeBaseComponent, inputs: { description: [i0.ɵɵInputFlags.None, "p-description", "description"], height: [i0.ɵɵInputFlags.None, "p-height", "height"], ranges: [i0.ɵɵInputFlags.None, "p-ranges", "ranges"], title: [i0.ɵɵInputFlags.None, "p-title", "title"], value: [i0.ɵɵInputFlags.None, "p-value", "value"] } });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoGaugeBaseComponent, [{
        type: Directive
    }], () => [{ type: i1.PoColorService }], { description: [{
            type: Input,
            args: ['p-description']
        }], height: [{
            type: Input,
            args: ['p-height']
        }], ranges: [{
            type: Input,
            args: ['p-ranges']
        }], title: [{
            type: Input,
            args: ['p-title']
        }], value: [{
            type: Input,
            args: ['p-value']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tZ2F1Z2UtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tZ2F1Z2UvcG8tZ2F1Z2UtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFakQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDOzs7QUFNdEU7Ozs7Ozs7Ozs7OztHQVlHO0FBRUgsTUFBTSxPQUFnQixvQkFBb0I7SUF3SGxCO0lBdkhkLFlBQVksQ0FBUztJQUNyQixPQUFPLEdBQVcsZ0JBQWdCLENBQUM7SUFDbkMsT0FBTyxHQUF5QixFQUFFLENBQUM7SUFDbkMsTUFBTSxDQUFTO0lBQ2YsTUFBTSxDQUFTO0lBRXZCOzs7Ozs7Ozs7Ozs7Ozs7T0FlRztJQUNILElBQTRCLFdBQVcsQ0FBQyxLQUFhO1FBQ25ELElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBRTFCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDYixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDM0IsQ0FBQztJQUVEOzs7Ozs7Ozs7O09BVUc7SUFDSCxJQUF1QixNQUFNLENBQUMsS0FBYTtRQUN6QyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBRUQ7Ozs7Ozs7OztPQVNHO0lBQ0gsSUFBdUIsTUFBTSxDQUFDLEtBQTJCO1FBQ3ZELElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3BFLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLE1BQU07UUFDUixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDdEIsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILElBQXNCLEtBQUssQ0FBQyxLQUFhO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBRXBCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUVEOzs7Ozs7Ozs7Ozs7Ozs7O09BZ0JHO0lBQ0gsSUFBc0IsS0FBSyxDQUFDLFVBQWtCO1FBQzVDLElBQUksT0FBTyxVQUFVLEtBQUssUUFBUSxJQUFJLENBQUMsT0FBTyxVQUFVLEtBQUssUUFBUSxJQUFhLFVBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFO1lBQ3JHLE1BQU0sS0FBSyxHQUFHLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUVsRSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztTQUNyQjthQUFNO1lBQ0wsSUFBSSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7U0FDekI7SUFDSCxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxZQUFzQixZQUE0QjtRQUE1QixpQkFBWSxHQUFaLFlBQVksQ0FBZ0I7SUFBRyxDQUFDO0lBRTlDLFlBQVksQ0FBQyxNQUE0QjtRQUMvQyxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFnQixNQUFNLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRU8sY0FBYyxDQUFDLE1BQWM7UUFDbkMsTUFBTSxXQUFXLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXpDLE9BQU8sV0FBVyxJQUFJLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztJQUN4RixDQUFDOzhFQWxJbUIsb0JBQW9COzZEQUFwQixvQkFBb0I7O2lGQUFwQixvQkFBb0I7Y0FEekMsU0FBUzsrQ0F3Qm9CLFdBQVc7a0JBQXRDLEtBQUs7bUJBQUMsZUFBZTtZQXFCQyxNQUFNO2tCQUE1QixLQUFLO21CQUFDLFVBQVU7WUFtQk0sTUFBTTtrQkFBNUIsS0FBSzttQkFBQyxVQUFVO1lBZ0JLLEtBQUs7a0JBQTFCLEtBQUs7bUJBQUMsU0FBUztZQTJCTSxLQUFLO2tCQUExQixLQUFLO21CQUFDLFNBQVMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dCwgRGlyZWN0aXZlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IGNvbnZlcnRUb0ludCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xuaW1wb3J0IHsgcG9HYXVnZU1pbkhlaWdodCB9IGZyb20gJy4vcG8tZ2F1Z2UtZGVmYXVsdC12YWx1ZXMuY29uc3RhbnQnO1xuXG5pbXBvcnQgeyBQb0NvbG9yU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BvLWNvbG9yL3BvLWNvbG9yLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBQb0dhdWdlUmFuZ2VzIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLWdhdWdlLXJhbmdlcy5pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gY29tcG9uZW50ZSBgcG8tZ2F1Z2VgIHByb3bDqiBhIHJlcHJlc2VudGHDp8OjbyBkZSB1bSB2YWxvciBhdHJhdsOpcyBkZSB1bSBhcmNvLiDDiSBtdWl0byBjb211bSwgcG9yIGV4ZW1wbG8sIHBhcmEgZGVtb25zdHJhciBvIGRlc2VtcGVuaG8gb3UgcHJvZ3Jlc3NvIGRlIGFsZ28uXG4gKiBPIGBwby1nYXVnZWAgcG9zc3VpIGRvaXMgdGlwb3MgZGUgdHJhdGFtZW50b3M6XG4gKiAtIMOJIHBvc3PDrXZlbCBkZW1vbnN0cmFyIHVtIGRhZG8gcGVyY2VudHVhbCBzaW1wbGVzIGVtIGNvbmp1bnRvIGNvbSB1bWEgZGVzY3Jpw6fDo28gcmVzdW1pZGEgZW0gc2V1IGludGVyaW9yO1xuICogLSBQYXJhIHVtIGRlbW9uc3RyYXRpdm8gbWFpcyBlbGFib3JhZG8sIGNvbnNlZ3VlLXNlIGRlZmluaXIgYWxjYW5jZXMgZW0gY29yZXMsIHVtIGJyZXZlIHRleHRvIGRlc2NyaXRpdm8gZSB1bSBwb250ZWlybyBpbmRpY2FuZG8gbyB2YWxvciBkZXNlamFkby5cbiAqXG4gKiAjIyMjIEd1aWEgZGUgdXNvIHBhcmEgR3LDoWZpY29zXG4gKlxuICogPiBWZWphIG5vc3NvIFtndWlhIGRlIHVzbyBwYXJhIGdyw6FmaWNvc10oL2d1aWRlcy9ndWlkZS1jaGFydHMpIHBhcmEgYXV4aWxpYXIgbmEgY29uc3RydcOnw6NvIGRvIHNldSBncsOhZmljbyxcbiAqIGluZm9ybWFuZG8gZW0gcXVhbCBjYXNvIHV0aWxpemFyLCBvIHF1ZSBkZXZlbW9zIGV2aXRhciBlIGJvYXMgcHLDoXRpY2FzIHJlbGFjaW9uYWRhIGEgY29yZXMuXG4gKi9cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBvR2F1Z2VCYXNlQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBfZGVzY3JpcHRpb246IHN0cmluZztcbiAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXIgPSBwb0dhdWdlTWluSGVpZ2h0O1xuICBwcml2YXRlIF9yYW5nZXM6IEFycmF5PFBvR2F1Z2VSYW5nZXM+ID0gW107XG4gIHByaXZhdGUgX3RpdGxlOiBzdHJpbmc7XG4gIHByaXZhdGUgX3ZhbHVlOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIG8gdGV4dG8gcXVlIHNlcsOhIGV4aWJpZG8gbm8gZ2F1Z2UuXG4gICAqIEjDoSBkb2lzIHBvc2ljaW9uYW1lbnRvcyBwYXJhIGVsZTpcbiAgICogLSBTZSBob3V2ZXIgZGVmaW5pw6fDo28gcGFyYSBgcC1yYW5nZXNgLCBvIGRlc2NyaXRpdm8gc2Vyw6EgZXhpYmlkbyBubyB0b3BvIGRvIGNvbnRhaW5lciwgZmljYW5kbyBhY2ltYSBkbyBnYXVnZTtcbiAgICogLSBOYSBhdXPDqm5jaWEgZGUgYHAtcmFuZ2VzYCwgc2Vyw6EgaW5jb3Jwb3JhZG8gZGVudHJvIGRvIGFyY28gZG8gZ2F1Z2UsIGUgYWJhaXhvIGRlIGBwLXZhbHVlYC5cbiAgICpcbiAgICogUGFyYSBhbWJvcyBvcyBjYXNvcywgc2UgbyBjb250ZcO6ZG8gdWx0cmFwYXNzYXIgYSDDoXJlYSBkZXNpZ25hZGEsIHNlcsOjbyBnZXJhZGFzIGF1dG9tYXRpY2FtZW50ZSByZXRpY8OqbmNpYXMuXG4gICAqIE5vIGVudGFudG8sIHNlcsOhIHBvc3PDrXZlbCB2aXN1YWxpemFyIGEgbWVuc2FnZW0gYXRyYXbDqXMgZGUgdW0gdG9vbHRpcCBubyBwYXNzYXIgZG8gbW91c2Ugc29icmUgbyB0ZXh0by5cbiAgICpcbiAgICogPiBQYXJhIHVtYSBtZWxob3IgZXhwZXJpw6puY2lhIGRvIHVzdcOhcmlvLCDDqSByZWNvbWVuZGFkbyB1bSBkZXNjcml0aXZvIGJyZXZlIGUgY29tIHBvdWNhcyBwYWxhdnJhcy5cbiAgICogRGVzdGEgZm9ybWEgZXZpdGEtc2UgbyAqb3ZlcmZsb3cqIGRvIHRleHRvLlxuICAgKi9cbiAgQElucHV0KCdwLWRlc2NyaXB0aW9uJykgc2V0IGRlc2NyaXB0aW9uKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHZhbHVlO1xuXG4gICAgdGhpcy5zdmdDb250YWluZXJTaXplKCk7XG4gIH1cblxuICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIGEgYWx0dXJhIGRvIGdhdWdlLlxuICAgKlxuICAgKiBPIHZhbG9yIG3DrW5pbW8gYWNlaXRvIMOpIDMwMHB4LlxuICAgKlxuICAgKiBAZGVmYXVsdCBgMzAwcHhgXG4gICAqL1xuICBASW5wdXQoJ3AtaGVpZ2h0Jykgc2V0IGhlaWdodCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5faGVpZ2h0ID0gdGhpcy5zZXRHYXVnZUhlaWdodCh2YWx1ZSk7XG4gICAgdGhpcy5zdmdDb250YWluZXJTaXplKCk7XG4gIH1cblxuICBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluacOnw6NvIHBhcmEgbyBhbGNhbmNlIGRlIGNvcmVzLiBBbyBhZGljaW9uYXIgcGVsbyBtZW5vcyB1bSBpdGVtIG5hIGxpc3RhLFxuICAgKiBpbmNvcnBvcmEtc2UgbyBwb250ZWlybyBxdWUgYXNzaW5hbGEgbyB2YWxvciBwYXNzYWRvIGVtIGBwLXZhbHVlYC5cbiAgICogU2UgbyB2YWxvciBkZSBgcC12YWx1ZWAgZm9yIGluZmVyaW9yIGFvIG3DrW5pbW8gdmFsb3IgZGVmaW5pZG8gZW0gYFBvR2F1Z2VSYW5nZXMuZnJvbWAsIG8gZG9tw61uaW8gbcOtbmltbyBkbyBnYXVnZSBzZXLDoSBgcC12YWx1ZWAuXG4gICAqIEEgbWVzbWEgcmVncmEgcHJldmFsZWNlIHBhcmEgdmFsb3JlcyBtw6F4aW1vcy5cbiAgICovXG4gIEBJbnB1dCgncC1yYW5nZXMnKSBzZXQgcmFuZ2VzKHZhbHVlOiBBcnJheTxQb0dhdWdlUmFuZ2VzPikge1xuICAgIHRoaXMuX3JhbmdlcyA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdGhpcy52ZXJpZnlDb2xvcnModmFsdWUpIDogW107XG4gICAgdGhpcy5zdmdDb250YWluZXJTaXplKCk7XG4gIH1cblxuICBnZXQgcmFuZ2VzKCk6IEFycmF5PFBvR2F1Z2VSYW5nZXM+IHtcbiAgICByZXR1cm4gdGhpcy5fcmFuZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIG8gdMOtdHVsbyBkbyBnYXVnZS5cbiAgICovXG4gIEBJbnB1dCgncC10aXRsZScpIHNldCB0aXRsZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fdGl0bGUgPSB2YWx1ZTtcblxuICAgIHRoaXMuc3ZnQ29udGFpbmVyU2l6ZSgpO1xuICB9XG5cbiAgZ2V0IHRpdGxlKCkge1xuICAgIHJldHVybiB0aGlzLl90aXRsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFZhbG9yIHJlZmVyZW50ZSBhbyB2YWxvciBkYSBzw6lyaWUuIFNldSBjb21wb3J0YW1lbnRvIHNlZ3VlIGEgc2VndWludGVzIHJlZ3JhczpcbiAgICpcbiAgICogLSBTZW0gYHAtcmFuZ2VzYDogT3MgdmFsb3JlcyBwYXNzYWRvcyBwYXJhIGBwLXZhbHVlYCBlIGBwLWRlc2NyaXB0aW9uYCBzZXLDo28gY2VudHJhbGl6YWRvcyBubyBpbnRlcmlvciBkbyBhcmNvLlxuICAgKiBBIGJhc2UgZG8gdmFsb3Igc2Vyw6EgcGVyY2VudHVhbCB0ZW5kbyBjb21vIGJhc2Ugb3MgYWxjYW5jZXMgZW50cmUgemVybyBlIDEwMCUuIFNlIHBhc3NhZG8gdW0gdmFsb3Igc3VwZXJpb3IgYSAxMDAsXG4gICAqIEEgY29sb3JpemHDp8OjbyBkbyBnYXVnZSBzZXLDoSBjb21wbGV0YSBlIG8gdmFsb3IgcGFzc2FkbyBzZXLDoSBleGliaWRvIG5vIGludGVyaW9yIGRvIGFyY28uXG4gICAqIC0gQ29tIGBwLXJhbmdlc2A6IEEgZGVzY3Jpw6fDo28gc2Vyw6EgZXhpYmlkYSBhY2ltYSBkbyBnYXVnZSBlIGhhdmVyw6EgdW0gcG9udGVpcm8gbWFyY2FuZG8gbyB2YWxvciBwYXNzYWRvIGVtIGBwLXZhbHVlYC5cbiAgICogQ29uc2lkZXJhbmRvIHF1ZSBvIGFsY2FuY2UgZW0gYHJhbmdlc2Agw6kgYWJlcnRvLCBlbnTDo28gYSBlc2NhbGEgZGUgYHAtdmFsdWVgIHNlcsOhIGVtIHJlbGHDp8OjbyBhbyBtZW5vci9tYWlvciBhbGNhbmNlXG4gICAqIGFic29sdXRvIGRlZmluaWRvIGVtIGBwLXJhbmdlc2AuXG4gICAqIFNlIHBhc3NhZG8gdW0gYHAtdmFsdWVgIGluZmVyaW9yIGVtIHJlbGHDp8OjbyBhbyBtw61uaW1vIHZhbG9yIGRlZmluaWRvIGVtIGBwLXJhbmdlc2AsIG8gZG9tw61uaW8gbcOtbmltbyBkbyBnYXVnZSBwYXJ0aXLDoSBkZSBgcC12YWx1ZWAuXG4gICAqIEEgbWVzbWEgcmVncmEgcHJldmFsZWNlIHBhcmEgdmFsb3JlcyBtw6F4aW1vcy5cbiAgICpcbiAgICovXG4gIEBJbnB1dCgncC12YWx1ZScpIHNldCB2YWx1ZShnYXVnZVZhbHVlOiBudW1iZXIpIHtcbiAgICBpZiAodHlwZW9mIGdhdWdlVmFsdWUgPT09ICdudW1iZXInIHx8ICh0eXBlb2YgZ2F1Z2VWYWx1ZSA9PT0gJ3N0cmluZycgJiYgKDxzdHJpbmc+Z2F1Z2VWYWx1ZSkudHJpbSgpKSkge1xuICAgICAgY29uc3QgdmFsdWUgPSAhaXNOYU4oZ2F1Z2VWYWx1ZSkgPyBOdW1iZXIoZ2F1Z2VWYWx1ZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3ZhbHVlID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIGdldCB2YWx1ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBjb2xvclNlcnZpY2U6IFBvQ29sb3JTZXJ2aWNlKSB7fVxuXG4gIHByaXZhdGUgdmVyaWZ5Q29sb3JzKHJhbmdlczogQXJyYXk8UG9HYXVnZVJhbmdlcz4pIHtcbiAgICByZXR1cm4gdGhpcy5jb2xvclNlcnZpY2UuZ2V0Q29sb3JzPFBvR2F1Z2VSYW5nZXM+KHJhbmdlcyk7XG4gIH1cblxuICBwcml2YXRlIHNldEdhdWdlSGVpZ2h0KGhlaWdodDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBnYXVnZUhlaWdodCA9IGNvbnZlcnRUb0ludChoZWlnaHQpO1xuXG4gICAgcmV0dXJuIGdhdWdlSGVpZ2h0ICYmIGdhdWdlSGVpZ2h0ID4gcG9HYXVnZU1pbkhlaWdodCA/IGdhdWdlSGVpZ2h0IDogcG9HYXVnZU1pbkhlaWdodDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBzdmdDb250YWluZXJTaXplKCk6IHZvaWQ7XG59XG4iXX0=