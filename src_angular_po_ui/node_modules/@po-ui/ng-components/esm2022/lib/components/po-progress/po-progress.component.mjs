import { ChangeDetectionStrategy, Component, inject } from '@angular/core';
import { PoProgressBaseComponent } from './po-progress-base.component';
import { PoProgressStatus } from './enums/po-progress-status.enum';
import { PoLanguageService } from '../../services/po-language/po-language.service';
import { poProgressLiterals } from './literals/po-progress.literals';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../po-button/po-button.component";
import * as i3 from "../po-icon/po-icon.component";
import * as i4 from "../po-label/po-label.component";
import * as i5 from "./po-progress-bar/po-progress-bar.component";
function PoProgressComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵelement(1, "po-label", 13);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("p-label", ctx_r0.text);
} }
function PoProgressComponent_po_icon_5_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-icon", 14);
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("po-progress-info-icon-error", ctx_r1.status === "error");
    i0.ɵɵproperty("p-icon", ctx_r1.infoIcon);
} }
function PoProgressComponent_po_icon_6_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-icon", 15);
} }
function PoProgressComponent_span_7_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 16);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("po-progress-info-text-error", ctx_r3.status === "error");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r3.info);
} }
function PoProgressComponent_span_9_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1("", ctx_r4.value, "%");
} }
function PoProgressComponent_po_button_10_Template(rf, ctx) { if (rf & 1) {
    const _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "po-button", 17);
    i0.ɵɵlistener("p-click", function PoProgressComponent_po_button_10_Template_po_button_p_click_0_listener() { i0.ɵɵrestoreView(_r8); const ctx_r7 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r7.emitRetry()); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r5 = i0.ɵɵnextContext();
    i0.ɵɵproperty("p-aria-label", ctx_r5.literals.retry);
} }
function PoProgressComponent_po_button_11_Template(rf, ctx) { if (rf & 1) {
    const _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "po-button", 18);
    i0.ɵɵlistener("p-click", function PoProgressComponent_po_button_11_Template_po_button_p_click_0_listener() { i0.ɵɵrestoreView(_r10); const ctx_r9 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r9.emitCancellation()); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r6 = i0.ɵɵnextContext();
    i0.ɵɵproperty("p-aria-label", ctx_r6.literals.cancel)("p-danger", true);
} }
/**
 * @docsExtends PoProgressBaseComponent
 *
 * @example
 * <example name="po-progress-basic" title="PO Progress Basic">
 *   <file name="sample-po-progress-basic/sample-po-progress-basic.component.html"> </file>
 *   <file name="sample-po-progress-basic/sample-po-progress-basic.component.ts"> </file>
 * </example>
 *
 * <example name="po-progress-labs" title="PO Progress Labs">
 *   <file name="sample-po-progress-labs/sample-po-progress-labs.component.html"> </file>
 *   <file name="sample-po-progress-labs/sample-po-progress-labs.component.ts"> </file>
 * </example>
 *
 * <example name="po-progress-publication" title="PO Progress - Publication">
 *   <file name="sample-po-progress-publication/sample-po-progress-publication.component.html"> </file>
 *   <file name="sample-po-progress-publication/sample-po-progress-publication.component.ts"> </file>
 * </example>
 */
export class PoProgressComponent extends PoProgressBaseComponent {
    language;
    literals;
    get isAllowCancel() {
        return !!this.cancel.observers.length && this.status !== PoProgressStatus.Success;
    }
    get isAllowInfoError() {
        return !!(!this.infoIcon && this.info && this.status === PoProgressStatus.Error);
    }
    get isAllowRetry() {
        return !!this.retry.observers.length && this.status === PoProgressStatus.Error;
    }
    get statusClass() {
        if (this.status === PoProgressStatus.Success) {
            return 'po-progress-success';
        }
        if (this.status === PoProgressStatus.Error) {
            return 'po-progress-error';
        }
        return 'po-progress-default';
    }
    poLanguageService = inject(PoLanguageService);
    ngOnInit() {
        this.language = this.poLanguageService.getShortLanguage();
        this.literals = {
            ...poProgressLiterals[this.language]
        };
    }
    emitCancellation() {
        this.cancel.emit(this.status);
    }
    emitRetry() {
        this.retry.emit();
    }
    static ɵfac = /*@__PURE__*/ (() => { let ɵPoProgressComponent_BaseFactory; return function PoProgressComponent_Factory(t) { return (ɵPoProgressComponent_BaseFactory || (ɵPoProgressComponent_BaseFactory = i0.ɵɵgetInheritedFactory(PoProgressComponent)))(t || PoProgressComponent); }; })();
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoProgressComponent, selectors: [["po-progress"]], features: [i0.ɵɵInheritDefinitionFeature], decls: 12, vars: 13, consts: [[1, "po-progress", 3, "ngClass"], ["class", "po-progress-description", 4, "ngIf"], [3, "p-indeterminate", "p-value"], [1, "po-progress-info"], [1, "po-progress-info-left"], [3, "p-icon", "po-progress-info-icon-error", 4, "ngIf"], ["p-icon", "ICON_EXCLAMATION", "class", "po-progress-info-icon-error", 4, "ngIf"], ["class", "po-progress-info-text", 3, "po-progress-info-text-error", 4, "ngIf"], [1, "po-progress-info-right"], [4, "ngIf"], ["p-icon", "ICON_REFRESH", "p-kind", "tertiary", 3, "p-aria-label", "p-click", 4, "ngIf"], ["p-icon", "ICON_CLOSE", "p-kind", "secondary", 3, "p-aria-label", "p-danger", "p-click", 4, "ngIf"], [1, "po-progress-description"], [3, "p-label"], [3, "p-icon"], ["p-icon", "ICON_EXCLAMATION", 1, "po-progress-info-icon-error"], [1, "po-progress-info-text"], ["p-icon", "ICON_REFRESH", "p-kind", "tertiary", 3, "p-aria-label", "p-click"], ["p-icon", "ICON_CLOSE", "p-kind", "secondary", 3, "p-aria-label", "p-danger", "p-click"]], template: function PoProgressComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵelementStart(0, "div", 0);
            i0.ɵɵtemplate(1, PoProgressComponent_div_1_Template, 2, 1, "div", 1);
            i0.ɵɵelement(2, "po-progress-bar", 2);
            i0.ɵɵelementStart(3, "div", 3)(4, "div", 4);
            i0.ɵɵtemplate(5, PoProgressComponent_po_icon_5_Template, 1, 3, "po-icon", 5)(6, PoProgressComponent_po_icon_6_Template, 1, 0, "po-icon", 6)(7, PoProgressComponent_span_7_Template, 2, 3, "span", 7);
            i0.ɵɵelementEnd();
            i0.ɵɵelementStart(8, "div", 8);
            i0.ɵɵtemplate(9, PoProgressComponent_span_9_Template, 2, 1, "span", 9)(10, PoProgressComponent_po_button_10_Template, 1, 1, "po-button", 10)(11, PoProgressComponent_po_button_11_Template, 1, 2, "po-button", 11);
            i0.ɵɵelementEnd()()();
        } if (rf & 2) {
            i0.ɵɵproperty("ngClass", ctx.statusClass);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.text);
            i0.ɵɵadvance();
            i0.ɵɵclassMapInterpolate1("po-progress-bar po-progress-bar-", ctx.size, "");
            i0.ɵɵproperty("p-indeterminate", ctx.indeterminate)("p-value", ctx.value);
            i0.ɵɵadvance(3);
            i0.ɵɵproperty("ngIf", ctx.infoIcon);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.isAllowInfoError);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.info);
            i0.ɵɵadvance(2);
            i0.ɵɵproperty("ngIf", ctx.showPercentage && !ctx.indeterminate);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.isAllowRetry);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.isAllowCancel);
        } }, dependencies: [i1.NgClass, i1.NgIf, i2.PoButtonComponent, i3.PoIconComponent, i4.PoLabelComponent, i5.PoProgressBarComponent], encapsulation: 2, changeDetection: 0 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoProgressComponent, [{
        type: Component,
        args: [{ selector: 'po-progress', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"po-progress\" [ngClass]=\"statusClass\">\n  <div *ngIf=\"text\" class=\"po-progress-description\">\n    <po-label [p-label]=\"text\"></po-label>\n  </div>\n\n  <po-progress-bar\n    class=\"po-progress-bar po-progress-bar-{{ size }}\"\n    [p-indeterminate]=\"indeterminate\"\n    [p-value]=\"value\"\n  >\n  </po-progress-bar>\n\n  <div class=\"po-progress-info\">\n    <div class=\"po-progress-info-left\">\n      <po-icon *ngIf=\"infoIcon\" [p-icon]=\"infoIcon\" [class.po-progress-info-icon-error]=\"status === 'error'\"></po-icon>\n      <po-icon *ngIf=\"isAllowInfoError\" p-icon=\"ICON_EXCLAMATION\" class=\"po-progress-info-icon-error\"></po-icon>\n      <span *ngIf=\"info\" class=\"po-progress-info-text\" [class.po-progress-info-text-error]=\"status === 'error'\">{{\n        info\n      }}</span>\n    </div>\n    <div class=\"po-progress-info-right\">\n      <span *ngIf=\"showPercentage && !indeterminate\">{{ value }}%</span>\n      <po-button\n        *ngIf=\"isAllowRetry\"\n        p-icon=\"ICON_REFRESH\"\n        (p-click)=\"emitRetry()\"\n        [p-aria-label]=\"literals.retry\"\n        p-kind=\"tertiary\"\n      ></po-button>\n\n      <po-button\n        *ngIf=\"isAllowCancel\"\n        p-icon=\"ICON_CLOSE\"\n        (p-click)=\"emitCancellation()\"\n        p-kind=\"secondary\"\n        [p-aria-label]=\"literals.cancel\"\n        [p-danger]=\"true\"\n      ></po-button>\n    </div>\n  </div>\n</div>\n" }]
    }], null, null); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoProgressComponent, { className: "PoProgressComponent", filePath: "lib/components/po-progress/po-progress.component.ts", lineNumber: 32 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcHJvZ3Jlc3MuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9jb21wb25lbnRzL3BvLXByb2dyZXNzL3BvLXByb2dyZXNzLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1wcm9ncmVzcy9wby1wcm9ncmVzcy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsU0FBUyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVuRixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUNuRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUNuRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQzs7Ozs7Ozs7SUNKbkUsK0JBQWtEO0lBQ2hELCtCQUFzQztJQUN4QyxpQkFBTTs7O0lBRE0sY0FBZ0I7SUFBaEIscUNBQWdCOzs7SUFZeEIsOEJBQWlIOzs7SUFBbkUsd0VBQXdEO0lBQTVFLHdDQUFtQjs7O0lBQzdDLDhCQUEwRzs7O0lBQzFHLGdDQUEwRztJQUFBLFlBRXhHO0lBQUEsaUJBQU87OztJQUZ3Qyx3RUFBd0Q7SUFBQyxjQUV4RztJQUZ3RyxpQ0FFeEc7OztJQUdGLDRCQUErQztJQUFBLFlBQVk7SUFBQSxpQkFBTzs7O0lBQW5CLGNBQVk7SUFBWiw0Q0FBWTs7OztJQUMzRCxxQ0FNQztJQUhDLDhLQUFXLGVBQUEsa0JBQVcsQ0FBQSxJQUFDO0lBR3hCLGlCQUFZOzs7SUFGWCxvREFBK0I7Ozs7SUFJakMscUNBT0M7SUFKQywrS0FBVyxlQUFBLHlCQUFrQixDQUFBLElBQUM7SUFJL0IsaUJBQVk7OztJQUZYLHFEQUFnQyxrQkFBQTs7QUQ1QnhDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FrQkc7QUFNSCxNQUFNLE9BQU8sbUJBQW9CLFNBQVEsdUJBQXVCO0lBQzlELFFBQVEsQ0FBQztJQUNULFFBQVEsQ0FBQztJQUVULElBQUksYUFBYTtRQUNmLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLGdCQUFnQixDQUFDLE9BQU8sQ0FBQztJQUNwRixDQUFDO0lBRUQsSUFBSSxnQkFBZ0I7UUFDbEIsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25GLENBQUM7SUFFRCxJQUFJLFlBQVk7UUFDZCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUM7SUFDakYsQ0FBQztJQUVELElBQUksV0FBVztRQUNiLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7WUFDNUMsT0FBTyxxQkFBcUIsQ0FBQztTQUM5QjtRQUVELElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUU7WUFDMUMsT0FBTyxtQkFBbUIsQ0FBQztTQUM1QjtRQUVELE9BQU8scUJBQXFCLENBQUM7SUFDL0IsQ0FBQztJQUVPLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBRXRELFFBQVE7UUFDTixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRTFELElBQUksQ0FBQyxRQUFRLEdBQUc7WUFDZCxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7U0FDckMsQ0FBQztJQUNKLENBQUM7SUFFRCxnQkFBZ0I7UUFDZCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVELFNBQVM7UUFDUCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3BCLENBQUM7eU9BNUNVLG1CQUFtQixTQUFuQixtQkFBbUI7NkRBQW5CLG1CQUFtQjtZQy9CaEMsOEJBQWlEO1lBQy9DLG9FQUVNO1lBRU4scUNBS2tCO1lBRWxCLDhCQUE4QixhQUFBO1lBRTFCLDRFQUFpSCwrREFBQSx5REFBQTtZQUtuSCxpQkFBTTtZQUNOLDhCQUFvQztZQUNsQyxzRUFBa0Usc0VBQUEsc0VBQUE7WUFpQnBFLGlCQUFNLEVBQUEsRUFBQTs7WUF0Q2UseUNBQXVCO1lBQ3hDLGNBQVU7WUFBViwrQkFBVTtZQUtkLGNBQWtEO1lBQWxELDJFQUFrRDtZQUNsRCxtREFBaUMsc0JBQUE7WUFPckIsZUFBYztZQUFkLG1DQUFjO1lBQ2QsY0FBc0I7WUFBdEIsMkNBQXNCO1lBQ3pCLGNBQVU7WUFBViwrQkFBVTtZQUtWLGVBQXNDO1lBQXRDLCtEQUFzQztZQUUxQyxjQUFrQjtZQUFsQix1Q0FBa0I7WUFRbEIsY0FBbUI7WUFBbkIsd0NBQW1COzs7aUZEQWYsbUJBQW1CO2NBTC9CLFNBQVM7MkJBQ0UsYUFBYSxtQkFFTix1QkFBdUIsQ0FBQyxNQUFNOztrRkFFcEMsbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgT25Jbml0LCBpbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9Qcm9ncmVzc0Jhc2VDb21wb25lbnQgfSBmcm9tICcuL3BvLXByb2dyZXNzLWJhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFBvUHJvZ3Jlc3NTdGF0dXMgfSBmcm9tICcuL2VudW1zL3BvLXByb2dyZXNzLXN0YXR1cy5lbnVtJztcbmltcG9ydCB7IFBvTGFuZ3VhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvcG8tbGFuZ3VhZ2UvcG8tbGFuZ3VhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBwb1Byb2dyZXNzTGl0ZXJhbHMgfSBmcm9tICcuL2xpdGVyYWxzL3BvLXByb2dyZXNzLmxpdGVyYWxzJztcblxuLyoqXG4gKiBAZG9jc0V4dGVuZHMgUG9Qcm9ncmVzc0Jhc2VDb21wb25lbnRcbiAqXG4gKiBAZXhhbXBsZVxuICogPGV4YW1wbGUgbmFtZT1cInBvLXByb2dyZXNzLWJhc2ljXCIgdGl0bGU9XCJQTyBQcm9ncmVzcyBCYXNpY1wiPlxuICogICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLXByb2dyZXNzLWJhc2ljL3NhbXBsZS1wby1wcm9ncmVzcy1iYXNpYy5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tcHJvZ3Jlc3MtYmFzaWMvc2FtcGxlLXBvLXByb2dyZXNzLWJhc2ljLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInBvLXByb2dyZXNzLWxhYnNcIiB0aXRsZT1cIlBPIFByb2dyZXNzIExhYnNcIj5cbiAqICAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wcm9ncmVzcy1sYWJzL3NhbXBsZS1wby1wcm9ncmVzcy1sYWJzLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wcm9ncmVzcy1sYWJzL3NhbXBsZS1wby1wcm9ncmVzcy1sYWJzLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInBvLXByb2dyZXNzLXB1YmxpY2F0aW9uXCIgdGl0bGU9XCJQTyBQcm9ncmVzcyAtIFB1YmxpY2F0aW9uXCI+XG4gKiAgIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tcHJvZ3Jlc3MtcHVibGljYXRpb24vc2FtcGxlLXBvLXByb2dyZXNzLXB1YmxpY2F0aW9uLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cbiAqICAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wcm9ncmVzcy1wdWJsaWNhdGlvbi9zYW1wbGUtcG8tcHJvZ3Jlc3MtcHVibGljYXRpb24uY29tcG9uZW50LnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncG8tcHJvZ3Jlc3MnLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tcHJvZ3Jlc3MuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBQb1Byb2dyZXNzQ29tcG9uZW50IGV4dGVuZHMgUG9Qcm9ncmVzc0Jhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBsYW5ndWFnZTtcbiAgbGl0ZXJhbHM7XG5cbiAgZ2V0IGlzQWxsb3dDYW5jZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5jYW5jZWwub2JzZXJ2ZXJzLmxlbmd0aCAmJiB0aGlzLnN0YXR1cyAhPT0gUG9Qcm9ncmVzc1N0YXR1cy5TdWNjZXNzO1xuICB9XG5cbiAgZ2V0IGlzQWxsb3dJbmZvRXJyb3IoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhKCF0aGlzLmluZm9JY29uICYmIHRoaXMuaW5mbyAmJiB0aGlzLnN0YXR1cyA9PT0gUG9Qcm9ncmVzc1N0YXR1cy5FcnJvcik7XG4gIH1cblxuICBnZXQgaXNBbGxvd1JldHJ5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMucmV0cnkub2JzZXJ2ZXJzLmxlbmd0aCAmJiB0aGlzLnN0YXR1cyA9PT0gUG9Qcm9ncmVzc1N0YXR1cy5FcnJvcjtcbiAgfVxuXG4gIGdldCBzdGF0dXNDbGFzcygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gUG9Qcm9ncmVzc1N0YXR1cy5TdWNjZXNzKSB7XG4gICAgICByZXR1cm4gJ3BvLXByb2dyZXNzLXN1Y2Nlc3MnO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gUG9Qcm9ncmVzc1N0YXR1cy5FcnJvcikge1xuICAgICAgcmV0dXJuICdwby1wcm9ncmVzcy1lcnJvcic7XG4gICAgfVxuXG4gICAgcmV0dXJuICdwby1wcm9ncmVzcy1kZWZhdWx0JztcbiAgfVxuXG4gIHByaXZhdGUgcG9MYW5ndWFnZVNlcnZpY2UgPSBpbmplY3QoUG9MYW5ndWFnZVNlcnZpY2UpO1xuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMubGFuZ3VhZ2UgPSB0aGlzLnBvTGFuZ3VhZ2VTZXJ2aWNlLmdldFNob3J0TGFuZ3VhZ2UoKTtcblxuICAgIHRoaXMubGl0ZXJhbHMgPSB7XG4gICAgICAuLi5wb1Byb2dyZXNzTGl0ZXJhbHNbdGhpcy5sYW5ndWFnZV1cbiAgICB9O1xuICB9XG5cbiAgZW1pdENhbmNlbGxhdGlvbigpIHtcbiAgICB0aGlzLmNhbmNlbC5lbWl0KHRoaXMuc3RhdHVzKTtcbiAgfVxuXG4gIGVtaXRSZXRyeSgpIHtcbiAgICB0aGlzLnJldHJ5LmVtaXQoKTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cInBvLXByb2dyZXNzXCIgW25nQ2xhc3NdPVwic3RhdHVzQ2xhc3NcIj5cbiAgPGRpdiAqbmdJZj1cInRleHRcIiBjbGFzcz1cInBvLXByb2dyZXNzLWRlc2NyaXB0aW9uXCI+XG4gICAgPHBvLWxhYmVsIFtwLWxhYmVsXT1cInRleHRcIj48L3BvLWxhYmVsPlxuICA8L2Rpdj5cblxuICA8cG8tcHJvZ3Jlc3MtYmFyXG4gICAgY2xhc3M9XCJwby1wcm9ncmVzcy1iYXIgcG8tcHJvZ3Jlc3MtYmFyLXt7IHNpemUgfX1cIlxuICAgIFtwLWluZGV0ZXJtaW5hdGVdPVwiaW5kZXRlcm1pbmF0ZVwiXG4gICAgW3AtdmFsdWVdPVwidmFsdWVcIlxuICA+XG4gIDwvcG8tcHJvZ3Jlc3MtYmFyPlxuXG4gIDxkaXYgY2xhc3M9XCJwby1wcm9ncmVzcy1pbmZvXCI+XG4gICAgPGRpdiBjbGFzcz1cInBvLXByb2dyZXNzLWluZm8tbGVmdFwiPlxuICAgICAgPHBvLWljb24gKm5nSWY9XCJpbmZvSWNvblwiIFtwLWljb25dPVwiaW5mb0ljb25cIiBbY2xhc3MucG8tcHJvZ3Jlc3MtaW5mby1pY29uLWVycm9yXT1cInN0YXR1cyA9PT0gJ2Vycm9yJ1wiPjwvcG8taWNvbj5cbiAgICAgIDxwby1pY29uICpuZ0lmPVwiaXNBbGxvd0luZm9FcnJvclwiIHAtaWNvbj1cIklDT05fRVhDTEFNQVRJT05cIiBjbGFzcz1cInBvLXByb2dyZXNzLWluZm8taWNvbi1lcnJvclwiPjwvcG8taWNvbj5cbiAgICAgIDxzcGFuICpuZ0lmPVwiaW5mb1wiIGNsYXNzPVwicG8tcHJvZ3Jlc3MtaW5mby10ZXh0XCIgW2NsYXNzLnBvLXByb2dyZXNzLWluZm8tdGV4dC1lcnJvcl09XCJzdGF0dXMgPT09ICdlcnJvcidcIj57e1xuICAgICAgICBpbmZvXG4gICAgICB9fTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicG8tcHJvZ3Jlc3MtaW5mby1yaWdodFwiPlxuICAgICAgPHNwYW4gKm5nSWY9XCJzaG93UGVyY2VudGFnZSAmJiAhaW5kZXRlcm1pbmF0ZVwiPnt7IHZhbHVlIH19JTwvc3Bhbj5cbiAgICAgIDxwby1idXR0b25cbiAgICAgICAgKm5nSWY9XCJpc0FsbG93UmV0cnlcIlxuICAgICAgICBwLWljb249XCJJQ09OX1JFRlJFU0hcIlxuICAgICAgICAocC1jbGljayk9XCJlbWl0UmV0cnkoKVwiXG4gICAgICAgIFtwLWFyaWEtbGFiZWxdPVwibGl0ZXJhbHMucmV0cnlcIlxuICAgICAgICBwLWtpbmQ9XCJ0ZXJ0aWFyeVwiXG4gICAgICA+PC9wby1idXR0b24+XG5cbiAgICAgIDxwby1idXR0b25cbiAgICAgICAgKm5nSWY9XCJpc0FsbG93Q2FuY2VsXCJcbiAgICAgICAgcC1pY29uPVwiSUNPTl9DTE9TRVwiXG4gICAgICAgIChwLWNsaWNrKT1cImVtaXRDYW5jZWxsYXRpb24oKVwiXG4gICAgICAgIHAta2luZD1cInNlY29uZGFyeVwiXG4gICAgICAgIFtwLWFyaWEtbGFiZWxdPVwibGl0ZXJhbHMuY2FuY2VsXCJcbiAgICAgICAgW3AtZGFuZ2VyXT1cInRydWVcIlxuICAgICAgPjwvcG8tYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19