import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { convertToBoolean, convertToInt } from '../../utils/util';
import { PoProgressStatus } from './enums/po-progress-status.enum';
import { PoProgressSize } from './enums/po-progress-size.enum';
import * as i0 from "@angular/core";
const poProgressMaxValue = 100;
const poProgressMinValue = 0;
/**
 * @description
 *
 * Componente de barra de progresso que possibilita exibir visualmente o progresso/carregamento de uma tarefa.
 *
 * Este componente pode ser utilizado no *upload* de arquivos, uma atualização no sistema ou o processamento de uma imagem.
 *
 * #### Tokens customizáveis
 *
 * É possível alterar o estilo do componente usando os seguintes tokens (CSS):
 *
 * > Para maiores informações, acesse o guia [Personalizando o Tema Padrão com Tokens CSS](https://po-ui.io/guides/theme-customization).
 *
 * | Propriedade                            | Descrição                                             | Valor Padrão                                    |
 * |----------------------------------------|-------------------------------------------------------|-------------------------------------------------|
 * | **Default Values**                     |                                                       |                                                 |
 * | `--font-family`                        | Família tipográfica usada                             | `var(--font-family-theme)`                      |
 * | `--text-color`                         | Cor do texto                                          | `var(--color-neutral-dark-90)`                  |
 * | **Error**                              |                                                       |                                                 |
 * | `--text-color-error`                   | Cor do texto no estado error                          | `var(--color-feedback-negative-dark)`           |
 * | `--color-icon-error`                   | Cor do ícone no estado error                          | `var(--color-feedback-negative-dark)`           |
 * | **po-progress-bar**                    |                                                       |                                                 |
 * | `--background-color-tray`              | Cor do background                                     | `var(--color-brand-01-lightest)`                |
 * | `--background-color-indicator`         | Cor do background do indicador                        | `var(--color-action-default)`                   |
 *
 */
export class PoProgressBaseComponent {
    /**
     * @optional
     *
     * @description
     *
     * Informação adicional que aparecerá abaixo da barra de progresso ao lado direito.
     */
    info;
    /**
     * @optional
     *
     * @description
     *
     * Ícone que aparecerá ao lado do texto da propriedade `p-info`.
     *
     * Exemplo: `po-icon-ok`.
     */
    infoIcon;
    /**
     * @optional
     *
     * @description
     *
     * Status da barra de progresso que indicará visualmente ao usuário
     * o andamento, por exemplo, se a mesma foi concluída com sucesso.
     *
     * @default `PoProgressStatus.Default`
     */
    status = PoProgressStatus.Default;
    /**
     * @optional
     *
     * @description
     *
     * Texto principal que aparecerá abaixo da barra de progresso no lado esquerdo.
     */
    text;
    /**
     * @optional
     *
     * @description
     *
     * Evento que será disparado ao clicar no ícone de cancelamento ("x") na parte inferior da barra de progresso.
     *
     * Ao ser disparado, a função receberá como parâmetro o status atual da barra de progresso.
     *
     * > Se nenhuma função for passada para o evento ou a barra de progresso estiver com o status `PoProgressStatus.Success`,
     * o ícone de cancelamento não será exibido.
     */
    cancel = new EventEmitter();
    /**
     * @optional
     *
     * @description
     *
     * Evento que será disparado ao clicar no ícone de tentar novamente na parte inferior da barra de progresso.
     *
     * > o ícone será exibido apenas se informar uma função neste evento e o status da barra de progresso for
     * `PoProgressStatus.Error`.
     */
    retry = new EventEmitter();
    _indeterminate;
    _value = 0;
    _size = 'large';
    /**
     * @optional
     *
     * @description
     *
     * Habilita o modo indeterminado na barra de progresso, que mostra uma animação fixa sem um valor estabelecido.
     *
     * Esta opção pode ser utilizada quando não souber quanto tempo levará para que um processo seja concluído.
     *
     * > Caso esta propriedade e a `p-value` seja habilitada, a propriedade `p-value` será ignorada.
     *
     * @default `false`
     */
    set indeterminate(indeterminate) {
        this._indeterminate = convertToBoolean(indeterminate);
    }
    get indeterminate() {
        return this._indeterminate;
    }
    /**
     * @optional
     *
     * @description
     *
     * Valor que representará o progresso.
     *
     * > Os valores aceitos são números inteiros de `0` à `100`.
     *
     * @default `0`
     */
    set value(value) {
        const integerValue = convertToInt(value, poProgressMinValue);
        const isProgressRangeValue = this.isProgressRangeValue(integerValue);
        this._value = isProgressRangeValue ? integerValue : poProgressMinValue;
    }
    get value() {
        return this._value;
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição do tamanho da altura da barra de progresso.
     *
     * Valores válidos:
     *  - `medium`: tamanho médio
     *  - `large`: tamanho grande
     *
     * @default `large`
     */
    set size(value) {
        this._size = PoProgressSize[value] ? PoProgressSize[value] : PoProgressSize.large;
    }
    get size() {
        return this._size;
    }
    /**
     * @optional
     *
     * @description
     *
     * Ativa a exibição da porcentagem atual da barra de progresso.
     *
     * @default `false`
     */
    showPercentage = false;
    isProgressRangeValue(value) {
        return value >= poProgressMinValue && value <= poProgressMaxValue;
    }
    static ɵfac = function PoProgressBaseComponent_Factory(t) { return new (t || PoProgressBaseComponent)(); };
    static ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoProgressBaseComponent, inputs: { info: [i0.ɵɵInputFlags.None, "p-info", "info"], infoIcon: [i0.ɵɵInputFlags.None, "p-info-icon", "infoIcon"], status: [i0.ɵɵInputFlags.None, "p-status", "status"], text: [i0.ɵɵInputFlags.None, "p-text", "text"], indeterminate: [i0.ɵɵInputFlags.None, "p-indeterminate", "indeterminate"], value: [i0.ɵɵInputFlags.None, "p-value", "value"], size: [i0.ɵɵInputFlags.None, "p-size", "size"], showPercentage: [i0.ɵɵInputFlags.HasDecoratorInputTransform, "p-show-percentage", "showPercentage", convertToBoolean] }, outputs: { cancel: "p-cancel", retry: "p-retry" }, features: [i0.ɵɵInputTransformsFeature] });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoProgressBaseComponent, [{
        type: Directive
    }], null, { info: [{
            type: Input,
            args: ['p-info']
        }], infoIcon: [{
            type: Input,
            args: ['p-info-icon']
        }], status: [{
            type: Input,
            args: ['p-status']
        }], text: [{
            type: Input,
            args: ['p-text']
        }], cancel: [{
            type: Output,
            args: ['p-cancel']
        }], retry: [{
            type: Output,
            args: ['p-retry']
        }], indeterminate: [{
            type: Input,
            args: ['p-indeterminate']
        }], value: [{
            type: Input,
            args: ['p-value']
        }], size: [{
            type: Input,
            args: ['p-size']
        }], showPercentage: [{
            type: Input,
            args: [{ alias: 'p-show-percentage', transform: convertToBoolean }]
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcHJvZ3Jlc3MtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tcHJvZ3Jlc3MvcG8tcHJvZ3Jlc3MtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUVwRixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFbEUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDbkUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLCtCQUErQixDQUFDOztBQUUvRCxNQUFNLGtCQUFrQixHQUFHLEdBQUcsQ0FBQztBQUMvQixNQUFNLGtCQUFrQixHQUFHLENBQUMsQ0FBQztBQUU3Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXlCRztBQUVILE1BQU0sT0FBTyx1QkFBdUI7SUFDbEM7Ozs7OztPQU1HO0lBQ2MsSUFBSSxDQUFVO0lBRS9COzs7Ozs7OztPQVFHO0lBQ21CLFFBQVEsQ0FBOEI7SUFFNUQ7Ozs7Ozs7OztPQVNHO0lBQ2dCLE1BQU0sR0FBcUIsZ0JBQWdCLENBQUMsT0FBTyxDQUFDO0lBRXZFOzs7Ozs7T0FNRztJQUNjLElBQUksQ0FBVTtJQUUvQjs7Ozs7Ozs7Ozs7T0FXRztJQUNpQixNQUFNLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7SUFFbkU7Ozs7Ozs7OztPQVNHO0lBQ2dCLEtBQUssR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUV6RCxjQUFjLENBQVc7SUFDekIsTUFBTSxHQUFZLENBQUMsQ0FBQztJQUNwQixLQUFLLEdBQVcsT0FBTyxDQUFDO0lBRWhDOzs7Ozs7Ozs7Ozs7T0FZRztJQUNILElBQThCLGFBQWEsQ0FBQyxhQUFzQjtRQUNoRSxJQUFJLENBQUMsY0FBYyxHQUFHLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxJQUFJLGFBQWE7UUFDZixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDN0IsQ0FBQztJQUVEOzs7Ozs7Ozs7O09BVUc7SUFDSCxJQUFzQixLQUFLLENBQUMsS0FBYTtRQUN2QyxNQUFNLFlBQVksR0FBRyxZQUFZLENBQUMsS0FBSyxFQUFFLGtCQUFrQixDQUFDLENBQUM7UUFDN0QsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFckUsSUFBSSxDQUFDLE1BQU0sR0FBRyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQztJQUN6RSxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRDs7Ozs7Ozs7Ozs7O09BWUc7SUFDSCxJQUFxQixJQUFJLENBQUMsS0FBYTtRQUNyQyxJQUFJLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDO0lBQ3BGLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVEOzs7Ozs7OztPQVFHO0lBQ2lFLGNBQWMsR0FBWSxLQUFLLENBQUM7SUFFNUYsb0JBQW9CLENBQUMsS0FBYTtRQUN4QyxPQUFPLEtBQUssSUFBSSxrQkFBa0IsSUFBSSxLQUFLLElBQUksa0JBQWtCLENBQUM7SUFDcEUsQ0FBQztpRkFySlUsdUJBQXVCOzZEQUF2Qix1QkFBdUIsaWZBaUpjLGdCQUFnQjs7aUZBakpyRCx1QkFBdUI7Y0FEbkMsU0FBUztnQkFTUyxJQUFJO2tCQUFwQixLQUFLO21CQUFDLFFBQVE7WUFXTyxRQUFRO2tCQUE3QixLQUFLO21CQUFDLGFBQWE7WUFZRCxNQUFNO2tCQUF4QixLQUFLO21CQUFDLFVBQVU7WUFTQSxJQUFJO2tCQUFwQixLQUFLO21CQUFDLFFBQVE7WUFjSyxNQUFNO2tCQUF6QixNQUFNO21CQUFDLFVBQVU7WUFZQyxLQUFLO2tCQUF2QixNQUFNO21CQUFDLFNBQVM7WUFtQmEsYUFBYTtrQkFBMUMsS0FBSzttQkFBQyxpQkFBaUI7WUFtQkYsS0FBSztrQkFBMUIsS0FBSzttQkFBQyxTQUFTO1lBd0JLLElBQUk7a0JBQXhCLEtBQUs7bUJBQUMsUUFBUTtZQWlCcUQsY0FBYztrQkFBakYsS0FBSzttQkFBQyxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRSxTQUFTLEVBQUUsZ0JBQWdCLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIERpcmVjdGl2ZSwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiwgY29udmVydFRvSW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFBvUHJvZ3Jlc3NTdGF0dXMgfSBmcm9tICcuL2VudW1zL3BvLXByb2dyZXNzLXN0YXR1cy5lbnVtJztcbmltcG9ydCB7IFBvUHJvZ3Jlc3NTaXplIH0gZnJvbSAnLi9lbnVtcy9wby1wcm9ncmVzcy1zaXplLmVudW0nO1xuXG5jb25zdCBwb1Byb2dyZXNzTWF4VmFsdWUgPSAxMDA7XG5jb25zdCBwb1Byb2dyZXNzTWluVmFsdWUgPSAwO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIENvbXBvbmVudGUgZGUgYmFycmEgZGUgcHJvZ3Jlc3NvIHF1ZSBwb3NzaWJpbGl0YSBleGliaXIgdmlzdWFsbWVudGUgbyBwcm9ncmVzc28vY2FycmVnYW1lbnRvIGRlIHVtYSB0YXJlZmEuXG4gKlxuICogRXN0ZSBjb21wb25lbnRlIHBvZGUgc2VyIHV0aWxpemFkbyBubyAqdXBsb2FkKiBkZSBhcnF1aXZvcywgdW1hIGF0dWFsaXphw6fDo28gbm8gc2lzdGVtYSBvdSBvIHByb2Nlc3NhbWVudG8gZGUgdW1hIGltYWdlbS5cbiAqXG4gKiAjIyMjIFRva2VucyBjdXN0b21pesOhdmVpc1xuICpcbiAqIMOJIHBvc3PDrXZlbCBhbHRlcmFyIG8gZXN0aWxvIGRvIGNvbXBvbmVudGUgdXNhbmRvIG9zIHNlZ3VpbnRlcyB0b2tlbnMgKENTUyk6XG4gKlxuICogPiBQYXJhIG1haW9yZXMgaW5mb3JtYcOnw7VlcywgYWNlc3NlIG8gZ3VpYSBbUGVyc29uYWxpemFuZG8gbyBUZW1hIFBhZHLDo28gY29tIFRva2VucyBDU1NdKGh0dHBzOi8vcG8tdWkuaW8vZ3VpZGVzL3RoZW1lLWN1c3RvbWl6YXRpb24pLlxuICpcbiAqIHwgUHJvcHJpZWRhZGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBEZXNjcmnDp8OjbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgVmFsb3IgUGFkcsOjbyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgKipEZWZhdWx0IFZhbHVlcyoqICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYC0tZm9udC1mYW1pbHlgICAgICAgICAgICAgICAgICAgICAgICAgfCBGYW3DrWxpYSB0aXBvZ3LDoWZpY2EgdXNhZGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYHZhcigtLWZvbnQtZmFtaWx5LXRoZW1lKWAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgLS10ZXh0LWNvbG9yYCAgICAgICAgICAgICAgICAgICAgICAgICB8IENvciBkbyB0ZXh0byAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYHZhcigtLWNvbG9yLW5ldXRyYWwtZGFyay05MClgICAgICAgICAgICAgICAgICAgfFxuICogfCAqKkVycm9yKiogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgLS10ZXh0LWNvbG9yLWVycm9yYCAgICAgICAgICAgICAgICAgICB8IENvciBkbyB0ZXh0byBubyBlc3RhZG8gZXJyb3IgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYHZhcigtLWNvbG9yLWZlZWRiYWNrLW5lZ2F0aXZlLWRhcmspYCAgICAgICAgICAgfFxuICogfCBgLS1jb2xvci1pY29uLWVycm9yYCAgICAgICAgICAgICAgICAgICB8IENvciBkbyDDrWNvbmUgbm8gZXN0YWRvIGVycm9yICAgICAgICAgICAgICAgICAgICAgICAgICB8IGB2YXIoLS1jb2xvci1mZWVkYmFjay1uZWdhdGl2ZS1kYXJrKWAgICAgICAgICAgIHxcbiAqIHwgKipwby1wcm9ncmVzcy1iYXIqKiAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYC0tYmFja2dyb3VuZC1jb2xvci10cmF5YCAgICAgICAgICAgICAgfCBDb3IgZG8gYmFja2dyb3VuZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGB2YXIoLS1jb2xvci1icmFuZC0wMS1saWdodGVzdClgICAgICAgICAgICAgICAgIHxcbiAqIHwgYC0tYmFja2dyb3VuZC1jb2xvci1pbmRpY2F0b3JgICAgICAgICAgfCBDb3IgZG8gYmFja2dyb3VuZCBkbyBpbmRpY2Fkb3IgICAgICAgICAgICAgICAgICAgICAgICB8IGB2YXIoLS1jb2xvci1hY3Rpb24tZGVmYXVsdClgICAgICAgICAgICAgICAgICAgIHxcbiAqXG4gKi9cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGNsYXNzIFBvUHJvZ3Jlc3NCYXNlQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogSW5mb3JtYcOnw6NvIGFkaWNpb25hbCBxdWUgYXBhcmVjZXLDoSBhYmFpeG8gZGEgYmFycmEgZGUgcHJvZ3Jlc3NvIGFvIGxhZG8gZGlyZWl0by5cbiAgICovXG4gIEBJbnB1dCgncC1pbmZvJykgaW5mbz86IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiDDjWNvbmUgcXVlIGFwYXJlY2Vyw6EgYW8gbGFkbyBkbyB0ZXh0byBkYSBwcm9wcmllZGFkZSBgcC1pbmZvYC5cbiAgICpcbiAgICogRXhlbXBsbzogYHBvLWljb24tb2tgLlxuICAgKi9cbiAgQElucHV0KCdwLWluZm8taWNvbicpIGluZm9JY29uPzogc3RyaW5nIHwgVGVtcGxhdGVSZWY8dm9pZD47XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogU3RhdHVzIGRhIGJhcnJhIGRlIHByb2dyZXNzbyBxdWUgaW5kaWNhcsOhIHZpc3VhbG1lbnRlIGFvIHVzdcOhcmlvXG4gICAqIG8gYW5kYW1lbnRvLCBwb3IgZXhlbXBsbywgc2UgYSBtZXNtYSBmb2kgY29uY2x1w61kYSBjb20gc3VjZXNzby5cbiAgICpcbiAgICogQGRlZmF1bHQgYFBvUHJvZ3Jlc3NTdGF0dXMuRGVmYXVsdGBcbiAgICovXG4gIEBJbnB1dCgncC1zdGF0dXMnKSBzdGF0dXM6IFBvUHJvZ3Jlc3NTdGF0dXMgPSBQb1Byb2dyZXNzU3RhdHVzLkRlZmF1bHQ7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogVGV4dG8gcHJpbmNpcGFsIHF1ZSBhcGFyZWNlcsOhIGFiYWl4byBkYSBiYXJyYSBkZSBwcm9ncmVzc28gbm8gbGFkbyBlc3F1ZXJkby5cbiAgICovXG4gIEBJbnB1dCgncC10ZXh0JykgdGV4dD86IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFdmVudG8gcXVlIHNlcsOhIGRpc3BhcmFkbyBhbyBjbGljYXIgbm8gw61jb25lIGRlIGNhbmNlbGFtZW50byAoXCJ4XCIpIG5hIHBhcnRlIGluZmVyaW9yIGRhIGJhcnJhIGRlIHByb2dyZXNzby5cbiAgICpcbiAgICogQW8gc2VyIGRpc3BhcmFkbywgYSBmdW7Dp8OjbyByZWNlYmVyw6EgY29tbyBwYXLDom1ldHJvIG8gc3RhdHVzIGF0dWFsIGRhIGJhcnJhIGRlIHByb2dyZXNzby5cbiAgICpcbiAgICogPiBTZSBuZW5odW1hIGZ1bsOnw6NvIGZvciBwYXNzYWRhIHBhcmEgbyBldmVudG8gb3UgYSBiYXJyYSBkZSBwcm9ncmVzc28gZXN0aXZlciBjb20gbyBzdGF0dXMgYFBvUHJvZ3Jlc3NTdGF0dXMuU3VjY2Vzc2AsXG4gICAqIG8gw61jb25lIGRlIGNhbmNlbGFtZW50byBuw6NvIHNlcsOhIGV4aWJpZG8uXG4gICAqL1xuICBAT3V0cHV0KCdwLWNhbmNlbCcpIGNhbmNlbDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRXZlbnRvIHF1ZSBzZXLDoSBkaXNwYXJhZG8gYW8gY2xpY2FyIG5vIMOtY29uZSBkZSB0ZW50YXIgbm92YW1lbnRlIG5hIHBhcnRlIGluZmVyaW9yIGRhIGJhcnJhIGRlIHByb2dyZXNzby5cbiAgICpcbiAgICogPiBvIMOtY29uZSBzZXLDoSBleGliaWRvIGFwZW5hcyBzZSBpbmZvcm1hciB1bWEgZnVuw6fDo28gbmVzdGUgZXZlbnRvIGUgbyBzdGF0dXMgZGEgYmFycmEgZGUgcHJvZ3Jlc3NvIGZvclxuICAgKiBgUG9Qcm9ncmVzc1N0YXR1cy5FcnJvcmAuXG4gICAqL1xuICBAT3V0cHV0KCdwLXJldHJ5JykgcmV0cnk6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIHByaXZhdGUgX2luZGV0ZXJtaW5hdGU/OiBib29sZWFuO1xuICBwcml2YXRlIF92YWx1ZT86IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX3NpemU6IHN0cmluZyA9ICdsYXJnZSc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogSGFiaWxpdGEgbyBtb2RvIGluZGV0ZXJtaW5hZG8gbmEgYmFycmEgZGUgcHJvZ3Jlc3NvLCBxdWUgbW9zdHJhIHVtYSBhbmltYcOnw6NvIGZpeGEgc2VtIHVtIHZhbG9yIGVzdGFiZWxlY2lkby5cbiAgICpcbiAgICogRXN0YSBvcMOnw6NvIHBvZGUgc2VyIHV0aWxpemFkYSBxdWFuZG8gbsOjbyBzb3ViZXIgcXVhbnRvIHRlbXBvIGxldmFyw6EgcGFyYSBxdWUgdW0gcHJvY2Vzc28gc2VqYSBjb25jbHXDrWRvLlxuICAgKlxuICAgKiA+IENhc28gZXN0YSBwcm9wcmllZGFkZSBlIGEgYHAtdmFsdWVgIHNlamEgaGFiaWxpdGFkYSwgYSBwcm9wcmllZGFkZSBgcC12YWx1ZWAgc2Vyw6EgaWdub3JhZGEuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICovXG4gIEBJbnB1dCgncC1pbmRldGVybWluYXRlJykgc2V0IGluZGV0ZXJtaW5hdGUoaW5kZXRlcm1pbmF0ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX2luZGV0ZXJtaW5hdGUgPSBjb252ZXJ0VG9Cb29sZWFuKGluZGV0ZXJtaW5hdGUpO1xuICB9XG5cbiAgZ2V0IGluZGV0ZXJtaW5hdGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2luZGV0ZXJtaW5hdGU7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBWYWxvciBxdWUgcmVwcmVzZW50YXLDoSBvIHByb2dyZXNzby5cbiAgICpcbiAgICogPiBPcyB2YWxvcmVzIGFjZWl0b3Mgc8OjbyBuw7ptZXJvcyBpbnRlaXJvcyBkZSBgMGAgw6AgYDEwMGAuXG4gICAqXG4gICAqIEBkZWZhdWx0IGAwYFxuICAgKi9cbiAgQElucHV0KCdwLXZhbHVlJykgc2V0IHZhbHVlKHZhbHVlOiBudW1iZXIpIHtcbiAgICBjb25zdCBpbnRlZ2VyVmFsdWUgPSBjb252ZXJ0VG9JbnQodmFsdWUsIHBvUHJvZ3Jlc3NNaW5WYWx1ZSk7XG4gICAgY29uc3QgaXNQcm9ncmVzc1JhbmdlVmFsdWUgPSB0aGlzLmlzUHJvZ3Jlc3NSYW5nZVZhbHVlKGludGVnZXJWYWx1ZSk7XG5cbiAgICB0aGlzLl92YWx1ZSA9IGlzUHJvZ3Jlc3NSYW5nZVZhbHVlID8gaW50ZWdlclZhbHVlIDogcG9Qcm9ncmVzc01pblZhbHVlO1xuICB9XG5cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluacOnw6NvIGRvIHRhbWFuaG8gZGEgYWx0dXJhIGRhIGJhcnJhIGRlIHByb2dyZXNzby5cbiAgICpcbiAgICogVmFsb3JlcyB2w6FsaWRvczpcbiAgICogIC0gYG1lZGl1bWA6IHRhbWFuaG8gbcOpZGlvXG4gICAqICAtIGBsYXJnZWA6IHRhbWFuaG8gZ3JhbmRlXG4gICAqXG4gICAqIEBkZWZhdWx0IGBsYXJnZWBcbiAgICovXG4gIEBJbnB1dCgncC1zaXplJykgc2V0IHNpemUodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX3NpemUgPSBQb1Byb2dyZXNzU2l6ZVt2YWx1ZV0gPyBQb1Byb2dyZXNzU2l6ZVt2YWx1ZV0gOiBQb1Byb2dyZXNzU2l6ZS5sYXJnZTtcbiAgfVxuXG4gIGdldCBzaXplKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBdGl2YSBhIGV4aWJpw6fDo28gZGEgcG9yY2VudGFnZW0gYXR1YWwgZGEgYmFycmEgZGUgcHJvZ3Jlc3NvLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqL1xuICBASW5wdXQoeyBhbGlhczogJ3Atc2hvdy1wZXJjZW50YWdlJywgdHJhbnNmb3JtOiBjb252ZXJ0VG9Cb29sZWFuIH0pIHNob3dQZXJjZW50YWdlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBpc1Byb2dyZXNzUmFuZ2VWYWx1ZSh2YWx1ZTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHZhbHVlID49IHBvUHJvZ3Jlc3NNaW5WYWx1ZSAmJiB2YWx1ZSA8PSBwb1Byb2dyZXNzTWF4VmFsdWU7XG4gIH1cbn1cbiJdfQ==