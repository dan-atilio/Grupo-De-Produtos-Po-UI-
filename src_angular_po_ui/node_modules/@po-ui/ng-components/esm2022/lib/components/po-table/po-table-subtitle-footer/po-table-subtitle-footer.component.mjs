import { Component, Input } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../po-table-show-subtitle/po-table-show-subtitle.component";
import * as i3 from "../po-table-subtitle-circle/po-table-subtitle-circle.component";
function PoTableSubtitleFooterComponent_div_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3);
    i0.ɵɵelement(1, "po-table-subtitle-circle", 4);
    i0.ɵɵelementStart(2, "span", 5);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const subtitle_r2 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("p-subtitle", subtitle_r2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(subtitle_r2.label);
} }
function PoTableSubtitleFooterComponent_po_table_show_subtitle_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-table-show-subtitle", 6);
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("p-literals", ctx_r1.literals)("p-subtitles", ctx_r1.subtitles);
} }
/**
 * @docsPrivate
 *
 * @description
 *
 * Componente para a criação de um conjunto de legendas.
 */
export class PoTableSubtitleFooterComponent {
    element;
    renderer;
    /** Propriedade que recebe as literais definidas no `po-table`. */
    literals;
    /** Propriedade que recebe as legendas definidas no `PoTableSubtitleCircleComponent`. */
    subtitles;
    showSubtitle;
    resizeListener;
    isVisible;
    timeoutResize;
    constructor(element, renderer) {
        this.element = element;
        this.renderer = renderer;
    }
    ngAfterViewInit() {
        this.initializeResizeListener();
        this.debounceResize();
    }
    ngDoCheck() {
        if (!this.isVisible && this.getContainerSize() > 0) {
            this.toggleShowCompleteSubtitle();
            this.isVisible = true;
        }
    }
    ngOnDestroy() {
        this.removeResizeListener();
    }
    debounceResize() {
        clearTimeout(this.timeoutResize);
        this.timeoutResize = setTimeout(() => {
            this.toggleShowCompleteSubtitle();
        });
    }
    getContainerSize() {
        return this.element.nativeElement.querySelector('.po-table-subtitle-footer-container').offsetWidth;
    }
    getItemsSize() {
        const items = this.element.nativeElement.querySelectorAll('.po-table-subtitle-footer');
        return Array.from(items)
            .map(item => item['offsetWidth'])
            .reduce((a, b) => a + b, 16);
    }
    initializeResizeListener() {
        this.resizeListener = this.renderer.listen('window', 'resize', (event) => {
            this.debounceResize();
        });
    }
    removeResizeListener() {
        this.resizeListener();
    }
    toggleShowCompleteSubtitle() {
        const containerSize = this.getContainerSize();
        const itemsSize = this.getItemsSize();
        this.showSubtitle = itemsSize > containerSize;
    }
    static ɵfac = function PoTableSubtitleFooterComponent_Factory(t) { return new (t || PoTableSubtitleFooterComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2)); };
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoTableSubtitleFooterComponent, selectors: [["po-table-subtitle-footer"]], inputs: { literals: [i0.ɵɵInputFlags.None, "p-literals", "literals"], subtitles: [i0.ɵɵInputFlags.None, "p-subtitles", "subtitles"] }, decls: 3, vars: 2, consts: [[1, "po-table-subtitle-footer-container"], ["class", "po-table-subtitle-footer", 4, "ngFor", "ngForOf"], [3, "p-literals", "p-subtitles", 4, "ngIf"], [1, "po-table-subtitle-footer"], ["p-hide-title", "true", 3, "p-subtitle"], [1, "po-table-subtitle-text"], [3, "p-literals", "p-subtitles"]], template: function PoTableSubtitleFooterComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵelementStart(0, "div", 0);
            i0.ɵɵtemplate(1, PoTableSubtitleFooterComponent_div_1_Template, 4, 2, "div", 1)(2, PoTableSubtitleFooterComponent_po_table_show_subtitle_2_Template, 1, 2, "po-table-show-subtitle", 2);
            i0.ɵɵelementEnd();
        } if (rf & 2) {
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngForOf", ctx.subtitles);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.showSubtitle);
        } }, dependencies: [i1.NgForOf, i1.NgIf, i2.PoTableShowSubtitleComponent, i3.PoTableSubtitleCircleComponent], encapsulation: 2 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoTableSubtitleFooterComponent, [{
        type: Component,
        args: [{ selector: 'po-table-subtitle-footer', template: "<div class=\"po-table-subtitle-footer-container\">\n  <div *ngFor=\"let subtitle of subtitles\" class=\"po-table-subtitle-footer\">\n    <po-table-subtitle-circle p-hide-title=\"true\" [p-subtitle]=\"subtitle\"> </po-table-subtitle-circle>\n    <span class=\"po-table-subtitle-text\">{{ subtitle.label }}</span>\n  </div>\n  <po-table-show-subtitle *ngIf=\"showSubtitle\" [p-literals]=\"literals\" [p-subtitles]=\"subtitles\">\n  </po-table-show-subtitle>\n</div>\n" }]
    }], () => [{ type: i0.ElementRef }, { type: i0.Renderer2 }], { literals: [{
            type: Input,
            args: ['p-literals']
        }], subtitles: [{
            type: Input,
            args: ['p-subtitles']
        }] }); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoTableSubtitleFooterComponent, { className: "PoTableSubtitleFooterComponent", filePath: "lib/components/po-table/po-table-subtitle-footer/po-table-subtitle-footer.component.ts", lineNumber: 16 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdGFibGUtc3VidGl0bGUtZm9vdGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby10YWJsZS9wby10YWJsZS1zdWJ0aXRsZS1mb290ZXIvcG8tdGFibGUtc3VidGl0bGUtZm9vdGVyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby10YWJsZS9wby10YWJsZS1zdWJ0aXRsZS1mb290ZXIvcG8tdGFibGUtc3VidGl0bGUtZm9vdGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBaUIsU0FBUyxFQUF1QixLQUFLLEVBQXdCLE1BQU0sZUFBZSxDQUFDOzs7Ozs7SUNDekcsOEJBQXlFO0lBQ3ZFLDhDQUFrRztJQUNsRywrQkFBcUM7SUFBQSxZQUFvQjtJQUFBLGlCQUFPLEVBQUE7OztJQURsQixjQUF1QjtJQUF2Qix3Q0FBdUI7SUFDaEMsZUFBb0I7SUFBcEIsdUNBQW9COzs7SUFFM0QsNENBQ3lCOzs7SUFEb0IsNENBQXVCLGlDQUFBOztBRER0RTs7Ozs7O0dBTUc7QUFLSCxNQUFNLE9BQU8sOEJBQThCO0lBZS9CO0lBQ0Q7SUFmVCxrRUFBa0U7SUFDN0MsUUFBUSxDQUFDO0lBRTlCLHdGQUF3RjtJQUNsRSxTQUFTLENBQStCO0lBRTlELFlBQVksQ0FBVTtJQUVaLGNBQWMsQ0FBYTtJQUU3QixTQUFTLENBQVU7SUFDbkIsYUFBYSxDQUFDO0lBRXRCLFlBQ1UsT0FBbUIsRUFDcEIsUUFBbUI7UUFEbEIsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQUNwQixhQUFRLEdBQVIsUUFBUSxDQUFXO0lBQ3pCLENBQUM7SUFFSixlQUFlO1FBQ2IsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDaEMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxTQUFTO1FBQ1AsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxFQUFFO1lBQ2xELElBQUksQ0FBQywwQkFBMEIsRUFBRSxDQUFDO1lBQ2xDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1NBQ3ZCO0lBQ0gsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBRU8sY0FBYztRQUNwQixZQUFZLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxhQUFhLEdBQUcsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNuQyxJQUFJLENBQUMsMEJBQTBCLEVBQUUsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyxnQkFBZ0I7UUFDdEIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMscUNBQXFDLENBQUMsQ0FBQyxXQUFXLENBQUM7SUFDckcsQ0FBQztJQUVPLFlBQVk7UUFDbEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUV2RixPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO2FBQ3JCLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUNoQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFTyx3QkFBd0I7UUFDOUIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLENBQUMsS0FBaUIsRUFBRSxFQUFFO1lBQ25GLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN4QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyxvQkFBb0I7UUFDMUIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFTywwQkFBMEI7UUFDaEMsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDOUMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBRXRDLElBQUksQ0FBQyxZQUFZLEdBQUcsU0FBUyxHQUFHLGFBQWEsQ0FBQztJQUNoRCxDQUFDO3dGQXJFVSw4QkFBOEI7NkRBQTlCLDhCQUE4QjtZQ2YzQyw4QkFBZ0Q7WUFDOUMsK0VBR00sd0dBQUE7WUFHUixpQkFBTTs7WUFOc0IsY0FBWTtZQUFaLHVDQUFZO1lBSWIsY0FBa0I7WUFBbEIsdUNBQWtCOzs7aUZEVWhDLDhCQUE4QjtjQUoxQyxTQUFTOzJCQUNFLDBCQUEwQjttRUFLZixRQUFRO2tCQUE1QixLQUFLO21CQUFDLFlBQVk7WUFHRyxTQUFTO2tCQUE5QixLQUFLO21CQUFDLGFBQWE7O2tGQUxULDhCQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIENvbXBvbmVudCwgRG9DaGVjaywgRWxlbWVudFJlZiwgSW5wdXQsIE9uRGVzdHJveSwgUmVuZGVyZXIyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvVGFibGVTdWJ0aXRsZUNvbHVtbiB9IGZyb20gJy4vcG8tdGFibGUtc3VidGl0bGUtY29sdW1uLmludGVyZmFjZSc7XG5cbi8qKlxuICogQGRvY3NQcml2YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogQ29tcG9uZW50ZSBwYXJhIGEgY3JpYcOnw6NvIGRlIHVtIGNvbmp1bnRvIGRlIGxlZ2VuZGFzLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwby10YWJsZS1zdWJ0aXRsZS1mb290ZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tdGFibGUtc3VidGl0bGUtZm9vdGVyLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBQb1RhYmxlU3VidGl0bGVGb290ZXJDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBEb0NoZWNrLCBPbkRlc3Ryb3kge1xuICAvKiogUHJvcHJpZWRhZGUgcXVlIHJlY2ViZSBhcyBsaXRlcmFpcyBkZWZpbmlkYXMgbm8gYHBvLXRhYmxlYC4gKi9cbiAgQElucHV0KCdwLWxpdGVyYWxzJykgbGl0ZXJhbHM7XG5cbiAgLyoqIFByb3ByaWVkYWRlIHF1ZSByZWNlYmUgYXMgbGVnZW5kYXMgZGVmaW5pZGFzIG5vIGBQb1RhYmxlU3VidGl0bGVDaXJjbGVDb21wb25lbnRgLiAqL1xuICBASW5wdXQoJ3Atc3VidGl0bGVzJykgc3VidGl0bGVzOiBBcnJheTxQb1RhYmxlU3VidGl0bGVDb2x1bW4+O1xuXG4gIHNob3dTdWJ0aXRsZTogYm9vbGVhbjtcblxuICBwcm90ZWN0ZWQgcmVzaXplTGlzdGVuZXI6ICgpID0+IHZvaWQ7XG5cbiAgcHJpdmF0ZSBpc1Zpc2libGU6IGJvb2xlYW47XG4gIHByaXZhdGUgdGltZW91dFJlc2l6ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYsXG4gICAgcHVibGljIHJlbmRlcmVyOiBSZW5kZXJlcjJcbiAgKSB7fVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICB0aGlzLmluaXRpYWxpemVSZXNpemVMaXN0ZW5lcigpO1xuICAgIHRoaXMuZGVib3VuY2VSZXNpemUoKTtcbiAgfVxuXG4gIG5nRG9DaGVjaygpIHtcbiAgICBpZiAoIXRoaXMuaXNWaXNpYmxlICYmIHRoaXMuZ2V0Q29udGFpbmVyU2l6ZSgpID4gMCkge1xuICAgICAgdGhpcy50b2dnbGVTaG93Q29tcGxldGVTdWJ0aXRsZSgpO1xuICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMucmVtb3ZlUmVzaXplTGlzdGVuZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVib3VuY2VSZXNpemUoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFJlc2l6ZSk7XG4gICAgdGhpcy50aW1lb3V0UmVzaXplID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnRvZ2dsZVNob3dDb21wbGV0ZVN1YnRpdGxlKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldENvbnRhaW5lclNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wby10YWJsZS1zdWJ0aXRsZS1mb290ZXItY29udGFpbmVyJykub2Zmc2V0V2lkdGg7XG4gIH1cblxuICBwcml2YXRlIGdldEl0ZW1zU2l6ZSgpIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wby10YWJsZS1zdWJ0aXRsZS1mb290ZXInKTtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKGl0ZW1zKVxuICAgICAgLm1hcChpdGVtID0+IGl0ZW1bJ29mZnNldFdpZHRoJ10pXG4gICAgICAucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMTYpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplUmVzaXplTGlzdGVuZXIoKSB7XG4gICAgdGhpcy5yZXNpemVMaXN0ZW5lciA9IHRoaXMucmVuZGVyZXIubGlzdGVuKCd3aW5kb3cnLCAncmVzaXplJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmRlYm91bmNlUmVzaXplKCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZVJlc2l6ZUxpc3RlbmVyKCkge1xuICAgIHRoaXMucmVzaXplTGlzdGVuZXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgdG9nZ2xlU2hvd0NvbXBsZXRlU3VidGl0bGUoKSB7XG4gICAgY29uc3QgY29udGFpbmVyU2l6ZSA9IHRoaXMuZ2V0Q29udGFpbmVyU2l6ZSgpO1xuICAgIGNvbnN0IGl0ZW1zU2l6ZSA9IHRoaXMuZ2V0SXRlbXNTaXplKCk7XG5cbiAgICB0aGlzLnNob3dTdWJ0aXRsZSA9IGl0ZW1zU2l6ZSA+IGNvbnRhaW5lclNpemU7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJwby10YWJsZS1zdWJ0aXRsZS1mb290ZXItY29udGFpbmVyXCI+XG4gIDxkaXYgKm5nRm9yPVwibGV0IHN1YnRpdGxlIG9mIHN1YnRpdGxlc1wiIGNsYXNzPVwicG8tdGFibGUtc3VidGl0bGUtZm9vdGVyXCI+XG4gICAgPHBvLXRhYmxlLXN1YnRpdGxlLWNpcmNsZSBwLWhpZGUtdGl0bGU9XCJ0cnVlXCIgW3Atc3VidGl0bGVdPVwic3VidGl0bGVcIj4gPC9wby10YWJsZS1zdWJ0aXRsZS1jaXJjbGU+XG4gICAgPHNwYW4gY2xhc3M9XCJwby10YWJsZS1zdWJ0aXRsZS10ZXh0XCI+e3sgc3VidGl0bGUubGFiZWwgfX08L3NwYW4+XG4gIDwvZGl2PlxuICA8cG8tdGFibGUtc2hvdy1zdWJ0aXRsZSAqbmdJZj1cInNob3dTdWJ0aXRsZVwiIFtwLWxpdGVyYWxzXT1cImxpdGVyYWxzXCIgW3Atc3VidGl0bGVzXT1cInN1YnRpdGxlc1wiPlxuICA8L3BvLXRhYmxlLXNob3ctc3VidGl0bGU+XG48L2Rpdj5cbiJdfQ==