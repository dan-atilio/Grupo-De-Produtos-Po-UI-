import { Input, EventEmitter, Directive, Output } from '@angular/core';
import { convertToBoolean } from './../../utils/util';
import { poModalLiterals } from './po-modal.literals';
import * as i0 from "@angular/core";
import * as i1 from "../../services/po-language/po-language.service";
/**
 * @description
 *
 * O componente `po-modal` é utilizado para incluir conteúdos rápidos e informativos.
 *
 * No cabeçalho do componente é possível definir um título e como também permite ocultar o ícone de fechamento da modal.
 *
 * Em seu corpo é possível definir um conteúdo informativo, podendo utilizar componentes como por exemplo `po-chart`,
 * `po-table` e os demais componentes do PO.
 *
 * No rodapé encontram-se os botões de ação primária e secundária, no qual permitem definir uma ação e um rótulo, bem como
 * definir um estado de carregando e / ou desabilitado e / ou definir o botão com o tipo *danger*. Também é possível utilizar
 * o componente [`PoModalFooter`](/documentation/po-modal-footer).
 *
 * > É possível fechar a modal através da tecla *ESC*, quando a propriedade `p-hide-close` não estiver habilitada.
 *
 * #### Tokens customizáveis
 *
 * É possível alterar o estilo do componente usando os seguintes tokens (CSS):
 *
 * > Para maiores informações, acesse o guia [Personalizando o Tema Padrão com Tokens CSS](https://po-ui.io/guides/theme-customization).
 *
 * | Propriedade                                  | Descrição                                             | Valor Padrão                                     |
 * |----------------------------------------------|-------------------------------------------------------|--------------------------------------------------|
 * | **Default Values**                           |                                                       |                                                  |
 * | `--border-radius` &nbsp;                     | Contém o valor do raio dos cantos do elemento&nbsp;   | `var(--border-radius-md)`                        |
 * | `--border-width` &nbsp;                      | Contém o valor da largura dos cantos do elemento&nbsp;| `var(--border-width-sm)`                         |
 * | `--border-color` &nbsp;                      | Cor da borda                                          | `var(--color-neutral-light-20)`                  |
 * | `--background` &nbsp;                        | Cor de background                                     | `var(--color-neutral-light-00)`                  |
 * | `--shadow` &nbsp;                            | Contém o valor da sombra do elemento                  | `var(--shadow-md)`                               |
 * | `--color-overlay` &nbsp;                     | Cor da camada visual temporária                       | `var(--color-neutral-dark-80)`                   |
 * | `--opacity-overlay` &nbsp;                   | Opacidade da camada visual temporária &nbsp;          | `0.7`                                            |
 * | `--color-divider` &nbsp;                     | Cor das divisões do modal                             | `var(--color-neutral-light-20)`                  |
 *
 */
export class PoModalBaseComponent {
    /** Título da modal. */
    title;
    /** Evento disparado ao fechar o modal. */
    closeModal = new EventEmitter();
    /**
     * Deve ser definido um objeto que implementa a interface `PoModalAction` contendo a label e a função da primeira ação.
     * Caso esta propriedade não seja definida ou esteja incompleta, automaticamente será adicionado um botão de ação com
     * a função de fechar a modal.
     */
    primaryAction;
    /** Deve ser definido um objeto que implementa a interface `PoModalAction` contendo a label e a função da segunda ação. */
    secondaryAction;
    language;
    literals;
    // Controla se a modal fica oculto ou visível, por padrão é oculto
    isHidden = true;
    // Event emmiter para quando a modal é fechada pelo 'X'.
    onXClosed = new EventEmitter();
    _hideClose = false;
    _size = 'md';
    /**
     * Define o tamanho da modal.
     *
     * Valores válidos:
     *  - `sm` (pequeno)
     *  - `md` (médio)
     *  - `lg` (grande)
     *  - `xl` (extra grande)
     *  - `auto` (automático)
     *
     * > Quando informado `auto` a modal calculará automaticamente seu tamanho baseado em seu conteúdo.
     * Caso não seja informado um valor, a modal terá o tamanho definido como `md`.
     *
     * > Todas as opções de tamanho possuem uma largura máxima de **768px**.
     */
    set size(value) {
        const sizes = ['sm', 'md', 'lg', 'xl', 'auto'];
        this._size = sizes.indexOf(value) > -1 ? value : 'md';
    }
    get size() {
        return this._size;
    }
    /**
     * Define o fechamento da modal ao clicar fora da mesma.
     * Informe o valor `true` para ativar o fechamento ao clicar fora da modal.
     */
    // eslint-disable-next-line @typescript-eslint/member-ordering
    clickOut = false;
    set setClickOut(value) {
        this.clickOut = value === '' ? false : convertToBoolean(value);
    }
    /**
     * @optional
     *
     * @description
     *
     * Oculta o ícone de fechar do cabeçalho da modal.
     *
     * > Caso a propriedade estiver habilitada, não será possível fechar a modal através da tecla *ESC*.
     *
     * @default `false`
     */
    set hideClose(value) {
        this._hideClose = convertToBoolean(value);
    }
    get hideClose() {
        return this._hideClose;
    }
    /**
     * @optional
     *
     * @description
     * Ícone exibido ao lado esquerdo do label do titúlo da modal.
     *
     * É possível usar qualquer um dos ícones da [Biblioteca de ícones](/guides/icons). conforme exemplo abaixo:
     * ```
     * <po-modal p-icon="po-icon-user" p-title="PO Modal"></po-modal>
     * ```
     * Também é possível utilizar outras fontes de ícones, por exemplo a biblioteca *Font Awesome*, da seguinte forma:
     * ```
     * <po-modal p-icon="fa fa-podcast" p-title="PO Modal"></po-modal>
     * ```
     * Outra opção seria a customização do ícone através do `TemplateRef`, conforme exemplo abaixo:
     * ```
     * <po-modal [p-icon]="template" p-title="PO Modal"></po-modal>
     *
     * <ng-template #template>
     *  <ion-icon style="font-size: inherit" name="heart"></ion-icon>
     * </ng-template>
     * ```
     */
    icon;
    constructor(poLanguageService) {
        this.language = poLanguageService.getShortLanguage();
        this.literals = {
            ...poModalLiterals[this.language]
        };
    }
    /** Função para fechar a modal. */
    close(xClosed = false) {
        this.closeModal.emit();
        this.isHidden = true;
        if (xClosed) {
            this.onXClosed.emit(xClosed);
        }
    }
    /** Função para abrir a modal. */
    open() {
        this.validPrimaryAction();
        this.isHidden = false;
    }
    validPrimaryAction() {
        if (!this.primaryAction) {
            this.primaryAction = {
                action: () => this.close(),
                label: this.literals.close
            };
        }
        if (!this.primaryAction['action']) {
            this.primaryAction['action'] = () => this.close();
        }
        if (!this.primaryAction['label']) {
            this.primaryAction['label'] = this.literals.close;
        }
    }
    static ɵfac = function PoModalBaseComponent_Factory(t) { return new (t || PoModalBaseComponent)(i0.ɵɵdirectiveInject(i1.PoLanguageService)); };
    static ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoModalBaseComponent, inputs: { title: [i0.ɵɵInputFlags.None, "p-title", "title"], primaryAction: [i0.ɵɵInputFlags.None, "p-primary-action", "primaryAction"], secondaryAction: [i0.ɵɵInputFlags.None, "p-secondary-action", "secondaryAction"], size: [i0.ɵɵInputFlags.None, "p-size", "size"], setClickOut: [i0.ɵɵInputFlags.None, "p-click-out", "setClickOut"], hideClose: [i0.ɵɵInputFlags.None, "p-hide-close", "hideClose"], icon: [i0.ɵɵInputFlags.None, "p-icon", "icon"] }, outputs: { closeModal: "p-close" } });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoModalBaseComponent, [{
        type: Directive
    }], () => [{ type: i1.PoLanguageService }], { title: [{
            type: Input,
            args: ['p-title']
        }], closeModal: [{
            type: Output,
            args: ['p-close']
        }], primaryAction: [{
            type: Input,
            args: ['p-primary-action']
        }], secondaryAction: [{
            type: Input,
            args: ['p-secondary-action']
        }], size: [{
            type: Input,
            args: ['p-size']
        }], setClickOut: [{
            type: Input,
            args: ['p-click-out']
        }], hideClose: [{
            type: Input,
            args: ['p-hide-close']
        }], icon: [{
            type: Input,
            args: ['p-icon']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tbW9kYWwvcG8tbW9kYWwtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUVwRixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUl0RCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7OztBQUV0RDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWtDRztBQUVILE1BQU0sT0FBTyxvQkFBb0I7SUFDL0IsdUJBQXVCO0lBQ0wsS0FBSyxDQUFTO0lBRWhDLDBDQUEwQztJQUN2QixVQUFVLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7SUFFdEU7Ozs7T0FJRztJQUN3QixhQUFhLENBQWlCO0lBRXpELDBIQUEwSDtJQUM3RixlQUFlLENBQWlCO0lBRTdELFFBQVEsQ0FBQztJQUNULFFBQVEsQ0FBQztJQUVULGtFQUFrRTtJQUNsRSxRQUFRLEdBQUcsSUFBSSxDQUFDO0lBRWhCLHdEQUF3RDtJQUNqRCxTQUFTLEdBQUcsSUFBSSxZQUFZLEVBQVcsQ0FBQztJQUV2QyxVQUFVLEdBQWEsS0FBSyxDQUFDO0lBQzdCLEtBQUssR0FBWSxJQUFJLENBQUM7SUFFOUI7Ozs7Ozs7Ozs7Ozs7O09BY0c7SUFDSCxJQUFxQixJQUFJLENBQUMsS0FBYTtRQUNyQyxNQUFNLEtBQUssR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3hELENBQUM7SUFFRCxJQUFJLElBQUk7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVEOzs7T0FHRztJQUNILDhEQUE4RDtJQUM5RCxRQUFRLEdBQWEsS0FBSyxDQUFDO0lBQzNCLElBQTBCLFdBQVcsQ0FBQyxLQUF1QjtRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVEOzs7Ozs7Ozs7O09BVUc7SUFDSCxJQUEyQixTQUFTLENBQUMsS0FBYztRQUNqRCxJQUFJLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O09Bc0JHO0lBQ2MsSUFBSSxDQUE4QjtJQUVuRCxZQUFZLGlCQUFvQztRQUM5QyxJQUFJLENBQUMsUUFBUSxHQUFHLGlCQUFpQixDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFFckQsSUFBSSxDQUFDLFFBQVEsR0FBRztZQUNkLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7U0FDbEMsQ0FBQztJQUNKLENBQUM7SUFFRCxrQ0FBa0M7SUFDbEMsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLO1FBQ25CLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDckIsSUFBSSxPQUFPLEVBQUU7WUFDWCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUM5QjtJQUNILENBQUM7SUFFRCxpQ0FBaUM7SUFDakMsSUFBSTtRQUNGLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBRTFCLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxrQkFBa0I7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDdkIsSUFBSSxDQUFDLGFBQWEsR0FBRztnQkFDbkIsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQzFCLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUs7YUFDM0IsQ0FBQztTQUNIO1FBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDakMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDbkQ7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNoQyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1NBQ25EO0lBQ0gsQ0FBQzs4RUFsSlUsb0JBQW9COzZEQUFwQixvQkFBb0I7O2lGQUFwQixvQkFBb0I7Y0FEaEMsU0FBUztrREFHVSxLQUFLO2tCQUF0QixLQUFLO21CQUFDLFNBQVM7WUFHRyxVQUFVO2tCQUE1QixNQUFNO21CQUFDLFNBQVM7WUFPVSxhQUFhO2tCQUF2QyxLQUFLO21CQUFDLGtCQUFrQjtZQUdJLGVBQWU7a0JBQTNDLEtBQUs7bUJBQUMsb0JBQW9CO1lBNkJOLElBQUk7a0JBQXhCLEtBQUs7bUJBQUMsUUFBUTtZQWVXLFdBQVc7a0JBQXBDLEtBQUs7bUJBQUMsYUFBYTtZQWVPLFNBQVM7a0JBQW5DLEtBQUs7bUJBQUMsY0FBYztZQStCSixJQUFJO2tCQUFwQixLQUFLO21CQUFDLFFBQVEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dCwgRXZlbnRFbWl0dGVyLCBEaXJlY3RpdmUsIE91dHB1dCwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiB9IGZyb20gJy4vLi4vLi4vdXRpbHMvdXRpbCc7XG5pbXBvcnQgeyBQb01vZGFsQWN0aW9uIH0gZnJvbSAnLi9wby1tb2RhbC1hY3Rpb24uaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgUG9MYW5ndWFnZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wby1sYW5ndWFnZS9wby1sYW5ndWFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IHBvTW9kYWxMaXRlcmFscyB9IGZyb20gJy4vcG8tbW9kYWwubGl0ZXJhbHMnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gY29tcG9uZW50ZSBgcG8tbW9kYWxgIMOpIHV0aWxpemFkbyBwYXJhIGluY2x1aXIgY29udGXDumRvcyByw6FwaWRvcyBlIGluZm9ybWF0aXZvcy5cbiAqXG4gKiBObyBjYWJlw6dhbGhvIGRvIGNvbXBvbmVudGUgw6kgcG9zc8OtdmVsIGRlZmluaXIgdW0gdMOtdHVsbyBlIGNvbW8gdGFtYsOpbSBwZXJtaXRlIG9jdWx0YXIgbyDDrWNvbmUgZGUgZmVjaGFtZW50byBkYSBtb2RhbC5cbiAqXG4gKiBFbSBzZXUgY29ycG8gw6kgcG9zc8OtdmVsIGRlZmluaXIgdW0gY29udGXDumRvIGluZm9ybWF0aXZvLCBwb2RlbmRvIHV0aWxpemFyIGNvbXBvbmVudGVzIGNvbW8gcG9yIGV4ZW1wbG8gYHBvLWNoYXJ0YCxcbiAqIGBwby10YWJsZWAgZSBvcyBkZW1haXMgY29tcG9uZW50ZXMgZG8gUE8uXG4gKlxuICogTm8gcm9kYXDDqSBlbmNvbnRyYW0tc2Ugb3MgYm90w7VlcyBkZSBhw6fDo28gcHJpbcOhcmlhIGUgc2VjdW5kw6FyaWEsIG5vIHF1YWwgcGVybWl0ZW0gZGVmaW5pciB1bWEgYcOnw6NvIGUgdW0gcsOzdHVsbywgYmVtIGNvbW9cbiAqIGRlZmluaXIgdW0gZXN0YWRvIGRlIGNhcnJlZ2FuZG8gZSAvIG91IGRlc2FiaWxpdGFkbyBlIC8gb3UgZGVmaW5pciBvIGJvdMOjbyBjb20gbyB0aXBvICpkYW5nZXIqLiBUYW1iw6ltIMOpIHBvc3PDrXZlbCB1dGlsaXphclxuICogbyBjb21wb25lbnRlIFtgUG9Nb2RhbEZvb3RlcmBdKC9kb2N1bWVudGF0aW9uL3BvLW1vZGFsLWZvb3RlcikuXG4gKlxuICogPiDDiSBwb3Nzw612ZWwgZmVjaGFyIGEgbW9kYWwgYXRyYXbDqXMgZGEgdGVjbGEgKkVTQyosIHF1YW5kbyBhIHByb3ByaWVkYWRlIGBwLWhpZGUtY2xvc2VgIG7Do28gZXN0aXZlciBoYWJpbGl0YWRhLlxuICpcbiAqICMjIyMgVG9rZW5zIGN1c3RvbWl6w6F2ZWlzXG4gKlxuICogw4kgcG9zc8OtdmVsIGFsdGVyYXIgbyBlc3RpbG8gZG8gY29tcG9uZW50ZSB1c2FuZG8gb3Mgc2VndWludGVzIHRva2VucyAoQ1NTKTpcbiAqXG4gKiA+IFBhcmEgbWFpb3JlcyBpbmZvcm1hw6fDtWVzLCBhY2Vzc2UgbyBndWlhIFtQZXJzb25hbGl6YW5kbyBvIFRlbWEgUGFkcsOjbyBjb20gVG9rZW5zIENTU10oaHR0cHM6Ly9wby11aS5pby9ndWlkZXMvdGhlbWUtY3VzdG9taXphdGlvbikuXG4gKlxuICogfCBQcm9wcmllZGFkZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IERlc2NyacOnw6NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBWYWxvciBQYWRyw6NvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18XG4gKiB8ICoqRGVmYXVsdCBWYWx1ZXMqKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgLS1ib3JkZXItcmFkaXVzYCAmbmJzcDsgICAgICAgICAgICAgICAgICAgICB8IENvbnTDqW0gbyB2YWxvciBkbyByYWlvIGRvcyBjYW50b3MgZG8gZWxlbWVudG8mbmJzcDsgICB8IGB2YXIoLS1ib3JkZXItcmFkaXVzLW1kKWAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAtLWJvcmRlci13aWR0aGAgJm5ic3A7ICAgICAgICAgICAgICAgICAgICAgIHwgQ29udMOpbSBvIHZhbG9yIGRhIGxhcmd1cmEgZG9zIGNhbnRvcyBkbyBlbGVtZW50byZuYnNwO3wgYHZhcigtLWJvcmRlci13aWR0aC1zbSlgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYC0tYm9yZGVyLWNvbG9yYCAmbmJzcDsgICAgICAgICAgICAgICAgICAgICAgfCBDb3IgZGEgYm9yZGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGB2YXIoLS1jb2xvci1uZXV0cmFsLWxpZ2h0LTIwKWAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAtLWJhY2tncm91bmRgICZuYnNwOyAgICAgICAgICAgICAgICAgICAgICAgIHwgQ29yIGRlIGJhY2tncm91bmQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBgdmFyKC0tY29sb3ItbmV1dHJhbC1saWdodC0wMClgICAgICAgICAgICAgICAgICAgfFxuICogfCBgLS1zaGFkb3dgICZuYnNwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IENvbnTDqW0gbyB2YWxvciBkYSBzb21icmEgZG8gZWxlbWVudG8gICAgICAgICAgICAgICAgICB8IGB2YXIoLS1zaGFkb3ctbWQpYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IGAtLWNvbG9yLW92ZXJsYXlgICZuYnNwOyAgICAgICAgICAgICAgICAgICAgIHwgQ29yIGRhIGNhbWFkYSB2aXN1YWwgdGVtcG9yw6FyaWEgICAgICAgICAgICAgICAgICAgICAgIHwgYHZhcigtLWNvbG9yLW5ldXRyYWwtZGFyay04MClgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgYC0tb3BhY2l0eS1vdmVybGF5YCAmbmJzcDsgICAgICAgICAgICAgICAgICAgfCBPcGFjaWRhZGUgZGEgY2FtYWRhIHZpc3VhbCB0ZW1wb3LDoXJpYSAmbmJzcDsgICAgICAgICAgfCBgMC43YCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBgLS1jb2xvci1kaXZpZGVyYCAmbmJzcDsgICAgICAgICAgICAgICAgICAgICB8IENvciBkYXMgZGl2aXPDtWVzIGRvIG1vZGFsICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IGB2YXIoLS1jb2xvci1uZXV0cmFsLWxpZ2h0LTIwKWAgICAgICAgICAgICAgICAgICB8XG4gKlxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBjbGFzcyBQb01vZGFsQmFzZUNvbXBvbmVudCB7XG4gIC8qKiBUw610dWxvIGRhIG1vZGFsLiAqL1xuICBASW5wdXQoJ3AtdGl0bGUnKSB0aXRsZTogc3RyaW5nO1xuXG4gIC8qKiBFdmVudG8gZGlzcGFyYWRvIGFvIGZlY2hhciBvIG1vZGFsLiAqL1xuICBAT3V0cHV0KCdwLWNsb3NlJykgY2xvc2VNb2RhbDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgLyoqXG4gICAqIERldmUgc2VyIGRlZmluaWRvIHVtIG9iamV0byBxdWUgaW1wbGVtZW50YSBhIGludGVyZmFjZSBgUG9Nb2RhbEFjdGlvbmAgY29udGVuZG8gYSBsYWJlbCBlIGEgZnVuw6fDo28gZGEgcHJpbWVpcmEgYcOnw6NvLlxuICAgKiBDYXNvIGVzdGEgcHJvcHJpZWRhZGUgbsOjbyBzZWphIGRlZmluaWRhIG91IGVzdGVqYSBpbmNvbXBsZXRhLCBhdXRvbWF0aWNhbWVudGUgc2Vyw6EgYWRpY2lvbmFkbyB1bSBib3TDo28gZGUgYcOnw6NvIGNvbVxuICAgKiBhIGZ1bsOnw6NvIGRlIGZlY2hhciBhIG1vZGFsLlxuICAgKi9cbiAgQElucHV0KCdwLXByaW1hcnktYWN0aW9uJykgcHJpbWFyeUFjdGlvbj86IFBvTW9kYWxBY3Rpb247XG5cbiAgLyoqIERldmUgc2VyIGRlZmluaWRvIHVtIG9iamV0byBxdWUgaW1wbGVtZW50YSBhIGludGVyZmFjZSBgUG9Nb2RhbEFjdGlvbmAgY29udGVuZG8gYSBsYWJlbCBlIGEgZnVuw6fDo28gZGEgc2VndW5kYSBhw6fDo28uICovXG4gIEBJbnB1dCgncC1zZWNvbmRhcnktYWN0aW9uJykgc2Vjb25kYXJ5QWN0aW9uPzogUG9Nb2RhbEFjdGlvbjtcblxuICBsYW5ndWFnZTtcbiAgbGl0ZXJhbHM7XG5cbiAgLy8gQ29udHJvbGEgc2UgYSBtb2RhbCBmaWNhIG9jdWx0byBvdSB2aXPDrXZlbCwgcG9yIHBhZHLDo28gw6kgb2N1bHRvXG4gIGlzSGlkZGVuID0gdHJ1ZTtcblxuICAvLyBFdmVudCBlbW1pdGVyIHBhcmEgcXVhbmRvIGEgbW9kYWwgw6kgZmVjaGFkYSBwZWxvICdYJy5cbiAgcHVibGljIG9uWENsb3NlZCA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICBwcml2YXRlIF9oaWRlQ2xvc2U/OiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX3NpemU/OiBzdHJpbmcgPSAnbWQnO1xuXG4gIC8qKlxuICAgKiBEZWZpbmUgbyB0YW1hbmhvIGRhIG1vZGFsLlxuICAgKlxuICAgKiBWYWxvcmVzIHbDoWxpZG9zOlxuICAgKiAgLSBgc21gIChwZXF1ZW5vKVxuICAgKiAgLSBgbWRgIChtw6lkaW8pXG4gICAqICAtIGBsZ2AgKGdyYW5kZSlcbiAgICogIC0gYHhsYCAoZXh0cmEgZ3JhbmRlKVxuICAgKiAgLSBgYXV0b2AgKGF1dG9tw6F0aWNvKVxuICAgKlxuICAgKiA+IFF1YW5kbyBpbmZvcm1hZG8gYGF1dG9gIGEgbW9kYWwgY2FsY3VsYXLDoSBhdXRvbWF0aWNhbWVudGUgc2V1IHRhbWFuaG8gYmFzZWFkbyBlbSBzZXUgY29udGXDumRvLlxuICAgKiBDYXNvIG7Do28gc2VqYSBpbmZvcm1hZG8gdW0gdmFsb3IsIGEgbW9kYWwgdGVyw6EgbyB0YW1hbmhvIGRlZmluaWRvIGNvbW8gYG1kYC5cbiAgICpcbiAgICogPiBUb2RhcyBhcyBvcMOnw7VlcyBkZSB0YW1hbmhvIHBvc3N1ZW0gdW1hIGxhcmd1cmEgbcOheGltYSBkZSAqKjc2OHB4KiouXG4gICAqL1xuICBASW5wdXQoJ3Atc2l6ZScpIHNldCBzaXplKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzaXplcyA9IFsnc20nLCAnbWQnLCAnbGcnLCAneGwnLCAnYXV0byddO1xuICAgIHRoaXMuX3NpemUgPSBzaXplcy5pbmRleE9mKHZhbHVlKSA+IC0xID8gdmFsdWUgOiAnbWQnO1xuICB9XG5cbiAgZ2V0IHNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gIH1cblxuICAvKipcbiAgICogRGVmaW5lIG8gZmVjaGFtZW50byBkYSBtb2RhbCBhbyBjbGljYXIgZm9yYSBkYSBtZXNtYS5cbiAgICogSW5mb3JtZSBvIHZhbG9yIGB0cnVlYCBwYXJhIGF0aXZhciBvIGZlY2hhbWVudG8gYW8gY2xpY2FyIGZvcmEgZGEgbW9kYWwuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L21lbWJlci1vcmRlcmluZ1xuICBjbGlja091dD86IGJvb2xlYW4gPSBmYWxzZTtcbiAgQElucHV0KCdwLWNsaWNrLW91dCcpIHNldCBzZXRDbGlja091dCh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xuICAgIHRoaXMuY2xpY2tPdXQgPSB2YWx1ZSA9PT0gJycgPyBmYWxzZSA6IGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogT2N1bHRhIG8gw61jb25lIGRlIGZlY2hhciBkbyBjYWJlw6dhbGhvIGRhIG1vZGFsLlxuICAgKlxuICAgKiA+IENhc28gYSBwcm9wcmllZGFkZSBlc3RpdmVyIGhhYmlsaXRhZGEsIG7Do28gc2Vyw6EgcG9zc8OtdmVsIGZlY2hhciBhIG1vZGFsIGF0cmF2w6lzIGRhIHRlY2xhICpFU0MqLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqL1xuICBASW5wdXQoJ3AtaGlkZS1jbG9zZScpIHNldCBoaWRlQ2xvc2UodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9oaWRlQ2xvc2UgPSBjb252ZXJ0VG9Cb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBoaWRlQ2xvc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hpZGVDbG9zZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIMONY29uZSBleGliaWRvIGFvIGxhZG8gZXNxdWVyZG8gZG8gbGFiZWwgZG8gdGl0w7psbyBkYSBtb2RhbC5cbiAgICpcbiAgICogw4kgcG9zc8OtdmVsIHVzYXIgcXVhbHF1ZXIgdW0gZG9zIMOtY29uZXMgZGEgW0JpYmxpb3RlY2EgZGUgw61jb25lc10oL2d1aWRlcy9pY29ucykuIGNvbmZvcm1lIGV4ZW1wbG8gYWJhaXhvOlxuICAgKiBgYGBcbiAgICogPHBvLW1vZGFsIHAtaWNvbj1cInBvLWljb24tdXNlclwiIHAtdGl0bGU9XCJQTyBNb2RhbFwiPjwvcG8tbW9kYWw+XG4gICAqIGBgYFxuICAgKiBUYW1iw6ltIMOpIHBvc3PDrXZlbCB1dGlsaXphciBvdXRyYXMgZm9udGVzIGRlIMOtY29uZXMsIHBvciBleGVtcGxvIGEgYmlibGlvdGVjYSAqRm9udCBBd2Vzb21lKiwgZGEgc2VndWludGUgZm9ybWE6XG4gICAqIGBgYFxuICAgKiA8cG8tbW9kYWwgcC1pY29uPVwiZmEgZmEtcG9kY2FzdFwiIHAtdGl0bGU9XCJQTyBNb2RhbFwiPjwvcG8tbW9kYWw+XG4gICAqIGBgYFxuICAgKiBPdXRyYSBvcMOnw6NvIHNlcmlhIGEgY3VzdG9taXphw6fDo28gZG8gw61jb25lIGF0cmF2w6lzIGRvIGBUZW1wbGF0ZVJlZmAsIGNvbmZvcm1lIGV4ZW1wbG8gYWJhaXhvOlxuICAgKiBgYGBcbiAgICogPHBvLW1vZGFsIFtwLWljb25dPVwidGVtcGxhdGVcIiBwLXRpdGxlPVwiUE8gTW9kYWxcIj48L3BvLW1vZGFsPlxuICAgKlxuICAgKiA8bmctdGVtcGxhdGUgI3RlbXBsYXRlPlxuICAgKiAgPGlvbi1pY29uIHN0eWxlPVwiZm9udC1zaXplOiBpbmhlcml0XCIgbmFtZT1cImhlYXJ0XCI+PC9pb24taWNvbj5cbiAgICogPC9uZy10ZW1wbGF0ZT5cbiAgICogYGBgXG4gICAqL1xuICBASW5wdXQoJ3AtaWNvbicpIGljb24/OiBzdHJpbmcgfCBUZW1wbGF0ZVJlZjx2b2lkPjtcblxuICBjb25zdHJ1Y3Rvcihwb0xhbmd1YWdlU2VydmljZTogUG9MYW5ndWFnZVNlcnZpY2UpIHtcbiAgICB0aGlzLmxhbmd1YWdlID0gcG9MYW5ndWFnZVNlcnZpY2UuZ2V0U2hvcnRMYW5ndWFnZSgpO1xuXG4gICAgdGhpcy5saXRlcmFscyA9IHtcbiAgICAgIC4uLnBvTW9kYWxMaXRlcmFsc1t0aGlzLmxhbmd1YWdlXVxuICAgIH07XG4gIH1cblxuICAvKiogRnVuw6fDo28gcGFyYSBmZWNoYXIgYSBtb2RhbC4gKi9cbiAgY2xvc2UoeENsb3NlZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgdGhpcy5jbG9zZU1vZGFsLmVtaXQoKTtcblxuICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlO1xuICAgIGlmICh4Q2xvc2VkKSB7XG4gICAgICB0aGlzLm9uWENsb3NlZC5lbWl0KHhDbG9zZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBGdW7Dp8OjbyBwYXJhIGFicmlyIGEgbW9kYWwuICovXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgdGhpcy52YWxpZFByaW1hcnlBY3Rpb24oKTtcblxuICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcbiAgfVxuXG4gIHZhbGlkUHJpbWFyeUFjdGlvbigpIHtcbiAgICBpZiAoIXRoaXMucHJpbWFyeUFjdGlvbikge1xuICAgICAgdGhpcy5wcmltYXJ5QWN0aW9uID0ge1xuICAgICAgICBhY3Rpb246ICgpID0+IHRoaXMuY2xvc2UoKSxcbiAgICAgICAgbGFiZWw6IHRoaXMubGl0ZXJhbHMuY2xvc2VcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnByaW1hcnlBY3Rpb25bJ2FjdGlvbiddKSB7XG4gICAgICB0aGlzLnByaW1hcnlBY3Rpb25bJ2FjdGlvbiddID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucHJpbWFyeUFjdGlvblsnbGFiZWwnXSkge1xuICAgICAgdGhpcy5wcmltYXJ5QWN0aW9uWydsYWJlbCddID0gdGhpcy5saXRlcmFscy5jbG9zZTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==