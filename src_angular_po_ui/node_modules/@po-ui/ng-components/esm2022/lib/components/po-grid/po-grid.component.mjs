import { Component, Input, ViewChild } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "./po-grid-cell-action/po-grid-cell-action.component";
import * as i3 from "./po-grid-cell/po-grid-cell.component";
import * as i4 from "./po-grid-head/po-grid-head.component";
const _c0 = ["table"];
const _c1 = ["wrapper"];
function PoGridComponent_div_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtext(1);
    i0.ɵɵelement(2, "br");
    i0.ɵɵtext(3);
    i0.ɵɵelement(4, "br");
    i0.ɵɵtext(5);
    i0.ɵɵelement(6, "br")(7, "hr");
    i0.ɵɵtext(8);
    i0.ɵɵpipe(9, "json");
    i0.ɵɵelement(10, "hr");
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" lastCell: ", ctx_r1.lastCell, " | currencyCell: ", ctx_r1.currencyCell, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" lastRow: ", ctx_r1.lastRow, " | currencyRow: ", ctx_r1.currencyRow, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" lastColumn: ", ctx_r1.lastColumn, " | currencyColumn: ", ctx_r1.currencyColumn, " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" currencyObj: ", i0.ɵɵpipeBind1(9, 7, ctx_r1.currencyObj), " ");
} }
function PoGridComponent_div_7_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainer(0);
} }
function PoGridComponent_div_7_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14);
    i0.ɵɵtemplate(1, PoGridComponent_div_7_ng_container_1_Template, 1, 0, "ng-container", 9);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    i0.ɵɵnextContext();
    const _r7 = i0.ɵɵreference(12);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngTemplateOutlet", _r7);
} }
function PoGridComponent_ng_container_9_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainer(0);
} }
function PoGridComponent_div_10_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementContainer(0);
} }
function PoGridComponent_div_10_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15);
    i0.ɵɵtemplate(1, PoGridComponent_div_10_ng_container_1_Template, 1, 0, "ng-container", 9);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    i0.ɵɵnextContext();
    const _r11 = i0.ɵɵreference(16);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngTemplateOutlet", _r11);
} }
function PoGridComponent_ng_template_11_po_grid_head_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-grid-head", 21);
} if (rf & 2) {
    const column_r16 = ctx.$implicit;
    const i_r17 = ctx.index;
    i0.ɵɵstyleProp("width", column_r16.cssWidth)("max-width", column_r16.cssWidth)("min-width", column_r16.cssWidth);
    i0.ɵɵpropertyInterpolate("p-position", "0-" + i_r17);
    i0.ɵɵproperty("p-width", column_r16.width)("p-align", column_r16.align)("p-title", column_r16.label);
} }
function PoGridComponent_ng_template_11_div_5_po_grid_cell_1_Template(rf, ctx) { if (rf & 1) {
    const _r25 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "po-grid-cell", 24);
    i0.ɵɵtwoWayListener("p-valueChange", function PoGridComponent_ng_template_11_div_5_po_grid_cell_1_Template_po_grid_cell_p_valueChange_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r25); const column_r21 = restoredCtx.$implicit; const row_r18 = i0.ɵɵnextContext().$implicit; i0.ɵɵtwoWayBindingSet(row_r18[column_r21.property], $event) || (row_r18[column_r21.property] = $event); return i0.ɵɵresetView($event); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const column_r21 = ctx.$implicit;
    const i_r22 = ctx.index;
    const ctx_r26 = i0.ɵɵnextContext();
    const j_r19 = ctx_r26.index;
    const row_r18 = ctx_r26.$implicit;
    i0.ɵɵstyleProp("width", column_r21.cssWidth)("max-width", column_r21.cssWidth)("min-width", column_r21.cssWidth);
    i0.ɵɵpropertyInterpolate("p-position", j_r19 + 1 + "-" + i_r22);
    i0.ɵɵproperty("p-align", column_r21.align)("p-readonly", column_r21.readonly)("p-required", column_r21.required)("p-width", column_r21.width);
    i0.ɵɵtwoWayProperty("p-value", row_r18[column_r21.property]);
} }
function PoGridComponent_ng_template_11_div_5_Template(rf, ctx) { if (rf & 1) {
    const _r28 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 22);
    i0.ɵɵlistener("keydown.control.delete", function PoGridComponent_ng_template_11_div_5_Template_div_keydown_control_delete_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r28); const row_r18 = restoredCtx.$implicit; const ctx_r27 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r27.removeRow($event, row_r18)); })("keydown.esc", function PoGridComponent_ng_template_11_div_5_Template_div_keydown_esc_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r28); const row_r18 = restoredCtx.$implicit; const ctx_r29 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r29.cancelRow($event, row_r18)); });
    i0.ɵɵtemplate(1, PoGridComponent_ng_template_11_div_5_po_grid_cell_1_Template, 1, 12, "po-grid-cell", 23);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r15 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r15.freezeColumns);
} }
function PoGridComponent_ng_template_11_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "div", 17)(2, "div", 18);
    i0.ɵɵtemplate(3, PoGridComponent_ng_template_11_po_grid_head_3_Template, 1, 10, "po-grid-head", 19);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 4);
    i0.ɵɵtemplate(5, PoGridComponent_ng_template_11_div_5_Template, 2, 1, "div", 20);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r6 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r6.freezeColumns);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r6.data);
} }
function PoGridComponent_ng_template_13_po_grid_head_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-grid-head", 27);
} if (rf & 2) {
    const column_r32 = ctx.$implicit;
    const i_r33 = ctx.index;
    const ctx_r30 = i0.ɵɵnextContext(2);
    i0.ɵɵstyleProp("width", column_r32.cssWidth)("max-width", column_r32.cssWidth)("min-width", column_r32.cssWidth);
    i0.ɵɵpropertyInterpolate("p-position", "0-" + (i_r33 + ctx_r30.freezeColumns.length));
    i0.ɵɵproperty("p-align", column_r32.align)("p-title", column_r32.label)("p-width", column_r32.width);
} }
function PoGridComponent_ng_template_13_div_5_po_grid_cell_1_Template(rf, ctx) { if (rf & 1) {
    const _r41 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "po-grid-cell", 29);
    i0.ɵɵtwoWayListener("p-valueChange", function PoGridComponent_ng_template_13_div_5_po_grid_cell_1_Template_po_grid_cell_p_valueChange_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r41); const column_r37 = restoredCtx.$implicit; const row_r34 = i0.ɵɵnextContext().$implicit; i0.ɵɵtwoWayBindingSet(row_r34[column_r37.property], $event) || (row_r34[column_r37.property] = $event); return i0.ɵɵresetView($event); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const column_r37 = ctx.$implicit;
    const i_r38 = ctx.index;
    const ctx_r42 = i0.ɵɵnextContext();
    const j_r35 = ctx_r42.index;
    const row_r34 = ctx_r42.$implicit;
    const ctx_r36 = i0.ɵɵnextContext(2);
    i0.ɵɵstyleProp("width", column_r37.cssWidth)("max-width", column_r37.cssWidth)("min-width", column_r37.cssWidth);
    i0.ɵɵpropertyInterpolate("p-position", j_r35 + 1 + "-" + (i_r38 + ctx_r36.freezeColumns.length));
    i0.ɵɵproperty("p-align", column_r37.align)("p-readonly", column_r37.readonly)("p-required", column_r37.required);
    i0.ɵɵtwoWayProperty("p-value", row_r34[column_r37.property]);
    i0.ɵɵproperty("p-width", column_r37.width);
} }
function PoGridComponent_ng_template_13_div_5_Template(rf, ctx) { if (rf & 1) {
    const _r44 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 22);
    i0.ɵɵlistener("keydown.control.delete", function PoGridComponent_ng_template_13_div_5_Template_div_keydown_control_delete_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r44); const row_r34 = restoredCtx.$implicit; const ctx_r43 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r43.removeRow($event, row_r34)); })("keydown.esc", function PoGridComponent_ng_template_13_div_5_Template_div_keydown_esc_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r44); const row_r34 = restoredCtx.$implicit; const ctx_r45 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r45.cancelRow($event, row_r34)); });
    i0.ɵɵtemplate(1, PoGridComponent_ng_template_13_div_5_po_grid_cell_1_Template, 1, 12, "po-grid-cell", 28);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r31 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r31.columns);
} }
function PoGridComponent_ng_template_13_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 25)(1, "div", 17)(2, "div", 18);
    i0.ɵɵtemplate(3, PoGridComponent_ng_template_13_po_grid_head_3_Template, 1, 10, "po-grid-head", 26);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 4);
    i0.ɵɵtemplate(5, PoGridComponent_ng_template_13_div_5_Template, 2, 1, "div", 20);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r8 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r8.columns);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r8.data);
} }
function PoGridComponent_ng_template_15_po_grid_head_3_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-grid-head", 32);
} if (rf & 2) {
    const column_r48 = ctx.$implicit;
    const i_r49 = ctx.index;
    const ctx_r46 = i0.ɵɵnextContext(2);
    i0.ɵɵpropertyInterpolate("p-position", "0-" + (i_r49 + ctx_r46.freezeColumns.length + ctx_r46.columns.length));
    i0.ɵɵproperty("p-title", column_r48.label)("p-align", column_r48.align);
} }
function PoGridComponent_ng_template_15_div_5_po_grid_cell_action_1_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "po-grid-cell-action", 34);
} if (rf & 2) {
    const column_r53 = ctx.$implicit;
    const i_r54 = ctx.index;
    const ctx_r55 = i0.ɵɵnextContext();
    const j_r51 = ctx_r55.index;
    const row_r50 = ctx_r55.$implicit;
    const ctx_r52 = i0.ɵɵnextContext(2);
    i0.ɵɵpropertyInterpolate("p-position", j_r51 + 1 + "-" + (i_r54 + ctx_r52.freezeColumns.length + ctx_r52.columns.length));
    i0.ɵɵproperty("p-value", row_r50[column_r53.property]);
} }
function PoGridComponent_ng_template_15_div_5_Template(rf, ctx) { if (rf & 1) {
    const _r57 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 22);
    i0.ɵɵlistener("keydown.control.delete", function PoGridComponent_ng_template_15_div_5_Template_div_keydown_control_delete_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r57); const row_r50 = restoredCtx.$implicit; const ctx_r56 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r56.removeRow($event, row_r50)); })("keydown.esc", function PoGridComponent_ng_template_15_div_5_Template_div_keydown_esc_0_listener($event) { const restoredCtx = i0.ɵɵrestoreView(_r57); const row_r50 = restoredCtx.$implicit; const ctx_r58 = i0.ɵɵnextContext(2); return i0.ɵɵresetView(ctx_r58.cancelRow($event, row_r50)); });
    i0.ɵɵtemplate(1, PoGridComponent_ng_template_15_div_5_po_grid_cell_action_1_Template, 1, 2, "po-grid-cell-action", 33);
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r47 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r47.actionColumns);
} }
function PoGridComponent_ng_template_15_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 30)(1, "div", 17)(2, "div", 18);
    i0.ɵɵtemplate(3, PoGridComponent_ng_template_15_po_grid_head_3_Template, 1, 3, "po-grid-head", 31);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 4);
    i0.ɵɵtemplate(5, PoGridComponent_ng_template_15_div_5_Template, 2, 1, "div", 20);
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r10 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r10.actionColumns);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r10.data);
} }
/**
 * @description
 *
 * > Componente em desenvolvimento, podendo haver BREAKING CHANGES nas próximas versões.
 *
 * Componente grid.
 *
 * Ações / atalhos:
 *
 * - ARROW-UP: Navega para celula superior / Na ultima linha adiciona uma linha em branco no grid;
 * - ARROW-DOWN: Navega para celula inferior;
 * - ARROW-RIGHT: Navega para celula direita;
 * - ARROW-LEFT: Navega para celula esquerda;
 * - TAB: Navega para próxima celula;
 * - SHIFT+TAB: Navega para celula anterior;
 * - CTRL+DEL: Remove linha;
 * - DEL/BACKSPACE: Limpa celula;
 * - ENTER: Edita linha com valor atual/Confirma edição da celula;
 * - DOUBLE-CLICK: Edita linha com valor atual;
 * - ESC: Cancela edição da celula / Cancela inserção de linhas em branco;
 * - A..Z/0..9: Inicia edição com valor em branco.
 *
 * @example
 *
 * <example name="po-grid-basic" title="PO Grid Basic">
 *  <file name="sample-po-grid-basic/sample-po-grid-basic.component.html"> </file>
 *  <file name="sample-po-grid-basic/sample-po-grid-basic.component.ts"> </file>
 * </example>
 */
export class PoGridComponent {
    changeDetectorRef;
    elRef;
    tableElement;
    tableWrapper;
    /**
     * @description
     *
     * Ações disparadas quando uma linha do grid é manipulada.
     */
    rowActions = {};
    /**
     * Lista com os dados que serão exibidos no grid.
     */
    data = [];
    lastCell = '0-0';
    lastRow = 0;
    lastColumn = 0;
    currencyCell = '0-0';
    currencyRow = 0;
    currencyColumn = 0;
    currencyObj;
    logger = false;
    width = '100%';
    widporeeze = 0;
    widthActions = 0;
    resizeListener;
    timeoutResize;
    _columns = [];
    /**
     * Colunas exibidas no grid.
     */
    set columns(value) {
        this._columns = [...value];
        this._columns.forEach(column => {
            column.label = column.label || column.property;
            if (column.freeze === true) {
                column.cssWidth = `${column.width || 100}px`;
            }
            else {
                column.cssWidth = column.width ? `${column.width}px` : '100%';
            }
        });
    }
    get columns() {
        return this._columns.filter(column => column.freeze !== true && column.action !== true);
    }
    constructor(changeDetectorRef, elRef, renderer) {
        this.changeDetectorRef = changeDetectorRef;
        this.elRef = elRef;
        this.debounceResize();
        this.resizeListener = renderer.listen('window', 'resize', (event) => {
            this.debounceResize();
        });
    }
    ngOnDestroy() {
        if (this.resizeListener) {
            this.resizeListener();
        }
    }
    get freezeColumns() {
        const freezeColumns = this._columns.filter(column => column.freeze === true);
        this.widporeeze = freezeColumns.reduce((prev, current) => prev + (current.width || 100), 0);
        return freezeColumns;
    }
    get actionColumns() {
        const actionsColumns = this._columns.filter(column => column.action === true);
        this.widthActions = actionsColumns.length > 0 ? 56 : 0;
        return actionsColumns;
    }
    cancelRow(event, row) {
        const el = this.getEventPath(event).find(element => element.id);
        if (!el) {
            return;
        }
        const [x] = el.id.split('-');
        if (this.isEmptyRow(x)) {
            if (!this.removeRow(event, row)) {
                return;
            }
            this.currencyObj = Object.assign({}, this.data[this.currencyRow - 1]);
        }
        else {
            this.data[+x - 1] = Object.assign({}, this.currencyObj);
            setTimeout(() => this.selectCell(this.currencyRow, this.currencyColumn));
        }
    }
    removeRow(event, row) {
        if (this.rowActions.beforeRemove && !this.rowActions.beforeRemove(Object.assign({}, row))) {
            return false;
        }
        const index = this.data.indexOf(row);
        this.data.splice(index, 1);
        this.changeDetectorRef.detectChanges();
        if (this.data.length === 0 || index === this.data.length) {
            this.selectCell(this.currencyRow - 1, this.currencyColumn);
        }
        else {
            this.selectCell(this.currencyRow, this.currencyColumn);
        }
        return true;
    }
    tableKeydown(event, direction) {
        let [row, col] = event.target.id.split('-');
        row = +row;
        col = +col;
        let prow = +row;
        let pcol = +col;
        if (direction === 'down') {
            if (row <= this.data.length) {
                prow++;
            }
            if (row === this.data.length) {
                if (row === 0 || !this.isEmptyRow(row)) {
                    if (this.saveRow(row)) {
                        if (!this.insertRow()) {
                            return;
                        }
                    }
                    else {
                        return;
                    }
                }
                else {
                    prow--;
                }
            }
        }
        else if (direction === 'up' && row > 0) {
            prow--;
        }
        else if (direction === 'left' && col > 0) {
            pcol--;
        }
        else if (direction === 'right' && col < this._columns.length - 1) {
            pcol++;
        }
        else if (direction === 'next') {
            if (col < this._columns.length - 1) {
                pcol++;
                event.preventDefault();
            }
            else if (row < this.data.length) {
                pcol = 0;
                prow++;
                event.preventDefault();
            }
        }
        else if (direction === 'prior') {
            if (col > 0) {
                pcol--;
                event.preventDefault();
            }
            else if (row > 0) {
                pcol = this._columns.length - 1;
                prow--;
                event.preventDefault();
            }
        }
        if (this.currencyCell === `${prow}-${pcol}`) {
            return;
        }
        if (prow !== this.currencyRow && row > 0 && this.data.length >= row) {
            if (!this.isEmptyRow(row)) {
                if (!this.saveRow(row)) {
                    return;
                }
            }
            else {
                if (!this.removeRow(event, row)) {
                    return;
                }
            }
        }
        if (this.currencyRow !== prow) {
            this.currencyObj = Object.assign({}, this.data[prow - 1]);
        }
        this.lastCell = event.target.id;
        this.lastRow = row;
        this.lastColumn = col;
        this.selectCell(prow, pcol);
    }
    tableClick(event) {
        const el = this.getEventPath(event).find(element => element.id);
        if (!el) {
            this.selectCell(this.currencyRow, this.currencyColumn);
            return;
        }
        if (this.currencyCell === el.id) {
            return;
        }
        const [row, col] = el.id.split('-');
        const prow = +row;
        const pcol = +col;
        if (prow !== this.currencyRow) {
            if (this.currencyRow > 0) {
                if (!this.isEmptyRow(this.currencyRow)) {
                    if (!this.saveRow(this.currencyRow)) {
                        this.selectCell(this.currencyRow, this.currencyColumn);
                        return;
                    }
                }
                else {
                    if (!this.removeRow(event, row)) {
                        return;
                    }
                }
            }
            this.currencyObj = Object.assign({}, this.data[prow - 1]);
        }
        this.lastCell = this.currencyCell;
        this.lastRow = this.currencyRow;
        this.lastColumn = this.currencyColumn;
        this.currencyCell = el.id;
        this.currencyRow = prow;
        this.currencyColumn = pcol;
    }
    saveRow(row) {
        const obj = this.data[row - 1];
        if (!Object.keys(obj).some(prop => obj[prop] !== this.currencyObj[prop])) {
            return true;
        }
        if (this.rowActions.beforeSave && !this.rowActions.beforeSave(obj, this.currencyObj)) {
            return false;
        }
        const requireds = [];
        this.columns.forEach(column => {
            if (column.required === true && !obj[column.property]) {
                requireds.push(column.property);
            }
        });
        return requireds.length === 0;
    }
    insertRow() {
        const obj = {};
        if (this.rowActions.beforeInsert && !this.rowActions.beforeInsert(obj)) {
            return false;
        }
        this.data.push(obj);
        this.changeDetectorRef.detectChanges();
        return true;
    }
    isEmptyRow(row) {
        const obj = this.data[row - 1];
        if (!obj) {
            // title
            return false;
        }
        const filled = Object.keys(obj).some(property => obj[property]);
        return !filled;
    }
    selectCell(row, col) {
        const nextCell = this.elRef.nativeElement.querySelector(`[id='${row}-${col}']`);
        if (nextCell) {
            this.currencyCell = `${row}-${col}`;
            this.currencyRow = row;
            this.currencyColumn = col;
            nextCell.focus();
        }
    }
    debounceResize() {
        clearTimeout(this.timeoutResize);
        this.timeoutResize = setTimeout(() => {
            const widthTableWrapper = this.tableWrapper.nativeElement.offsetWidth;
            this.width = `${widthTableWrapper - (this.widporeeze + 8) - this.widthActions}px`;
        }, 100);
    }
    getEventPath(event) {
        // firefox do not have support to event.path
        return event.path || event.composedPath();
    }
    static ɵfac = function PoGridComponent_Factory(t) { return new (t || PoGridComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2)); };
    static ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoGridComponent, selectors: [["po-grid"]], viewQuery: function PoGridComponent_Query(rf, ctx) { if (rf & 1) {
            i0.ɵɵviewQuery(_c0, 7);
            i0.ɵɵviewQuery(_c1, 7);
        } if (rf & 2) {
            let _t;
            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tableElement = _t.first);
            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tableWrapper = _t.first);
        } }, inputs: { rowActions: [i0.ɵɵInputFlags.None, "p-row-actions", "rowActions"], data: [i0.ɵɵInputFlags.None, "p-data", "data"], columns: [i0.ɵɵInputFlags.None, "p-columns", "columns"] }, decls: 17, vars: 10, consts: [[1, "po-grid-wrapper", "po-grid-row-wrapper"], ["wrapper", ""], [4, "ngIf"], [1, "po-grid"], [1, "po-grid-body"], [1, "po-grid-row", 3, "keydown.arrowup", "keydown.arrowdown", "keydown.arrowleft", "keydown.arrowright", "keydown.tab", "keydown.shift.tab", "click", "contextmenu", "dblclick"], ["table", ""], ["class", "po-grid-cell po-grid-cell-freeze", 4, "ngIf"], [1, "po-grid-cell", "po-grid-cell-normal"], [4, "ngTemplateOutlet"], ["class", "po-grid-cell po-grid-cell-action", 4, "ngIf"], ["divFreezeColumns", ""], ["divColumns", ""], ["divActionColumns", ""], [1, "po-grid-cell", "po-grid-cell-freeze"], [1, "po-grid-cell", "po-grid-cell-action"], [1, "po-grid", "po-grid-freeze"], [1, "po-grid-header-group"], [1, "po-grid-row"], ["class", "po-grid-title", "p-freeze", "true", 3, "width", "max-width", "min-width", "p-position", "p-width", "p-align", "p-title", 4, "ngFor", "ngForOf"], ["class", "po-grid-row", 3, "keydown.control.delete", "keydown.esc", 4, "ngFor", "ngForOf"], ["p-freeze", "true", 1, "po-grid-title", 3, "p-position", "p-width", "p-align", "p-title"], [1, "po-grid-row", 3, "keydown.control.delete", "keydown.esc"], ["class", "po-grid-cell", "p-freeze", "true", 3, "width", "max-width", "min-width", "p-align", "p-readonly", "p-required", "p-position", "p-width", "p-value", "p-valueChange", 4, "ngFor", "ngForOf"], ["p-freeze", "true", 1, "po-grid-cell", 3, "p-align", "p-readonly", "p-required", "p-position", "p-width", "p-value", "p-valueChange"], [1, "po-grid", "po-grid-normal"], ["class", "po-grid-title", 3, "width", "max-width", "min-width", "p-align", "p-position", "p-title", "p-width", 4, "ngFor", "ngForOf"], [1, "po-grid-title", 3, "p-align", "p-position", "p-title", "p-width"], ["class", "po-grid-cell", 3, "width", "max-width", "min-width", "p-align", "p-readonly", "p-required", "p-position", "p-value", "p-width", "p-valueChange", 4, "ngFor", "ngForOf"], [1, "po-grid-cell", 3, "p-align", "p-readonly", "p-required", "p-position", "p-value", "p-width", "p-valueChange"], [1, "po-grid", "po-grid-actions"], ["class", "po-grid-title", 3, "p-position", "p-title", "p-align", 4, "ngFor", "ngForOf"], [1, "po-grid-title", 3, "p-position", "p-title", "p-align"], ["class", "po-grid-cell", 3, "p-position", "p-value", 4, "ngFor", "ngForOf"], [1, "po-grid-cell", 3, "p-position", "p-value"]], template: function PoGridComponent_Template(rf, ctx) { if (rf & 1) {
            i0.ɵɵelementStart(0, "div", 0, 1);
            i0.ɵɵtemplate(2, PoGridComponent_div_2_Template, 11, 9, "div", 2);
            i0.ɵɵelementStart(3, "div", 3)(4, "div", 4)(5, "div", 5, 6);
            i0.ɵɵlistener("keydown.arrowup", function PoGridComponent_Template_div_keydown_arrowup_5_listener($event) { return ctx.tableKeydown($event, "up"); })("keydown.arrowdown", function PoGridComponent_Template_div_keydown_arrowdown_5_listener($event) { return ctx.tableKeydown($event, "down"); })("keydown.arrowleft", function PoGridComponent_Template_div_keydown_arrowleft_5_listener($event) { return ctx.tableKeydown($event, "left"); })("keydown.arrowright", function PoGridComponent_Template_div_keydown_arrowright_5_listener($event) { return ctx.tableKeydown($event, "right"); })("keydown.tab", function PoGridComponent_Template_div_keydown_tab_5_listener($event) { return ctx.tableKeydown($event, "next"); })("keydown.shift.tab", function PoGridComponent_Template_div_keydown_shift_tab_5_listener($event) { return ctx.tableKeydown($event, "prior"); })("click", function PoGridComponent_Template_div_click_5_listener($event) { return ctx.tableClick($event); })("contextmenu", function PoGridComponent_Template_div_contextmenu_5_listener($event) { return ctx.tableClick($event); })("dblclick", function PoGridComponent_Template_div_dblclick_5_listener($event) { return ctx.tableClick($event); });
            i0.ɵɵtemplate(7, PoGridComponent_div_7_Template, 2, 1, "div", 7);
            i0.ɵɵelementStart(8, "div", 8);
            i0.ɵɵtemplate(9, PoGridComponent_ng_container_9_Template, 1, 0, "ng-container", 9);
            i0.ɵɵelementEnd();
            i0.ɵɵtemplate(10, PoGridComponent_div_10_Template, 2, 1, "div", 10);
            i0.ɵɵelementEnd()()()();
            i0.ɵɵtemplate(11, PoGridComponent_ng_template_11_Template, 6, 2, "ng-template", null, 11, i0.ɵɵtemplateRefExtractor)(13, PoGridComponent_ng_template_13_Template, 6, 2, "ng-template", null, 12, i0.ɵɵtemplateRefExtractor)(15, PoGridComponent_ng_template_15_Template, 6, 2, "ng-template", null, 13, i0.ɵɵtemplateRefExtractor);
        } if (rf & 2) {
            const _r9 = i0.ɵɵreference(14);
            i0.ɵɵadvance(2);
            i0.ɵɵproperty("ngIf", ctx.logger);
            i0.ɵɵadvance(5);
            i0.ɵɵproperty("ngIf", ctx.freezeColumns.length > 0);
            i0.ɵɵadvance();
            i0.ɵɵstyleProp("width", ctx.width)("max-width", ctx.width)("min-width", ctx.width);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngTemplateOutlet", _r9);
            i0.ɵɵadvance();
            i0.ɵɵproperty("ngIf", ctx.actionColumns.length > 0);
        } }, dependencies: [i1.NgForOf, i1.NgIf, i1.NgTemplateOutlet, i2.PoGridCellActionComponent, i3.PoGridCellComponent, i4.PoGridHeadComponent, i1.JsonPipe], encapsulation: 2 });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoGridComponent, [{
        type: Component,
        args: [{ selector: 'po-grid', template: "<div class=\"po-grid-wrapper po-grid-row-wrapper\" #wrapper>\n  <div *ngIf=\"logger\">\n    lastCell: {{ lastCell }} | currencyCell: {{ currencyCell }} <br />\n    lastRow: {{ lastRow }} | currencyRow: {{ currencyRow }} <br />\n    lastColumn: {{ lastColumn }} | currencyColumn: {{ currencyColumn }} <br />\n    <hr />\n    currencyObj: {{ currencyObj | json }}\n    <hr />\n  </div>\n\n  <div class=\"po-grid\">\n    <div class=\"po-grid-body\">\n      <div\n        class=\"po-grid-row\"\n        #table\n        (keydown.arrowup)=\"tableKeydown($event, 'up')\"\n        (keydown.arrowdown)=\"tableKeydown($event, 'down')\"\n        (keydown.arrowleft)=\"tableKeydown($event, 'left')\"\n        (keydown.arrowright)=\"tableKeydown($event, 'right')\"\n        (keydown.tab)=\"tableKeydown($event, 'next')\"\n        (keydown.shift.tab)=\"tableKeydown($event, 'prior')\"\n        (click)=\"tableClick($event)\"\n        (contextmenu)=\"tableClick($event)\"\n        (dblclick)=\"tableClick($event)\"\n      >\n        <div class=\"po-grid-cell po-grid-cell-freeze\" *ngIf=\"freezeColumns.length > 0\">\n          <ng-container *ngTemplateOutlet=\"divFreezeColumns\"></ng-container>\n        </div>\n\n        <div\n          class=\"po-grid-cell po-grid-cell-normal\"\n          [style.width]=\"width\"\n          [style.max-width]=\"width\"\n          [style.min-width]=\"width\"\n        >\n          <ng-container *ngTemplateOutlet=\"divColumns\"></ng-container>\n        </div>\n\n        <div class=\"po-grid-cell po-grid-cell-action\" *ngIf=\"actionColumns.length > 0\">\n          <ng-container *ngTemplateOutlet=\"divActionColumns\"></ng-container>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Coluna com as colunas congeladas -->\n<ng-template #divFreezeColumns>\n  <div class=\"po-grid po-grid-freeze\">\n    <div class=\"po-grid-header-group\">\n      <div class=\"po-grid-row\">\n        <po-grid-head\n          *ngFor=\"let column of freezeColumns; index as i\"\n          class=\"po-grid-title\"\n          [style.width]=\"column.cssWidth\"\n          [style.max-width]=\"column.cssWidth\"\n          [style.min-width]=\"column.cssWidth\"\n          p-freeze=\"true\"\n          p-position=\"{{ '0-' + i }}\"\n          [p-width]=\"column.width\"\n          [p-align]=\"column.align\"\n          [p-title]=\"column.label\"\n        >\n        </po-grid-head>\n      </div>\n    </div>\n\n    <div class=\"po-grid-body\">\n      <div\n        class=\"po-grid-row\"\n        *ngFor=\"let row of data; index as j\"\n        (keydown.control.delete)=\"removeRow($event, row)\"\n        (keydown.esc)=\"cancelRow($event, row)\"\n      >\n        <po-grid-cell\n          *ngFor=\"let column of freezeColumns; index as i\"\n          class=\"po-grid-cell\"\n          [style.width]=\"column.cssWidth\"\n          [style.max-width]=\"column.cssWidth\"\n          [style.min-width]=\"column.cssWidth\"\n          p-freeze=\"true\"\n          [p-align]=\"column.align\"\n          [p-readonly]=\"column.readonly\"\n          [p-required]=\"column.required\"\n          p-position=\"{{ j + 1 + '-' + i }}\"\n          [p-width]=\"column.width\"\n          [(p-value)]=\"row[column.property]\"\n        >\n        </po-grid-cell>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<!-- FIM: Coluna com as colunas congeladas -->\n\n<!-- Coluna com as colunas nornais -->\n<ng-template #divColumns>\n  <div class=\"po-grid po-grid-normal\">\n    <div class=\"po-grid-header-group\">\n      <div class=\"po-grid-row\">\n        <po-grid-head\n          *ngFor=\"let column of columns; index as i\"\n          class=\"po-grid-title\"\n          [style.width]=\"column.cssWidth\"\n          [style.max-width]=\"column.cssWidth\"\n          [style.min-width]=\"column.cssWidth\"\n          [p-align]=\"column.align\"\n          p-position=\"{{ '0-' + (i + freezeColumns.length) }}\"\n          [p-title]=\"column.label\"\n          [p-width]=\"column.width\"\n        >\n        </po-grid-head>\n      </div>\n    </div>\n\n    <div class=\"po-grid-body\">\n      <div\n        class=\"po-grid-row\"\n        *ngFor=\"let row of data; index as j\"\n        (keydown.control.delete)=\"removeRow($event, row)\"\n        (keydown.esc)=\"cancelRow($event, row)\"\n      >\n        <po-grid-cell\n          *ngFor=\"let column of columns; index as i\"\n          class=\"po-grid-cell\"\n          [style.width]=\"column.cssWidth\"\n          [style.max-width]=\"column.cssWidth\"\n          [style.min-width]=\"column.cssWidth\"\n          [p-align]=\"column.align\"\n          [p-readonly]=\"column.readonly\"\n          [p-required]=\"column.required\"\n          p-position=\"{{ j + 1 + '-' + (i + freezeColumns.length) }}\"\n          [(p-value)]=\"row[column.property]\"\n          [p-width]=\"column.width\"\n        >\n        </po-grid-cell>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<!-- FIM: Coluna com as colunas nornais -->\n\n<!-- Coluna com as colunas de a\u00E7\u00E3o -->\n<ng-template #divActionColumns>\n  <div class=\"po-grid po-grid-actions\">\n    <div class=\"po-grid-header-group\">\n      <div class=\"po-grid-row\">\n        <po-grid-head\n          *ngFor=\"let column of actionColumns; index as i\"\n          class=\"po-grid-title\"\n          p-position=\"{{ '0-' + (i + freezeColumns.length + columns.length) }}\"\n          [p-title]=\"column.label\"\n          [p-align]=\"column.align\"\n        >\n        </po-grid-head>\n      </div>\n    </div>\n\n    <div class=\"po-grid-body\">\n      <div\n        class=\"po-grid-row\"\n        *ngFor=\"let row of data; index as j\"\n        (keydown.control.delete)=\"removeRow($event, row)\"\n        (keydown.esc)=\"cancelRow($event, row)\"\n      >\n        <po-grid-cell-action\n          *ngFor=\"let column of actionColumns; index as i\"\n          class=\"po-grid-cell\"\n          p-position=\"{{ j + 1 + '-' + (i + freezeColumns.length + columns.length) }}\"\n          [p-value]=\"row[column.property]\"\n        >\n        </po-grid-cell-action>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<!-- FIM: Coluna com as colunas de a\u00E7\u00E3o -->\n" }]
    }], () => [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }, { type: i0.Renderer2 }], { tableElement: [{
            type: ViewChild,
            args: ['table', { static: true }]
        }], tableWrapper: [{
            type: ViewChild,
            args: ['wrapper', { static: true }]
        }], rowActions: [{
            type: Input,
            args: ['p-row-actions']
        }], data: [{
            type: Input,
            args: ['p-data']
        }], columns: [{
            type: Input,
            args: ['p-columns']
        }] }); })();
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassDebugInfo(PoGridComponent, { className: "PoGridComponent", filePath: "lib/components/po-grid/po-grid.component.ts", lineNumber: 38 }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tZ3JpZC9wby1ncmlkLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1ncmlkL3BvLWdyaWQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFxQixTQUFTLEVBQWMsS0FBSyxFQUF3QixTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7Ozs7Ozs7OztJQ0MvRywyQkFBb0I7SUFDbEIsWUFBNEQ7SUFBQSxxQkFBTTtJQUNsRSxZQUF3RDtJQUFBLHFCQUFNO0lBQzlELFlBQW9FO0lBQUEscUJBQU0sU0FBQTtJQUUxRSxZQUNBOztJQUFBLHNCQUFNO0lBQ1IsaUJBQU07OztJQU5KLGNBQTREO0lBQTVELG9HQUE0RDtJQUM1RCxlQUF3RDtJQUF4RCxnR0FBd0Q7SUFDeEQsZUFBb0U7SUFBcEUsNEdBQW9FO0lBRXBFLGVBQ0E7SUFEQSxzRkFDQTs7O0lBbUJNLHdCQUFrRTs7O0lBRHBFLCtCQUErRTtJQUM3RSx3RkFBa0U7SUFDcEUsaUJBQU07Ozs7SUFEVyxjQUFrQztJQUFsQyxzQ0FBa0M7OztJQVNqRCx3QkFBNEQ7OztJQUk1RCx3QkFBa0U7OztJQURwRSwrQkFBK0U7SUFDN0UseUZBQWtFO0lBQ3BFLGlCQUFNOzs7O0lBRFcsY0FBa0M7SUFBbEMsdUNBQWtDOzs7SUFZbkQsbUNBWWU7Ozs7SUFUYiw0Q0FBK0Isa0NBQUEsa0NBQUE7SUFJL0Isb0RBQTJCO0lBQzNCLDBDQUF3Qiw2QkFBQSw2QkFBQTs7OztJQWUxQix3Q0FhQztJQURDLHdhQUFrQztJQUVwQyxpQkFBZTs7Ozs7OztJQVhiLDRDQUErQixrQ0FBQSxrQ0FBQTtJQU8vQiwrREFBa0M7SUFIbEMsMENBQXdCLG1D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QUMsZUFBZTtZQUtMLElBQUk7a0JBQXBCLEtBQUs7bUJBQUMsUUFBUTtZQXdCUyxPQUFPO2tCQUE5QixLQUFLO21CQUFDLFdBQVc7O2tGQXRDUCxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgSW5wdXQsIE9uRGVzdHJveSwgUmVuZGVyZXIyLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9HcmlkUm93QWN0aW9ucyB9IGZyb20gJy4vcG8tZ3JpZC1yb3ctYWN0aW9ucy5pbnRlcmZhY2UnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqID4gQ29tcG9uZW50ZSBlbSBkZXNlbnZvbHZpbWVudG8sIHBvZGVuZG8gaGF2ZXIgQlJFQUtJTkcgQ0hBTkdFUyBuYXMgcHLDs3hpbWFzIHZlcnPDtWVzLlxuICpcbiAqIENvbXBvbmVudGUgZ3JpZC5cbiAqXG4gKiBBw6fDtWVzIC8gYXRhbGhvczpcbiAqXG4gKiAtIEFSUk9XLVVQOiBOYXZlZ2EgcGFyYSBjZWx1bGEgc3VwZXJpb3IgLyBOYSB1bHRpbWEgbGluaGEgYWRpY2lvbmEgdW1hIGxpbmhhIGVtIGJyYW5jbyBubyBncmlkO1xuICogLSBBUlJPVy1ET1dOOiBOYXZlZ2EgcGFyYSBjZWx1bGEgaW5mZXJpb3I7XG4gKiAtIEFSUk9XLVJJR0hUOiBOYXZlZ2EgcGFyYSBjZWx1bGEgZGlyZWl0YTtcbiAqIC0gQVJST1ctTEVGVDogTmF2ZWdhIHBhcmEgY2VsdWxhIGVzcXVlcmRhO1xuICogLSBUQUI6IE5hdmVnYSBwYXJhIHByw7N4aW1hIGNlbHVsYTtcbiAqIC0gU0hJRlQrVEFCOiBOYXZlZ2EgcGFyYSBjZWx1bGEgYW50ZXJpb3I7XG4gKiAtIENUUkwrREVMOiBSZW1vdmUgbGluaGE7XG4gKiAtIERFTC9CQUNLU1BBQ0U6IExpbXBhIGNlbHVsYTtcbiAqIC0gRU5URVI6IEVkaXRhIGxpbmhhIGNvbSB2YWxvciBhdHVhbC9Db25maXJtYSBlZGnDp8OjbyBkYSBjZWx1bGE7XG4gKiAtIERPVUJMRS1DTElDSzogRWRpdGEgbGluaGEgY29tIHZhbG9yIGF0dWFsO1xuICogLSBFU0M6IENhbmNlbGEgZWRpw6fDo28gZGEgY2VsdWxhIC8gQ2FuY2VsYSBpbnNlcsOnw6NvIGRlIGxpbmhhcyBlbSBicmFuY287XG4gKiAtIEEuLlovMC4uOTogSW5pY2lhIGVkacOnw6NvIGNvbSB2YWxvciBlbSBicmFuY28uXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwicG8tZ3JpZC1iYXNpY1wiIHRpdGxlPVwiUE8gR3JpZCBCYXNpY1wiPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tZ3JpZC1iYXNpYy9zYW1wbGUtcG8tZ3JpZC1iYXNpYy5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1ncmlkLWJhc2ljL3NhbXBsZS1wby1ncmlkLWJhc2ljLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BvLWdyaWQnLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tZ3JpZC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgUG9HcmlkQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95IHtcbiAgQFZpZXdDaGlsZCgndGFibGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSB0YWJsZUVsZW1lbnQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ3dyYXBwZXInLCB7IHN0YXRpYzogdHJ1ZSB9KSB0YWJsZVdyYXBwZXI6IEVsZW1lbnRSZWY7XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBw6fDtWVzIGRpc3BhcmFkYXMgcXVhbmRvIHVtYSBsaW5oYSBkbyBncmlkIMOpIG1hbmlwdWxhZGEuXG4gICAqL1xuICBASW5wdXQoJ3Atcm93LWFjdGlvbnMnKSByb3dBY3Rpb25zOiBQb0dyaWRSb3dBY3Rpb25zID0ge307XG5cbiAgLyoqXG4gICAqIExpc3RhIGNvbSBvcyBkYWRvcyBxdWUgc2Vyw6NvIGV4aWJpZG9zIG5vIGdyaWQuXG4gICAqL1xuICBASW5wdXQoJ3AtZGF0YScpIGRhdGE6IEFycmF5PGFueT4gPSBbXTtcblxuICBsYXN0Q2VsbDogc3RyaW5nID0gJzAtMCc7XG4gIGxhc3RSb3c6IG51bWJlciA9IDA7XG4gIGxhc3RDb2x1bW46IG51bWJlciA9IDA7XG4gIGN1cnJlbmN5Q2VsbDogc3RyaW5nID0gJzAtMCc7XG4gIGN1cnJlbmN5Um93OiBudW1iZXIgPSAwO1xuICBjdXJyZW5jeUNvbHVtbjogbnVtYmVyID0gMDtcbiAgY3VycmVuY3lPYmo6IGFueTtcblxuICBsb2dnZXIgPSBmYWxzZTtcblxuICB3aWR0aCA9ICcxMDAlJztcbiAgd2lkcG9yZWV6ZSA9IDA7XG4gIHdpZHRoQWN0aW9ucyA9IDA7XG5cbiAgcHJpdmF0ZSByZXNpemVMaXN0ZW5lcjogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSB0aW1lb3V0UmVzaXplO1xuXG4gIHByaXZhdGUgX2NvbHVtbnMgPSBbXTtcblxuICAvKipcbiAgICogQ29sdW5hcyBleGliaWRhcyBubyBncmlkLlxuICAgKi9cbiAgQElucHV0KCdwLWNvbHVtbnMnKSBzZXQgY29sdW1ucyh2YWx1ZTogQXJyYXk8YW55Pikge1xuICAgIHRoaXMuX2NvbHVtbnMgPSBbLi4udmFsdWVdO1xuXG4gICAgdGhpcy5fY29sdW1ucy5mb3JFYWNoKGNvbHVtbiA9PiB7XG4gICAgICBjb2x1bW4ubGFiZWwgPSBjb2x1bW4ubGFiZWwgfHwgY29sdW1uLnByb3BlcnR5O1xuXG4gICAgICBpZiAoY29sdW1uLmZyZWV6ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb2x1bW4uY3NzV2lkdGggPSBgJHtjb2x1bW4ud2lkdGggfHwgMTAwfXB4YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbHVtbi5jc3NXaWR0aCA9IGNvbHVtbi53aWR0aCA/IGAke2NvbHVtbi53aWR0aH1weGAgOiAnMTAwJSc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgZ2V0IGNvbHVtbnMoKTogQXJyYXk8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbHVtbnMuZmlsdGVyKGNvbHVtbiA9PiBjb2x1bW4uZnJlZXplICE9PSB0cnVlICYmIGNvbHVtbi5hY3Rpb24gIT09IHRydWUpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSBlbFJlZjogRWxlbWVudFJlZixcbiAgICByZW5kZXJlcjogUmVuZGVyZXIyXG4gICkge1xuICAgIHRoaXMuZGVib3VuY2VSZXNpemUoKTtcblxuICAgIHRoaXMucmVzaXplTGlzdGVuZXIgPSByZW5kZXJlci5saXN0ZW4oJ3dpbmRvdycsICdyZXNpemUnLCAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgdGhpcy5kZWJvdW5jZVJlc2l6ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMucmVzaXplTGlzdGVuZXIpIHtcbiAgICAgIHRoaXMucmVzaXplTGlzdGVuZXIoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZnJlZXplQ29sdW1ucygpIHtcbiAgICBjb25zdCBmcmVlemVDb2x1bW5zID0gdGhpcy5fY29sdW1ucy5maWx0ZXIoY29sdW1uID0+IGNvbHVtbi5mcmVlemUgPT09IHRydWUpO1xuXG4gICAgdGhpcy53aWRwb3JlZXplID0gZnJlZXplQ29sdW1ucy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYgKyAoY3VycmVudC53aWR0aCB8fCAxMDApLCAwKTtcblxuICAgIHJldHVybiBmcmVlemVDb2x1bW5zO1xuICB9XG5cbiAgZ2V0IGFjdGlvbkNvbHVtbnMoKSB7XG4gICAgY29uc3QgYWN0aW9uc0NvbHVtbnMgPSB0aGlzLl9jb2x1bW5zLmZpbHRlcihjb2x1bW4gPT4gY29sdW1uLmFjdGlvbiA9PT0gdHJ1ZSk7XG5cbiAgICB0aGlzLndpZHRoQWN0aW9ucyA9IGFjdGlvbnNDb2x1bW5zLmxlbmd0aCA+IDAgPyA1NiA6IDA7XG5cbiAgICByZXR1cm4gYWN0aW9uc0NvbHVtbnM7XG4gIH1cblxuICBjYW5jZWxSb3coZXZlbnQ6IGFueSwgcm93OiBhbnkpIHtcbiAgICBjb25zdCBlbCA9IHRoaXMuZ2V0RXZlbnRQYXRoKGV2ZW50KS5maW5kKGVsZW1lbnQgPT4gZWxlbWVudC5pZCk7XG5cbiAgICBpZiAoIWVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgW3hdID0gZWwuaWQuc3BsaXQoJy0nKTtcblxuICAgIGlmICh0aGlzLmlzRW1wdHlSb3coeCkpIHtcbiAgICAgIGlmICghdGhpcy5yZW1vdmVSb3coZXZlbnQsIHJvdykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmN1cnJlbmN5T2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kYXRhW3RoaXMuY3VycmVuY3lSb3cgLSAxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGF0YVsreCAtIDFdID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jdXJyZW5jeU9iaik7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2VsZWN0Q2VsbCh0aGlzLmN1cnJlbmN5Um93LCB0aGlzLmN1cnJlbmN5Q29sdW1uKSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlUm93KGV2ZW50OiBhbnksIHJvdzogYW55KTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMucm93QWN0aW9ucy5iZWZvcmVSZW1vdmUgJiYgIXRoaXMucm93QWN0aW9ucy5iZWZvcmVSZW1vdmUoT2JqZWN0LmFzc2lnbih7fSwgcm93KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZGF0YS5pbmRleE9mKHJvdyk7XG5cbiAgICB0aGlzLmRhdGEuc3BsaWNlKGluZGV4LCAxKTtcblxuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPT09IDAgfHwgaW5kZXggPT09IHRoaXMuZGF0YS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2VsZWN0Q2VsbCh0aGlzLmN1cnJlbmN5Um93IC0gMSwgdGhpcy5jdXJyZW5jeUNvbHVtbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0Q2VsbCh0aGlzLmN1cnJlbmN5Um93LCB0aGlzLmN1cnJlbmN5Q29sdW1uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHRhYmxlS2V5ZG93bihldmVudDogYW55LCBkaXJlY3Rpb246IHN0cmluZykge1xuICAgIGxldCBbcm93LCBjb2xdID0gZXZlbnQudGFyZ2V0LmlkLnNwbGl0KCctJyk7XG4gICAgcm93ID0gK3JvdztcbiAgICBjb2wgPSArY29sO1xuICAgIGxldCBwcm93ID0gK3JvdztcbiAgICBsZXQgcGNvbCA9ICtjb2w7XG5cbiAgICBpZiAoZGlyZWN0aW9uID09PSAnZG93bicpIHtcbiAgICAgIGlmIChyb3cgPD0gdGhpcy5kYXRhLmxlbmd0aCkge1xuICAgICAgICBwcm93Kys7XG4gICAgICB9XG5cbiAgICAgIGlmIChyb3cgPT09IHRoaXMuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHJvdyA9PT0gMCB8fCAhdGhpcy5pc0VtcHR5Um93KHJvdykpIHtcbiAgICAgICAgICBpZiAodGhpcy5zYXZlUm93KHJvdykpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbnNlcnRSb3coKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvdy0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICd1cCcgJiYgcm93ID4gMCkge1xuICAgICAgcHJvdy0tO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcgJiYgY29sID4gMCkge1xuICAgICAgcGNvbC0tO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnICYmIGNvbCA8IHRoaXMuX2NvbHVtbnMubGVuZ3RoIC0gMSkge1xuICAgICAgcGNvbCsrO1xuICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgIGlmIChjb2wgPCB0aGlzLl9jb2x1bW5zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcGNvbCsrO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSBlbHNlIGlmIChyb3cgPCB0aGlzLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgIHBjb2wgPSAwO1xuICAgICAgICBwcm93Kys7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdwcmlvcicpIHtcbiAgICAgIGlmIChjb2wgPiAwKSB7XG4gICAgICAgIHBjb2wtLTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH0gZWxzZSBpZiAocm93ID4gMCkge1xuICAgICAgICBwY29sID0gdGhpcy5fY29sdW1ucy5sZW5ndGggLSAxO1xuICAgICAgICBwcm93LS07XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVuY3lDZWxsID09PSBgJHtwcm93fS0ke3Bjb2x9YCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwcm93ICE9PSB0aGlzLmN1cnJlbmN5Um93ICYmIHJvdyA+IDAgJiYgdGhpcy5kYXRhLmxlbmd0aCA+PSByb3cpIHtcbiAgICAgIGlmICghdGhpcy5pc0VtcHR5Um93KHJvdykpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNhdmVSb3cocm93KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbW92ZVJvdyhldmVudCwgcm93KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbmN5Um93ICE9PSBwcm93KSB7XG4gICAgICB0aGlzLmN1cnJlbmN5T2JqID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kYXRhW3Byb3cgLSAxXSk7XG4gICAgfVxuXG4gICAgdGhpcy5sYXN0Q2VsbCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgICB0aGlzLmxhc3RSb3cgPSByb3c7XG4gICAgdGhpcy5sYXN0Q29sdW1uID0gY29sO1xuXG4gICAgdGhpcy5zZWxlY3RDZWxsKHByb3csIHBjb2wpO1xuICB9XG5cbiAgdGFibGVDbGljayhldmVudDogYW55KSB7XG4gICAgY29uc3QgZWwgPSB0aGlzLmdldEV2ZW50UGF0aChldmVudCkuZmluZChlbGVtZW50ID0+IGVsZW1lbnQuaWQpO1xuXG4gICAgaWYgKCFlbCkge1xuICAgICAgdGhpcy5zZWxlY3RDZWxsKHRoaXMuY3VycmVuY3lSb3csIHRoaXMuY3VycmVuY3lDb2x1bW4pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbmN5Q2VsbCA9PT0gZWwuaWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBbcm93LCBjb2xdID0gZWwuaWQuc3BsaXQoJy0nKTtcbiAgICBjb25zdCBwcm93ID0gK3JvdztcbiAgICBjb25zdCBwY29sID0gK2NvbDtcblxuICAgIGlmIChwcm93ICE9PSB0aGlzLmN1cnJlbmN5Um93KSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW5jeVJvdyA+IDApIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzRW1wdHlSb3codGhpcy5jdXJyZW5jeVJvdykpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuc2F2ZVJvdyh0aGlzLmN1cnJlbmN5Um93KSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RDZWxsKHRoaXMuY3VycmVuY3lSb3csIHRoaXMuY3VycmVuY3lDb2x1bW4pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIXRoaXMucmVtb3ZlUm93KGV2ZW50LCByb3cpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY3VycmVuY3lPYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRhdGFbcHJvdyAtIDFdKTtcbiAgICB9XG5cbiAgICB0aGlzLmxhc3RDZWxsID0gdGhpcy5jdXJyZW5jeUNlbGw7XG4gICAgdGhpcy5sYXN0Um93ID0gdGhpcy5jdXJyZW5jeVJvdztcbiAgICB0aGlzLmxhc3RDb2x1bW4gPSB0aGlzLmN1cnJlbmN5Q29sdW1uO1xuXG4gICAgdGhpcy5jdXJyZW5jeUNlbGwgPSBlbC5pZDtcbiAgICB0aGlzLmN1cnJlbmN5Um93ID0gcHJvdztcbiAgICB0aGlzLmN1cnJlbmN5Q29sdW1uID0gcGNvbDtcbiAgfVxuXG4gIHNhdmVSb3cocm93OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBvYmogPSB0aGlzLmRhdGFbcm93IC0gMV07XG5cbiAgICBpZiAoIU9iamVjdC5rZXlzKG9iaikuc29tZShwcm9wID0+IG9ialtwcm9wXSAhPT0gdGhpcy5jdXJyZW5jeU9ialtwcm9wXSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJvd0FjdGlvbnMuYmVmb3JlU2F2ZSAmJiAhdGhpcy5yb3dBY3Rpb25zLmJlZm9yZVNhdmUob2JqLCB0aGlzLmN1cnJlbmN5T2JqKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcXVpcmVkcyA9IFtdO1xuXG4gICAgdGhpcy5jb2x1bW5zLmZvckVhY2goY29sdW1uID0+IHtcbiAgICAgIGlmIChjb2x1bW4ucmVxdWlyZWQgPT09IHRydWUgJiYgIW9ialtjb2x1bW4ucHJvcGVydHldKSB7XG4gICAgICAgIHJlcXVpcmVkcy5wdXNoKGNvbHVtbi5wcm9wZXJ0eSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVxdWlyZWRzLmxlbmd0aCA9PT0gMDtcbiAgfVxuXG4gIGluc2VydFJvdygpIHtcbiAgICBjb25zdCBvYmogPSB7fTtcblxuICAgIGlmICh0aGlzLnJvd0FjdGlvbnMuYmVmb3JlSW5zZXJ0ICYmICF0aGlzLnJvd0FjdGlvbnMuYmVmb3JlSW5zZXJ0KG9iaikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGEucHVzaChvYmopO1xuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpc0VtcHR5Um93KHJvdzogbnVtYmVyKSB7XG4gICAgY29uc3Qgb2JqID0gdGhpcy5kYXRhW3JvdyAtIDFdO1xuXG4gICAgaWYgKCFvYmopIHtcbiAgICAgIC8vIHRpdGxlXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsbGVkID0gT2JqZWN0LmtleXMob2JqKS5zb21lKHByb3BlcnR5ID0+IG9ialtwcm9wZXJ0eV0pO1xuXG4gICAgcmV0dXJuICFmaWxsZWQ7XG4gIH1cblxuICBzZWxlY3RDZWxsKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcikge1xuICAgIGNvbnN0IG5leHRDZWxsID0gdGhpcy5lbFJlZi5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYFtpZD0nJHtyb3d9LSR7Y29sfSddYCk7XG5cbiAgICBpZiAobmV4dENlbGwpIHtcbiAgICAgIHRoaXMuY3VycmVuY3lDZWxsID0gYCR7cm93fS0ke2NvbH1gO1xuICAgICAgdGhpcy5jdXJyZW5jeVJvdyA9IHJvdztcbiAgICAgIHRoaXMuY3VycmVuY3lDb2x1bW4gPSBjb2w7XG4gICAgICBuZXh0Q2VsbC5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZGVib3VuY2VSZXNpemUoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dFJlc2l6ZSk7XG5cbiAgICB0aGlzLnRpbWVvdXRSZXNpemUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IHdpZHRoVGFibGVXcmFwcGVyID0gdGhpcy50YWJsZVdyYXBwZXIubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgIHRoaXMud2lkdGggPSBgJHt3aWR0aFRhYmxlV3JhcHBlciAtICh0aGlzLndpZHBvcmVlemUgKyA4KSAtIHRoaXMud2lkdGhBY3Rpb25zfXB4YDtcbiAgICB9LCAxMDApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRFdmVudFBhdGgoZXZlbnQpIHtcbiAgICAvLyBmaXJlZm94IGRvIG5vdCBoYXZlIHN1cHBvcnQgdG8gZXZlbnQucGF0aFxuICAgIHJldHVybiBldmVudC5wYXRoIHx8IGV2ZW50LmNvbXBvc2VkUGF0aCgpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwicG8tZ3JpZC13cmFwcGVyIHBvLWdyaWQtcm93LXdyYXBwZXJcIiAjd3JhcHBlcj5cbiAgPGRpdiAqbmdJZj1cImxvZ2dlclwiPlxuICAgIGxhc3RDZWxsOiB7eyBsYXN0Q2VsbCB9fSB8IGN1cnJlbmN5Q2VsbDoge3sgY3VycmVuY3lDZWxsIH19IDxiciAvPlxuICAgIGxhc3RSb3c6IHt7IGxhc3RSb3cgfX0gfCBjdXJyZW5jeVJvdzoge3sgY3VycmVuY3lSb3cgfX0gPGJyIC8+XG4gICAgbGFzdENvbHVtbjoge3sgbGFzdENvbHVtbiB9fSB8IGN1cnJlbmN5Q29sdW1uOiB7eyBjdXJyZW5jeUNvbHVtbiB9fSA8YnIgLz5cbiAgICA8aHIgLz5cbiAgICBjdXJyZW5jeU9iajoge3sgY3VycmVuY3lPYmogfCBqc29uIH19XG4gICAgPGhyIC8+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJwby1ncmlkXCI+XG4gICAgPGRpdiBjbGFzcz1cInBvLWdyaWQtYm9keVwiPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInBvLWdyaWQtcm93XCJcbiAgICAgICAgI3RhYmxlXG4gICAgICAgIChrZXlkb3duLmFycm93dXApPVwidGFibGVLZXlkb3duKCRldmVudCwgJ3VwJylcIlxuICAgICAgICAoa2V5ZG93bi5hcnJvd2Rvd24pPVwidGFibGVLZXlkb3duKCRldmVudCwgJ2Rvd24nKVwiXG4gICAgICAgIChrZXlkb3duLmFycm93bGVmdCk9XCJ0YWJsZUtleWRvd24oJGV2ZW50LCAnbGVmdCcpXCJcbiAgICAgICAgKGtleWRvd24uYXJyb3dyaWdodCk9XCJ0YWJsZUtleWRvd24oJGV2ZW50LCAncmlnaHQnKVwiXG4gICAgICAgIChrZXlkb3duLnRhYik9XCJ0YWJsZUtleWRvd24oJGV2ZW50LCAnbmV4dCcpXCJcbiAgICAgICAgKGtleWRvd24uc2hpZnQudGFiKT1cInRhYmxlS2V5ZG93bigkZXZlbnQsICdwcmlvcicpXCJcbiAgICAgICAgKGNsaWNrKT1cInRhYmxlQ2xpY2soJGV2ZW50KVwiXG4gICAgICAgIChjb250ZXh0bWVudSk9XCJ0YWJsZUNsaWNrKCRldmVudClcIlxuICAgICAgICAoZGJsY2xpY2spPVwidGFibGVDbGljaygkZXZlbnQpXCJcbiAgICAgID5cbiAgICAgICAgPGRpdiBjbGFzcz1cInBvLWdyaWQtY2VsbCBwby1ncmlkLWNlbGwtZnJlZXplXCIgKm5nSWY9XCJmcmVlemVDb2x1bW5zLmxlbmd0aCA+IDBcIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiZGl2RnJlZXplQ29sdW1uc1wiPjwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJwby1ncmlkLWNlbGwgcG8tZ3JpZC1jZWxsLW5vcm1hbFwiXG4gICAgICAgICAgW3N0eWxlLndpZHRoXT1cIndpZHRoXCJcbiAgICAgICAgICBbc3R5bGUubWF4LXdpZHRoXT1cIndpZHRoXCJcbiAgICAgICAgICBbc3R5bGUubWluLXdpZHRoXT1cIndpZHRoXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJkaXZDb2x1bW5zXCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwby1ncmlkLWNlbGwgcG8tZ3JpZC1jZWxsLWFjdGlvblwiICpuZ0lmPVwiYWN0aW9uQ29sdW1ucy5sZW5ndGggPiAwXCI+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImRpdkFjdGlvbkNvbHVtbnNcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPCEtLSBDb2x1bmEgY29tIGFzIGNvbHVuYXMgY29uZ2VsYWRhcyAtLT5cbjxuZy10ZW1wbGF0ZSAjZGl2RnJlZXplQ29sdW1ucz5cbiAgPGRpdiBjbGFzcz1cInBvLWdyaWQgcG8tZ3JpZC1mcmVlemVcIj5cbiAgICA8ZGl2IGNsYXNzPVwicG8tZ3JpZC1oZWFkZXItZ3JvdXBcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwby1ncmlkLXJvd1wiPlxuICAgICAgICA8cG8tZ3JpZC1oZWFkXG4gICAgICAgICAgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBmcmVlemVDb2x1bW5zOyBpbmRleCBhcyBpXCJcbiAgICAgICAgICBjbGFzcz1cInBvLWdyaWQtdGl0bGVcIlxuICAgICAgICAgIFtzdHlsZS53aWR0aF09XCJjb2x1bW4uY3NzV2lkdGhcIlxuICAgICAgICAgIFtzdHlsZS5tYXgtd2lkdGhdPVwiY29sdW1uLmNzc1dpZHRoXCJcbiAgICAgICAgICBbc3R5bGUubWluLXdpZHRoXT1cImNvbHVtbi5jc3NXaWR0aFwiXG4gICAgICAgICAgcC1mcmVlemU9XCJ0cnVlXCJcbiAgICAgICAgICBwLXBvc2l0aW9uPVwie3sgJzAtJyArIGkgfX1cIlxuICAgICAgICAgIFtwLXdpZHRoXT1cImNvbHVtbi53aWR0aFwiXG4gICAgICAgICAgW3AtYWxpZ25dPVwiY29sdW1uLmFsaWduXCJcbiAgICAgICAgICBbcC10aXRsZV09XCJjb2x1bW4ubGFiZWxcIlxuICAgICAgICA+XG4gICAgICAgIDwvcG8tZ3JpZC1oZWFkPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwicG8tZ3JpZC1ib2R5XCI+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzPVwicG8tZ3JpZC1yb3dcIlxuICAgICAgICAqbmdGb3I9XCJsZXQgcm93IG9mIGRhdGE7IGluZGV4IGFzIGpcIlxuICAgICAgICAoa2V5ZG93bi5jb250cm9sLmRlbGV0ZSk9XCJyZW1vdmVSb3coJGV2ZW50LCByb3cpXCJcbiAgICAgICAgKGtleWRvd24uZXNjKT1cImNhbmNlbFJvdygkZXZlbnQsIHJvdylcIlxuICAgICAgPlxuICAgICAgICA8cG8tZ3JpZC1jZWxsXG4gICAgICAgICAgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBmcmVlemVDb2x1bW5zOyBpbmRleCBhcyBpXCJcbiAgICAgICAgICBjbGFzcz1cInBvLWdyaWQtY2VsbFwiXG4gICAgICAgICAgW3N0eWxlLndpZHRoXT1cImNvbHVtbi5jc3NXaWR0aFwiXG4gICAgICAgICAgW3N0eWxlLm1heC13aWR0aF09XCJjb2x1bW4uY3NzV2lkdGhcIlxuICAgICAgICAgIFtzdHlsZS5taW4td2lkdGhdPVwiY29sdW1uLmNzc1dpZHRoXCJcbiAgICAgICAgICBwLWZyZWV6ZT1cInRydWVcIlxuICAgICAgICAgIFtwLWFsaWduXT1cImNvbHVtbi5hbGlnblwiXG4gICAgICAgICAgW3AtcmVhZG9ubHldPVwiY29sdW1uLnJlYWRvbmx5XCJcbiAgICAgICAgICBbcC1yZXF1aXJlZF09XCJjb2x1bW4ucmVxdWlyZWRcIlxuICAgICAgICAgIHAtcG9zaXRpb249XCJ7eyBqICsgMSArICctJyArIGkgfX1cIlxuICAgICAgICAgIFtwLXdpZHRoXT1cImNvbHVtbi53aWR0aFwiXG4gICAgICAgICAgWyhwLXZhbHVlKV09XCJyb3dbY29sdW1uLnByb3BlcnR5XVwiXG4gICAgICAgID5cbiAgICAgICAgPC9wby1ncmlkLWNlbGw+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuPCEtLSBGSU06IENvbHVuYSBjb20gYXMgY29sdW5hcyBjb25nZWxhZGFzIC0tPlxuXG48IS0tIENvbHVuYSBjb20gYXMgY29sdW5hcyBub3JuYWlzIC0tPlxuPG5nLXRlbXBsYXRlICNkaXZDb2x1bW5zPlxuICA8ZGl2IGNsYXNzPVwicG8tZ3JpZCBwby1ncmlkLW5vcm1hbFwiPlxuICAgIDxkaXYgY2xhc3M9XCJwby1ncmlkLWhlYWRlci1ncm91cFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInBvLWdyaWQtcm93XCI+XG4gICAgICAgIDxwby1ncmlkLWhlYWRcbiAgICAgICAgICAqbmdGb3I9XCJsZXQgY29sdW1uIG9mIGNvbHVtbnM7IGluZGV4IGFzIGlcIlxuICAgICAgICAgIGNsYXNzPVwicG8tZ3JpZC10aXRsZVwiXG4gICAgICAgICAgW3N0eWxlLndpZHRoXT1cImNvbHVtbi5jc3NXaWR0aFwiXG4gICAgICAgICAgW3N0eWxlLm1heC13aWR0aF09XCJjb2x1bW4uY3NzV2lkdGhcIlxuICAgICAgICAgIFtzdHlsZS5taW4td2lkdGhdPVwiY29sdW1uLmNzc1dpZHRoXCJcbiAgICAgICAgICBbcC1hbGlnbl09XCJjb2x1bW4uYWxpZ25cIlxuICAgICAgICAgIHAtcG9zaXRpb249XCJ7eyAnMC0nICsgKGkgKyBmcmVlemVDb2x1bW5zLmxlbmd0aCkgfX1cIlxuICAgICAgICAgIFtwLXRpdGxlXT1cImNvbHVtbi5sYWJlbFwiXG4gICAgICAgICAgW3Atd2lkdGhdPVwiY29sdW1uLndpZHRoXCJcbiAgICAgICAgPlxuICAgICAgICA8L3BvLWdyaWQtaGVhZD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cInBvLWdyaWQtYm9keVwiPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInBvLWdyaWQtcm93XCJcbiAgICAgICAgKm5nRm9yPVwibGV0IHJvdyBvZiBkYXRhOyBpbmRleCBhcyBqXCJcbiAgICAgICAgKGtleWRvd24uY29udHJvbC5kZWxldGUpPVwicmVtb3ZlUm93KCRldmVudCwgcm93KVwiXG4gICAgICAgIChrZXlkb3duLmVzYyk9XCJjYW5jZWxSb3coJGV2ZW50LCByb3cpXCJcbiAgICAgID5cbiAgICAgICAgPHBvLWdyaWQtY2VsbFxuICAgICAgICAgICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgY29sdW1uczsgaW5kZXggYXMgaVwiXG4gICAgICAgICAgY2xhc3M9XCJwby1ncmlkLWNlbGxcIlxuICAgICAgICAgIFtzdHlsZS53aWR0aF09XCJjb2x1bW4uY3NzV2lkdGhcIlxuICAgICAgICAgIFtzdHlsZS5tYXgtd2lkdGhdPVwiY29sdW1uLmNzc1dpZHRoXCJcbiAgICAgICAgICBbc3R5bGUubWluLXdpZHRoXT1cImNvbHVtbi5jc3NXaWR0aFwiXG4gICAgICAgICAgW3AtYWxpZ25dPVwiY29sdW1uLmFsaWduXCJcbiAgICAgICAgICBbcC1yZWFkb25seV09XCJjb2x1bW4ucmVhZG9ubHlcIlxuICAgICAgICAgIFtwLXJlcXVpcmVkXT1cImNvbHVtbi5yZXF1aXJlZFwiXG4gICAgICAgICAgcC1wb3NpdGlvbj1cInt7IGogKyAxICsgJy0nICsgKGkgKyBmcmVlemVDb2x1bW5zLmxlbmd0aCkgfX1cIlxuICAgICAgICAgIFsocC12YWx1ZSldPVwicm93W2NvbHVtbi5wcm9wZXJ0eV1cIlxuICAgICAgICAgIFtwLXdpZHRoXT1cImNvbHVtbi53aWR0aFwiXG4gICAgICAgID5cbiAgICAgICAgPC9wby1ncmlkLWNlbGw+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L25nLXRlbXBsYXRlPlxuPCEtLSBGSU06IENvbHVuYSBjb20gYXMgY29sdW5hcyBub3JuYWlzIC0tPlxuXG48IS0tIENvbHVuYSBjb20gYXMgY29sdW5hcyBkZSBhw6fDo28gLS0+XG48bmctdGVtcGxhdGUgI2RpdkFjdGlvbkNvbHVtbnM+XG4gIDxkaXYgY2xhc3M9XCJwby1ncmlkIHBvLWdyaWQtYWN0aW9uc1wiPlxuICAgIDxkaXYgY2xhc3M9XCJwby1ncmlkLWhlYWRlci1ncm91cFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInBvLWdyaWQtcm93XCI+XG4gICAgICAgIDxwby1ncmlkLWhlYWRcbiAgICAgICAgICAqbmdGb3I9XCJsZXQgY29sdW1uIG9mIGFjdGlvbkNvbHVtbnM7IGluZGV4IGFzIGlcIlxuICAgICAgICAgIGNsYXNzPVwicG8tZ3JpZC10aXRsZVwiXG4gICAgICAgICAgcC1wb3NpdGlvbj1cInt7ICcwLScgKyAoaSArIGZyZWV6ZUNvbHVtbnMubGVuZ3RoICsgY29sdW1ucy5sZW5ndGgpIH19XCJcbiAgICAgICAgICBbcC10aXRsZV09XCJjb2x1bW4ubGFiZWxcIlxuICAgICAgICAgIFtwLWFsaWduXT1cImNvbHVtbi5hbGlnblwiXG4gICAgICAgID5cbiAgICAgICAgPC9wby1ncmlkLWhlYWQ+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJwby1ncmlkLWJvZHlcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJwby1ncmlkLXJvd1wiXG4gICAgICAgICpuZ0Zvcj1cImxldCByb3cgb2YgZGF0YTsgaW5kZXggYXMgalwiXG4gICAgICAgIChrZXlkb3duLmNvbnRyb2wuZGVsZXRlKT1cInJlbW92ZVJvdygkZXZlbnQsIHJvdylcIlxuICAgICAgICAoa2V5ZG93bi5lc2MpPVwiY2FuY2VsUm93KCRldmVudCwgcm93KVwiXG4gICAgICA+XG4gICAgICAgIDxwby1ncmlkLWNlbGwtYWN0aW9uXG4gICAgICAgICAgKm5nRm9yPVwibGV0IGNvbHVtbiBvZiBhY3Rpb25Db2x1bW5zOyBpbmRleCBhcyBpXCJcbiAgICAgICAgICBjbGFzcz1cInBvLWdyaWQtY2VsbFwiXG4gICAgICAgICAgcC1wb3NpdGlvbj1cInt7IGogKyAxICsgJy0nICsgKGkgKyBmcmVlemVDb2x1bW5zLmxlbmd0aCArIGNvbHVtbnMubGVuZ3RoKSB9fVwiXG4gICAgICAgICAgW3AtdmFsdWVdPVwicm93W2NvbHVtbi5wcm9wZXJ0eV1cIlxuICAgICAgICA+XG4gICAgICAgIDwvcG8tZ3JpZC1jZWxsLWFjdGlvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG48IS0tIEZJTTogQ29sdW5hIGNvbSBhcyBjb2x1bmFzIGRlIGHDp8OjbyAtLT5cbiJdfQ==