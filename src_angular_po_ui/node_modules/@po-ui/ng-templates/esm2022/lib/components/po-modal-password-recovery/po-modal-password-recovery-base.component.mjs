import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { poLocaleDefault } from '@po-ui/ng-components';
import { poModalPasswordRecoveryLiterals } from './literals/i18n/po-modal-password-recovery-literals';
import { PoModalPasswordRecoveryType } from './enums/po-modal-password-recovery-type.enum';
import * as i0 from "@angular/core";
import * as i1 from "@po-ui/ng-components";
const PoModalPasswordRecoveryDefaultMaxLength = 15;
const PoModalPasswordRecoveryDefaultMinLength = 15;
const PoModalPasswordRecoveryDefaultPhone = '(99) 99999-9999';
const PoModalPasswordRecoveryTypeDefault = PoModalPasswordRecoveryType.Email;
/**
 * @description
 *
 * O componente `po-modal-password-recovery` é utilizado como template para solicitação de troca de senha.
 *
 * É composto por uma modal que possui três telas, cada uma com as seguintes características:
 *
 * - A primeira possui campos para preenchimento de email ou número de telefone;
 * - Tela com campo para preenchimento de código SMS enviado para o número de telefone enviado;
 * - A terceira se trata de uma confirmação de envio de link para a caixa de email do usuário.
 *
 *
 * A propriedade `p-url-recovery` automatiza a rotina do componente e simplifica o processo
 * para recuperação de senha, bastando definir uma url para requisição dos recursos.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 *
 * Para a modal de digitação de código SMS, é possível definir uma mensagem de erro
 * customizada com a propriedade `p-code-error` e há um link para
 * reenvio de código por SMS. Ao reenviar, o evento `p-code-submit` envia um objeto com o telefone do usuário e a quantidade
 * de vezes em que o usuário fez a solicitação de reenvio.
 *
 * > É indicada a utilização da tela de digitação para envio de código SMS apenas
 * se a opção por envio SMS for disponibilizada para o usuário.
 *
 *
 * A modal de confirmação contém uma ação de reenvio e o evento `p-submit`
 * é quem passa o objeto contendo o email em conjunto com a quantidade de tentativas de reenvio.
 *
 * > A tela de confirmação é indicada para quando o usuário solicitar a troca através do email.
 *
 * > Os textos das modals são pré-definidos, imutáveis e são traduzidos de acordo com o idioma do *browser* (pt, en e es)
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/@po-ui/style/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 */
export class PoModalPasswordRecoveryBaseComponent {
    /**
     * @optional
     *
     * @description
     *
     * Definição de mensagem de erro customizada para quando o usuário passar um código SMS inválido ou errado.
     */
    codeError;
    /**
     * @optional
     *
     * @description
     *
     * Endpoint usado pelo template para requisição do recurso. Quando preenchido,
     * o métodos `p-submit` e `p-submit-code` serão ignorados e o componente adquirirá automatização
     * para o processo de solicitação de troca de senha.
     *
     * ### Processos
     * Ao digitar um valor válido no campo de email/telefone e pressionar **enviar**,
     * o componente fará uma requisição `POST` na url especificada nesta propriedade passando o objeto contendo o valor definido pelo usuário.
     *
     * ```
     * body {
     *  email: email,
     *  retry?: retry
     * }
     * ```
     *
     *
     * #### Recuperação por email
     * Para a recuperação de senha por **email**, o código de resposta HTTP de status esperado é `204`.
     *
     * Em caso de **sucesso**, será exibida a modal de confirmação de e-mail para o usuário.
     *
     *
     * > A ação **Reenviar** na tela de confirmação efetua uma nova requisição
     * passando-se o objeto com incremento para o valor da propriedade **retry**.
     *
     * *Processo finalizado.*
     *
     *
     * #### Recuperação por SMS
     * Se a opção de recuperação for por **SMS**, o código de status de sucesso deve ser `200`.
     * Em caso de **sucesso**, abre-se a modal de digitação de código SMS e a resposta
     * desta requisição deve retornar uma definição de dados abaixo:
     *
     * ```
     * 200:
     *  {
     *    hash: hash,
     *    urlValidationCode?: url
     *  }
     * ```
     *
     *
     * - O **hash** será o código de validação da solicitação do SMS para ser enviado juntamente com o código de verificação do SMS;
     * - **urlValidationCode** é a url usada para validação do código enviado por SMS.
     *
     *
     * > Caso não seja passado urlValidationCode, o endpoint usado para validação do código será `<p-url-recovery>/validation`.
     *
     *
     * #### Validação do código SMS
     * Ao digitar um valor válido no campo de código SMS e pressionar **continuar**, o componente fará uma requisição `POST` contendo:
     *
     * ```
     * POST /<p-url-recovery>/validation OU /<urlValidationCode>
     * Body {
     *  hash: hash,
     *  code: code
     * }
     * ```
     *
     *
     * O código de resposta HTTP de status esperado é `200`.
     *
     * Em caso de **erro** na validação do código SMS, a modal se mantém com o campo para digitação
     * de código SMS
     *
     *
     * > Pode-se atribuir a mensagem de erro (message) para o atributo `p-code-error` conforme retorno abaixo:
     *
     * ```
     * 400
     *  {
     *    error {
     *      message: 'Error Message'
     *    }
     *  }
     * ```
     *
     *
     * Em caso de **sucesso**, espera-se a resposta desta requisição retornando a seguinte definição:
     *
     * ```
     * 200:
     *  {
     *    token: token,
     *    urlChangePassword?: url
     *  }
     * ```
     *
     *
     * - **token**: Token de alteração de senha;
     * - **urlChangePassword**: url para o formulário de alteração de senha.
     *
     *
     * O componente está configurado para redirecionar para a url estabelecida em `urlChangePassword`.
     *
     * > Caso não seja passado valor para urlChangePassword,
     * a url usada para validação será a `<p-url-recovery>/changePassword?token=<token>`.
     *
     * *Processo finalizado.*
     */
    urlRecovery;
    /**
     * @optional
     *
     * @description
     *
     * Ação contendo como parâmetro o código enviado por SMS e digitado pelo usuário.
     *
     * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
     */
    codeSubmit = new EventEmitter();
    /**
     * @optional
     *
     * @description
     *
     * Ação contendo o email como parâmetro e que é executada quando o usuário clica sobres os botões de 'enviar' e 'reenviar' e-mail.
     *
     * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
     */
    submit = new EventEmitter();
    email;
    maxLength = PoModalPasswordRecoveryDefaultMaxLength;
    minLength = PoModalPasswordRecoveryDefaultMinLength;
    modalPasswordRecoveryTypeAll;
    phone;
    smsCode;
    smsCodeErrorMessage;
    literals = poModalPasswordRecoveryLiterals[poLocaleDefault];
    _contactEmail;
    _phoneMask = PoModalPasswordRecoveryDefaultPhone;
    _type = PoModalPasswordRecoveryTypeDefault;
    /**
     * @optional
     *
     * @description
     *
     * Definição do e-mail que é exibido na mensagem para contato de suporte.
     */
    set contactEmail(value) {
        this._contactEmail = value;
        this.smsCodeErrorMessage = this.concatenateSMSErrorMessage(value);
    }
    get contactEmail() {
        return this._contactEmail;
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição da mascara do campo de telefone.
     *
     * @default `(99) 99999-9999`
     */
    set phoneMask(value) {
        this._phoneMask = value || PoModalPasswordRecoveryDefaultPhone;
        this.minLength = this.maxLength = this._phoneMask.length;
    }
    get phoneMask() {
        return this._phoneMask;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o tipo de recuperação de senha que será exibido.
     *
     * @default `PoModalPasswordRecoveryType.Email`
     *
     */
    set type(value) {
        this._type = Object.values(PoModalPasswordRecoveryType).includes(value)
            ? value
            : PoModalPasswordRecoveryTypeDefault;
    }
    get type() {
        return this._type;
    }
    constructor(languageService) {
        this.literals = {
            ...this.literals,
            ...poModalPasswordRecoveryLiterals[languageService.getShortLanguage()]
        };
    }
    concatenateSMSErrorMessage(value) {
        const literalCodeErrorMessage = this.literals.smsCodeErrorMessagePhrase;
        return value && value !== ''
            ? `${literalCodeErrorMessage} ${this.literals.prepositionIn} ${value}.`
            : literalCodeErrorMessage;
    }
    static ɵfac = function PoModalPasswordRecoveryBaseComponent_Factory(t) { return new (t || PoModalPasswordRecoveryBaseComponent)(i0.ɵɵdirectiveInject(i1.PoLanguageService)); };
    static ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoModalPasswordRecoveryBaseComponent, inputs: { codeError: [i0.ɵɵInputFlags.None, "p-code-error", "codeError"], urlRecovery: [i0.ɵɵInputFlags.None, "p-url-recovery", "urlRecovery"], contactEmail: [i0.ɵɵInputFlags.None, "p-contact-email", "contactEmail"], phoneMask: [i0.ɵɵInputFlags.None, "p-phone-mask", "phoneMask"], type: [i0.ɵɵInputFlags.None, "p-type", "type"] }, outputs: { codeSubmit: "p-code-submit", submit: "p-submit" } });
}
(() => { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoModalPasswordRecoveryBaseComponent, [{
        type: Directive
    }], () => [{ type: i1.PoLanguageService }], { codeError: [{
            type: Input,
            args: ['p-code-error']
        }], urlRecovery: [{
            type: Input,
            args: ['p-url-recovery']
        }], codeSubmit: [{
            type: Output,
            args: ['p-code-submit']
        }], submit: [{
            type: Output,
            args: ['p-submit']
        }], contactEmail: [{
            type: Input,
            args: ['p-contact-email']
        }], phoneMask: [{
            type: Input,
            args: ['p-phone-mask']
        }], type: [{
            type: Input,
            args: ['p-type']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy90ZW1wbGF0ZXMvc3JjL2xpYi9jb21wb25lbnRzL3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5L3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUsT0FBTyxFQUFxQixlQUFlLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUUxRSxPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSxxREFBcUQsQ0FBQztBQUN0RyxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQzs7O0FBRTNGLE1BQU0sdUNBQXVDLEdBQUcsRUFBRSxDQUFDO0FBQ25ELE1BQU0sdUNBQXVDLEdBQUcsRUFBRSxDQUFDO0FBQ25ELE1BQU0sbUNBQW1DLEdBQUcsaUJBQWlCLENBQUM7QUFDOUQsTUFBTSxrQ0FBa0MsR0FBZ0MsMkJBQTJCLENBQUMsS0FBSyxDQUFDO0FBRTFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQStDRztBQUVILE1BQU0sT0FBZ0Isb0NBQW9DO0lBQ3hEOzs7Ozs7T0FNRztJQUNvQixTQUFTLENBQVM7SUFFekM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXlHRztJQUNzQixXQUFXLENBQVU7SUFFOUM7Ozs7Ozs7O09BUUc7SUFDc0IsVUFBVSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7SUFFOUQ7Ozs7Ozs7O09BUUc7SUFDaUIsTUFBTSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7SUFFckQsS0FBSyxDQUFTO0lBQ2QsU0FBUyxHQUFHLHVDQUF1QyxDQUFDO0lBQ3BELFNBQVMsR0FBRyx1Q0FBdUMsQ0FBQztJQUNwRCw0QkFBNEIsQ0FBVTtJQUN0QyxLQUFLLENBQVM7SUFDZCxPQUFPLENBQVM7SUFDaEIsbUJBQW1CLENBQVM7SUFFNUIsUUFBUSxHQTRCSiwrQkFBK0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUU3QyxhQUFhLENBQVM7SUFDdEIsVUFBVSxHQUFHLG1DQUFtQyxDQUFDO0lBQ2pELEtBQUssR0FBZ0Msa0NBQWtDLENBQUM7SUFFaEY7Ozs7OztPQU1HO0lBQ0gsSUFBOEIsWUFBWSxDQUFDLEtBQWE7UUFDdEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFFM0IsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7SUFFRDs7Ozs7Ozs7T0FRRztJQUNILElBQTJCLFNBQVMsQ0FBQyxLQUFhO1FBQ2hELElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxJQUFJLG1DQUFtQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztJQUMzRCxDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRDs7Ozs7Ozs7O09BU0c7SUFDSCxJQUFxQixJQUFJLENBQUMsS0FBa0M7UUFDMUQsSUFBSSxDQUFDLEtBQUssR0FBUyxNQUFPLENBQUMsTUFBTSxDQUFDLDJCQUEyQixDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztZQUM1RSxDQUFDLENBQUMsS0FBSztZQUNQLENBQUMsQ0FBQyxrQ0FBa0MsQ0FBQztJQUN6QyxDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ04sT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFFRCxZQUFZLGVBQWtDO1FBQzVDLElBQUksQ0FBQyxRQUFRLEdBQUc7WUFDZCxHQUFHLElBQUksQ0FBQyxRQUFRO1lBQ2hCLEdBQUcsK0JBQStCLENBQUMsZUFBZSxDQUFDLGdCQUFnQixFQUFFLENBQUM7U0FDdkUsQ0FBQztJQUNKLENBQUM7SUFFTywwQkFBMEIsQ0FBQyxLQUFhO1FBQzlDLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUIsQ0FBQztRQUV4RSxPQUFPLEtBQUssSUFBSSxLQUFLLEtBQUssRUFBRTtZQUMxQixDQUFDLENBQUMsR0FBRyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsSUFBSSxLQUFLLEdBQUc7WUFDdkUsQ0FBQyxDQUFDLHVCQUF1QixDQUFDO0lBQzlCLENBQUM7OEZBMVBtQixvQ0FBb0M7NkRBQXBDLG9DQUFvQzs7aUZBQXBDLG9DQUFvQztjQUR6RCxTQUFTO2tEQVNlLFNBQVM7a0JBQS9CLEtBQUs7bUJBQUMsY0FBYztZQTRHSSxXQUFXO2tCQUFuQyxLQUFLO21CQUFDLGdCQUFnQjtZQVdFLFVBQVU7a0JBQWxDLE1BQU07bUJBQUMsZUFBZTtZQVdILE1BQU07a0JBQXpCLE1BQU07bUJBQUMsVUFBVTtZQW1EWSxZQUFZO2tCQUF6QyxLQUFLO21CQUFDLGlCQUFpQjtZQW1CRyxTQUFTO2tCQUFuQyxLQUFLO21CQUFDLGNBQWM7WUFtQkEsSUFBSTtrQkFBeEIsS0FBSzttQkFBQyxRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9MYW5ndWFnZVNlcnZpY2UsIHBvTG9jYWxlRGVmYXVsdCB9IGZyb20gJ0Bwby11aS9uZy1jb21wb25lbnRzJztcblxuaW1wb3J0IHsgcG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlMaXRlcmFscyB9IGZyb20gJy4vbGl0ZXJhbHMvaTE4bi9wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1saXRlcmFscyc7XG5pbXBvcnQgeyBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUgfSBmcm9tICcuL2VudW1zL3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LXR5cGUuZW51bSc7XG5cbmNvbnN0IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1heExlbmd0aCA9IDE1O1xuY29uc3QgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0TWluTGVuZ3RoID0gMTU7XG5jb25zdCBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRQaG9uZSA9ICcoOTkpIDk5OTk5LTk5OTknO1xuY29uc3QgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlRGVmYXVsdDogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkVtYWlsO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gY29tcG9uZW50ZSBgcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnlgIMOpIHV0aWxpemFkbyBjb21vIHRlbXBsYXRlIHBhcmEgc29saWNpdGHDp8OjbyBkZSB0cm9jYSBkZSBzZW5oYS5cbiAqXG4gKiDDiSBjb21wb3N0byBwb3IgdW1hIG1vZGFsIHF1ZSBwb3NzdWkgdHLDqnMgdGVsYXMsIGNhZGEgdW1hIGNvbSBhcyBzZWd1aW50ZXMgY2FyYWN0ZXLDrXN0aWNhczpcbiAqXG4gKiAtIEEgcHJpbWVpcmEgcG9zc3VpIGNhbXBvcyBwYXJhIHByZWVuY2hpbWVudG8gZGUgZW1haWwgb3UgbsO6bWVybyBkZSB0ZWxlZm9uZTtcbiAqIC0gVGVsYSBjb20gY2FtcG8gcGFyYSBwcmVlbmNoaW1lbnRvIGRlIGPDs2RpZ28gU01TIGVudmlhZG8gcGFyYSBvIG7Dum1lcm8gZGUgdGVsZWZvbmUgZW52aWFkbztcbiAqIC0gQSB0ZXJjZWlyYSBzZSB0cmF0YSBkZSB1bWEgY29uZmlybWHDp8OjbyBkZSBlbnZpbyBkZSBsaW5rIHBhcmEgYSBjYWl4YSBkZSBlbWFpbCBkbyB1c3XDoXJpby5cbiAqXG4gKlxuICogQSBwcm9wcmllZGFkZSBgcC11cmwtcmVjb3ZlcnlgIGF1dG9tYXRpemEgYSByb3RpbmEgZG8gY29tcG9uZW50ZSBlIHNpbXBsaWZpY2EgbyBwcm9jZXNzb1xuICogcGFyYSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhLCBiYXN0YW5kbyBkZWZpbmlyIHVtYSB1cmwgcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zLlxuICogU2V1IGRldGFsaGFtZW50byBwYXJhIHVzbyBwb2RlIHNlciB2aXN0byBsb2dvIGFiYWl4byBlbSAqcHJvcHJpZWRhZGVzKi5cbiAqIENhc28ganVsZ3VlIG5lY2Vzc8OhcmlvLCBwb2RlLXNlIHRhbWLDqW0gZGVmaW5pciBtYW51YWxtZW50ZSBhIHJvdGluYSBkbyBjb21wb25lbnRlLlxuICpcbiAqXG4gKiBQYXJhIGEgbW9kYWwgZGUgZGlnaXRhw6fDo28gZGUgY8OzZGlnbyBTTVMsIMOpIHBvc3PDrXZlbCBkZWZpbmlyIHVtYSBtZW5zYWdlbSBkZSBlcnJvXG4gKiBjdXN0b21pemFkYSBjb20gYSBwcm9wcmllZGFkZSBgcC1jb2RlLWVycm9yYCBlIGjDoSB1bSBsaW5rIHBhcmFcbiAqIHJlZW52aW8gZGUgY8OzZGlnbyBwb3IgU01TLiBBbyByZWVudmlhciwgbyBldmVudG8gYHAtY29kZS1zdWJtaXRgIGVudmlhIHVtIG9iamV0byBjb20gbyB0ZWxlZm9uZSBkbyB1c3XDoXJpbyBlIGEgcXVhbnRpZGFkZVxuICogZGUgdmV6ZXMgZW0gcXVlIG8gdXN1w6FyaW8gZmV6IGEgc29saWNpdGHDp8OjbyBkZSByZWVudmlvLlxuICpcbiAqID4gw4kgaW5kaWNhZGEgYSB1dGlsaXphw6fDo28gZGEgdGVsYSBkZSBkaWdpdGHDp8OjbyBwYXJhIGVudmlvIGRlIGPDs2RpZ28gU01TIGFwZW5hc1xuICogc2UgYSBvcMOnw6NvIHBvciBlbnZpbyBTTVMgZm9yIGRpc3BvbmliaWxpemFkYSBwYXJhIG8gdXN1w6FyaW8uXG4gKlxuICpcbiAqIEEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBjb250w6ltIHVtYSBhw6fDo28gZGUgcmVlbnZpbyBlIG8gZXZlbnRvIGBwLXN1Ym1pdGBcbiAqIMOpIHF1ZW0gcGFzc2EgbyBvYmpldG8gY29udGVuZG8gbyBlbWFpbCBlbSBjb25qdW50byBjb20gYSBxdWFudGlkYWRlIGRlIHRlbnRhdGl2YXMgZGUgcmVlbnZpby5cbiAqXG4gKiA+IEEgdGVsYSBkZSBjb25maXJtYcOnw6NvIMOpIGluZGljYWRhIHBhcmEgcXVhbmRvIG8gdXN1w6FyaW8gc29saWNpdGFyIGEgdHJvY2EgYXRyYXbDqXMgZG8gZW1haWwuXG4gKlxuICogPiBPcyB0ZXh0b3MgZGFzIG1vZGFscyBzw6NvIHByw6ktZGVmaW5pZG9zLCBpbXV0w6F2ZWlzIGUgc8OjbyB0cmFkdXppZG9zIGRlIGFjb3JkbyBjb20gbyBpZGlvbWEgZG8gKmJyb3dzZXIqIChwdCwgZW4gZSBlcylcbiAqXG4gKiBQYXJhIHF1ZSBhcyBpbWFnZW5zIHNlamFtIGV4aWJpZGFzIGNvcnJldGFtZW50ZSwgw6kgbmVjZXNzw6FyaW8gaW5jbHVpciBvIGNhbWluaG8gZGVsYXMgYW8gcHJvamV0by4gUGFyYSBpc3NvLCBlZGl0ZVxuICogbyAqYXNzZXRzKiBubyBhcnF1aXZvICoqYW5ndWxhci5qc29uKiogZGEgYXBsaWNhw6fDo28gbmEgc2VndWludGUgb3JkZW06XG4gKiBgYGBcbiAqICAgXCJhc3NldHNcIjogW1xuICogICAgIFwic3JjL2Fzc2V0c1wiLFxuICogICAgIFwic3JjL2Zhdmljb24uaWNvXCIsXG4gKiAgICAge1xuICogICAgICAgXCJnbG9iXCI6IFwiKipcXC8qXCIsXG4gKiAgICAgICBcImlucHV0XCI6IFwibm9kZV9tb2R1bGVzL0Bwby11aS9zdHlsZS9pbWFnZXNcIixcbiAqICAgICAgIFwib3V0cHV0XCI6IFwiYXNzZXRzL2ltYWdlc1wiXG4gKiAgICAgfVxuICogICBdXG4gKiBgYGBcbiAqL1xuQERpcmVjdGl2ZSgpXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlCYXNlQ29tcG9uZW50IHtcbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5pw6fDo28gZGUgbWVuc2FnZW0gZGUgZXJybyBjdXN0b21pemFkYSBwYXJhIHF1YW5kbyBvIHVzdcOhcmlvIHBhc3NhciB1bSBjw7NkaWdvIFNNUyBpbnbDoWxpZG8gb3UgZXJyYWRvLlxuICAgKi9cbiAgQElucHV0KCdwLWNvZGUtZXJyb3InKSBjb2RlRXJyb3I6IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFbmRwb2ludCB1c2FkbyBwZWxvIHRlbXBsYXRlIHBhcmEgcmVxdWlzacOnw6NvIGRvIHJlY3Vyc28uIFF1YW5kbyBwcmVlbmNoaWRvLFxuICAgKiBvIG3DqXRvZG9zIGBwLXN1Ym1pdGAgZSBgcC1zdWJtaXQtY29kZWAgc2Vyw6NvIGlnbm9yYWRvcyBlIG8gY29tcG9uZW50ZSBhZHF1aXJpcsOhIGF1dG9tYXRpemHDp8Ojb1xuICAgKiBwYXJhIG8gcHJvY2Vzc28gZGUgc29saWNpdGHDp8OjbyBkZSB0cm9jYSBkZSBzZW5oYS5cbiAgICpcbiAgICogIyMjIFByb2Nlc3Nvc1xuICAgKiBBbyBkaWdpdGFyIHVtIHZhbG9yIHbDoWxpZG8gbm8gY2FtcG8gZGUgZW1haWwvdGVsZWZvbmUgZSBwcmVzc2lvbmFyICoqZW52aWFyKiosXG4gICAqIG8gY29tcG9uZW50ZSBmYXLDoSB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBuYSB1cmwgZXNwZWNpZmljYWRhIG5lc3RhIHByb3ByaWVkYWRlIHBhc3NhbmRvIG8gb2JqZXRvIGNvbnRlbmRvIG8gdmFsb3IgZGVmaW5pZG8gcGVsbyB1c3XDoXJpby5cbiAgICpcbiAgICogYGBgXG4gICAqIGJvZHkge1xuICAgKiAgZW1haWw6IGVtYWlsLFxuICAgKiAgcmV0cnk/OiByZXRyeVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiAjIyMjIFJlY3VwZXJhw6fDo28gcG9yIGVtYWlsXG4gICAqIFBhcmEgYSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhIHBvciAqKmVtYWlsKiosIG8gY8OzZGlnbyBkZSByZXNwb3N0YSBIVFRQIGRlIHN0YXR1cyBlc3BlcmFkbyDDqSBgMjA0YC5cbiAgICpcbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgc2Vyw6EgZXhpYmlkYSBhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gZGUgZS1tYWlsIHBhcmEgbyB1c3XDoXJpby5cbiAgICpcbiAgICpcbiAgICogPiBBIGHDp8OjbyAqKlJlZW52aWFyKiogbmEgdGVsYSBkZSBjb25maXJtYcOnw6NvIGVmZXR1YSB1bWEgbm92YSByZXF1aXNpw6fDo29cbiAgICogcGFzc2FuZG8tc2UgbyBvYmpldG8gY29tIGluY3JlbWVudG8gcGFyYSBvIHZhbG9yIGRhIHByb3ByaWVkYWRlICoqcmV0cnkqKi5cbiAgICpcbiAgICogKlByb2Nlc3NvIGZpbmFsaXphZG8uKlxuICAgKlxuICAgKlxuICAgKiAjIyMjIFJlY3VwZXJhw6fDo28gcG9yIFNNU1xuICAgKiBTZSBhIG9ww6fDo28gZGUgcmVjdXBlcmHDp8OjbyBmb3IgcG9yICoqU01TKiosIG8gY8OzZGlnbyBkZSBzdGF0dXMgZGUgc3VjZXNzbyBkZXZlIHNlciBgMjAwYC5cbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgYWJyZS1zZSBhIG1vZGFsIGRlIGRpZ2l0YcOnw6NvIGRlIGPDs2RpZ28gU01TIGUgYSByZXNwb3N0YVxuICAgKiBkZXN0YSByZXF1aXNpw6fDo28gZGV2ZSByZXRvcm5hciB1bWEgZGVmaW5pw6fDo28gZGUgZGFkb3MgYWJhaXhvOlxuICAgKlxuICAgKiBgYGBcbiAgICogMjAwOlxuICAgKiAge1xuICAgKiAgICBoYXNoOiBoYXNoLFxuICAgKiAgICB1cmxWYWxpZGF0aW9uQ29kZT86IHVybFxuICAgKiAgfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogLSBPICoqaGFzaCoqIHNlcsOhIG8gY8OzZGlnbyBkZSB2YWxpZGHDp8OjbyBkYSBzb2xpY2l0YcOnw6NvIGRvIFNNUyBwYXJhIHNlciBlbnZpYWRvIGp1bnRhbWVudGUgY29tIG8gY8OzZGlnbyBkZSB2ZXJpZmljYcOnw6NvIGRvIFNNUztcbiAgICogLSAqKnVybFZhbGlkYXRpb25Db2RlKiogw6kgYSB1cmwgdXNhZGEgcGFyYSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIGVudmlhZG8gcG9yIFNNUy5cbiAgICpcbiAgICpcbiAgICogPiBDYXNvIG7Do28gc2VqYSBwYXNzYWRvIHVybFZhbGlkYXRpb25Db2RlLCBvIGVuZHBvaW50IHVzYWRvIHBhcmEgdmFsaWRhw6fDo28gZG8gY8OzZGlnbyBzZXLDoSBgPHAtdXJsLXJlY292ZXJ5Pi92YWxpZGF0aW9uYC5cbiAgICpcbiAgICpcbiAgICogIyMjIyBWYWxpZGHDp8OjbyBkbyBjw7NkaWdvIFNNU1xuICAgKiBBbyBkaWdpdGFyIHVtIHZhbG9yIHbDoWxpZG8gbm8gY2FtcG8gZGUgY8OzZGlnbyBTTVMgZSBwcmVzc2lvbmFyICoqY29udGludWFyKiosIG8gY29tcG9uZW50ZSBmYXLDoSB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBjb250ZW5kbzpcbiAgICpcbiAgICogYGBgXG4gICAqIFBPU1QgLzxwLXVybC1yZWNvdmVyeT4vdmFsaWRhdGlvbiBPVSAvPHVybFZhbGlkYXRpb25Db2RlPlxuICAgKiBCb2R5IHtcbiAgICogIGhhc2g6IGhhc2gsXG4gICAqICBjb2RlOiBjb2RlXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqIE8gY8OzZGlnbyBkZSByZXNwb3N0YSBIVFRQIGRlIHN0YXR1cyBlc3BlcmFkbyDDqSBgMjAwYC5cbiAgICpcbiAgICogRW0gY2FzbyBkZSAqKmVycm8qKiBuYSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIFNNUywgYSBtb2RhbCBzZSBtYW50w6ltIGNvbSBvIGNhbXBvIHBhcmEgZGlnaXRhw6fDo29cbiAgICogZGUgY8OzZGlnbyBTTVNcbiAgICpcbiAgICpcbiAgICogPiBQb2RlLXNlIGF0cmlidWlyIGEgbWVuc2FnZW0gZGUgZXJybyAobWVzc2FnZSkgcGFyYSBvIGF0cmlidXRvIGBwLWNvZGUtZXJyb3JgIGNvbmZvcm1lIHJldG9ybm8gYWJhaXhvOlxuICAgKlxuICAgKiBgYGBcbiAgICogNDAwXG4gICAqICB7XG4gICAqICAgIGVycm9yIHtcbiAgICogICAgICBtZXNzYWdlOiAnRXJyb3IgTWVzc2FnZSdcbiAgICogICAgfVxuICAgKiAgfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgZXNwZXJhLXNlIGEgcmVzcG9zdGEgZGVzdGEgcmVxdWlzacOnw6NvIHJldG9ybmFuZG8gYSBzZWd1aW50ZSBkZWZpbmnDp8OjbzpcbiAgICpcbiAgICogYGBgXG4gICAqIDIwMDpcbiAgICogIHtcbiAgICogICAgdG9rZW46IHRva2VuLFxuICAgKiAgICB1cmxDaGFuZ2VQYXNzd29yZD86IHVybFxuICAgKiAgfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogLSAqKnRva2VuKio6IFRva2VuIGRlIGFsdGVyYcOnw6NvIGRlIHNlbmhhO1xuICAgKiAtICoqdXJsQ2hhbmdlUGFzc3dvcmQqKjogdXJsIHBhcmEgbyBmb3JtdWzDoXJpbyBkZSBhbHRlcmHDp8OjbyBkZSBzZW5oYS5cbiAgICpcbiAgICpcbiAgICogTyBjb21wb25lbnRlIGVzdMOhIGNvbmZpZ3VyYWRvIHBhcmEgcmVkaXJlY2lvbmFyIHBhcmEgYSB1cmwgZXN0YWJlbGVjaWRhIGVtIGB1cmxDaGFuZ2VQYXNzd29yZGAuXG4gICAqXG4gICAqID4gQ2FzbyBuw6NvIHNlamEgcGFzc2FkbyB2YWxvciBwYXJhIHVybENoYW5nZVBhc3N3b3JkLFxuICAgKiBhIHVybCB1c2FkYSBwYXJhIHZhbGlkYcOnw6NvIHNlcsOhIGEgYDxwLXVybC1yZWNvdmVyeT4vY2hhbmdlUGFzc3dvcmQ/dG9rZW49PHRva2VuPmAuXG4gICAqXG4gICAqICpQcm9jZXNzbyBmaW5hbGl6YWRvLipcbiAgICovXG4gIEBJbnB1dCgncC11cmwtcmVjb3ZlcnknKSB1cmxSZWNvdmVyeT86IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBw6fDo28gY29udGVuZG8gY29tbyBwYXLDom1ldHJvIG8gY8OzZGlnbyBlbnZpYWRvIHBvciBTTVMgZSBkaWdpdGFkbyBwZWxvIHVzdcOhcmlvLlxuICAgKlxuICAgKiA+IEVzdGEgcHJvcHJpZWRhZGUgc2Vyw6EgaWdub3JhZGEgc2UgZm9yIGRlZmluaWRvIHZhbG9yIHBhcmEgYSBwcm9wcmllZGFkZSBgcC11cmwtcmVjb3ZlcnlgLlxuICAgKi9cbiAgQE91dHB1dCgncC1jb2RlLXN1Ym1pdCcpIGNvZGVTdWJtaXQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBBw6fDo28gY29udGVuZG8gbyBlbWFpbCBjb21vIHBhcsOibWV0cm8gZSBxdWUgw6kgZXhlY3V0YWRhIHF1YW5kbyBvIHVzdcOhcmlvIGNsaWNhIHNvYnJlcyBvcyBib3TDtWVzIGRlICdlbnZpYXInIGUgJ3JlZW52aWFyJyBlLW1haWwuXG4gICAqXG4gICAqID4gRXN0YSBwcm9wcmllZGFkZSBzZXLDoSBpZ25vcmFkYSBzZSBmb3IgZGVmaW5pZG8gdmFsb3IgcGFyYSBhIHByb3ByaWVkYWRlIGBwLXVybC1yZWNvdmVyeWAuXG4gICAqL1xuICBAT3V0cHV0KCdwLXN1Ym1pdCcpIHN1Ym1pdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIGVtYWlsOiBzdHJpbmc7XG4gIG1heExlbmd0aCA9IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1heExlbmd0aDtcbiAgbWluTGVuZ3RoID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0TWluTGVuZ3RoO1xuICBtb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlQWxsOiBib29sZWFuO1xuICBwaG9uZTogc3RyaW5nO1xuICBzbXNDb2RlOiBzdHJpbmc7XG4gIHNtc0NvZGVFcnJvck1lc3NhZ2U6IHN0cmluZztcblxuICBsaXRlcmFsczoge1xuICAgIGNhbmNlbEJ1dHRvbjogc3RyaW5nO1xuICAgIGNsb3NlQnV0dG9uOiBzdHJpbmc7XG4gICAgY29udGludWVCdXR0b246IHN0cmluZztcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIGVtYWlsRXJyb3JNZXNzYWdlUGhyYXNlOiBzdHJpbmc7XG4gICAgZW1haWxTZW50Q29uZmlybWF0aW9uUGhyYXNlOiBzdHJpbmc7XG4gICAgZW1haWxTZW50VGl0bGU6IHN0cmluZztcbiAgICBmb3Jnb3RQYXNzd29yZFRpdGxlOiBzdHJpbmc7XG4gICAgaW5zZXJ0Q29kZTogc3RyaW5nO1xuICAgIGluc2VydEVtYWlsOiBzdHJpbmc7XG4gICAgaW5zZXJ0UGhvbmU6IHN0cmluZztcbiAgICBwaG9uZUVycm9yTWVzc2FnZVBocmFzZTogc3RyaW5nO1xuICAgIHByZXBvc2l0aW9uSW46IHN0cmluZztcbiAgICBwcmVwb3NpdGlvbk9yOiBzdHJpbmc7XG4gICAgcmVjb3ZlcnlQYXNzd29yZFBocmFzZTogc3RyaW5nO1xuICAgIHJlc2VuZEVtYWlsQnV0dG9uOiBzdHJpbmc7XG4gICAgcmVzZW5kU21zQ29kZVBocmFzZTogc3RyaW5nO1xuICAgIHNlbmRBZ2Fpbjogc3RyaW5nO1xuICAgIHNlbmRBZ2FpblBocmFzZTogc3RyaW5nO1xuICAgIHNlbmRCdXR0b246IHN0cmluZztcbiAgICBzbXM6IHN0cmluZztcbiAgICBzbXNDb2RlOiBzdHJpbmc7XG4gICAgc21zQ29kZUVycm9yTWVzc2FnZVBocmFzZTogc3RyaW5nO1xuICAgIHNlbnRTbXNDb2RlUGhyYXNlOiBzdHJpbmc7XG4gICAgc3VwcG9ydENvbnRhY3Q6IHN0cmluZztcbiAgICB0ZWxlcGhvbmU6IHN0cmluZztcbiAgICB0eXBlQ29kZVRpdGxlOiBzdHJpbmc7XG4gIH0gPSBwb01vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzW3BvTG9jYWxlRGVmYXVsdF07XG5cbiAgcHJpdmF0ZSBfY29udGFjdEVtYWlsOiBzdHJpbmc7XG4gIHByaXZhdGUgX3Bob25lTWFzayA9IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdFBob25lO1xuICBwcml2YXRlIF90eXBlOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUgPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVEZWZhdWx0O1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluacOnw6NvIGRvIGUtbWFpbCBxdWUgw6kgZXhpYmlkbyBuYSBtZW5zYWdlbSBwYXJhIGNvbnRhdG8gZGUgc3Vwb3J0ZS5cbiAgICovXG4gIEBJbnB1dCgncC1jb250YWN0LWVtYWlsJykgc2V0IGNvbnRhY3RFbWFpbCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fY29udGFjdEVtYWlsID0gdmFsdWU7XG5cbiAgICB0aGlzLnNtc0NvZGVFcnJvck1lc3NhZ2UgPSB0aGlzLmNvbmNhdGVuYXRlU01TRXJyb3JNZXNzYWdlKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBjb250YWN0RW1haWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhY3RFbWFpbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluacOnw6NvIGRhIG1hc2NhcmEgZG8gY2FtcG8gZGUgdGVsZWZvbmUuXG4gICAqXG4gICAqIEBkZWZhdWx0IGAoOTkpIDk5OTk5LTk5OTlgXG4gICAqL1xuICBASW5wdXQoJ3AtcGhvbmUtbWFzaycpIHNldCBwaG9uZU1hc2sodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX3Bob25lTWFzayA9IHZhbHVlIHx8IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdFBob25lO1xuICAgIHRoaXMubWluTGVuZ3RoID0gdGhpcy5tYXhMZW5ndGggPSB0aGlzLl9waG9uZU1hc2subGVuZ3RoO1xuICB9XG5cbiAgZ2V0IHBob25lTWFzaygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGhvbmVNYXNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIG8gdGlwbyBkZSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhIHF1ZSBzZXLDoSBleGliaWRvLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkVtYWlsYFxuICAgKlxuICAgKi9cbiAgQElucHV0KCdwLXR5cGUnKSBzZXQgdHlwZSh2YWx1ZTogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlKSB7XG4gICAgdGhpcy5fdHlwZSA9ICg8YW55Pk9iamVjdCkudmFsdWVzKFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSkuaW5jbHVkZXModmFsdWUpXG4gICAgICA/IHZhbHVlXG4gICAgICA6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZURlZmF1bHQ7XG4gIH1cblxuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxhbmd1YWdlU2VydmljZTogUG9MYW5ndWFnZVNlcnZpY2UpIHtcbiAgICB0aGlzLmxpdGVyYWxzID0ge1xuICAgICAgLi4udGhpcy5saXRlcmFscyxcbiAgICAgIC4uLnBvTW9kYWxQYXNzd29yZFJlY292ZXJ5TGl0ZXJhbHNbbGFuZ3VhZ2VTZXJ2aWNlLmdldFNob3J0TGFuZ3VhZ2UoKV1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjb25jYXRlbmF0ZVNNU0Vycm9yTWVzc2FnZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgY29uc3QgbGl0ZXJhbENvZGVFcnJvck1lc3NhZ2UgPSB0aGlzLmxpdGVyYWxzLnNtc0NvZGVFcnJvck1lc3NhZ2VQaHJhc2U7XG5cbiAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUgIT09ICcnXG4gICAgICA/IGAke2xpdGVyYWxDb2RlRXJyb3JNZXNzYWdlfSAke3RoaXMubGl0ZXJhbHMucHJlcG9zaXRpb25Jbn0gJHt2YWx1ZX0uYFxuICAgICAgOiBsaXRlcmFsQ29kZUVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY8OjbyBwYXJhIGNvbmNsdXPDo28gZGUgcHJvY2Vzc28gZSBmZWNoYW1lbnRvIGRhIG1vZGFsLiBJbmRpY2Etc2Ugc3VhIHV0aWxpemHDp8Ojb1xuICAgKiBwYXJhIGFww7NzIG8gZW52aW8gZSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIFNNUyBlbnZpYWRvIHBlbG8gdXN1w6FyaW8uXG4gICAqXG4gICAqID4gTmFzIG1vZGFscyBlbSBxdWUgaMOhIGEgYcOnw6NvIGRlICdjYW5jZWxhcicgZGlzcGVuc2Etc2UgbyB1c28gZGVzdGEgYcOnw6NvIHBvaXMgbyBjb21wb25lbnRlIGrDoSB0cmF0YSBvIGZlY2hhbWVudG8gZGEgbW9kYWwuXG4gICAqL1xuICBhYnN0cmFjdCBjb21wbGV0ZWQoKTogdm9pZDtcblxuICAvKipcbiAgICogQWJyZSBhIG1vZGFsIGRlIHByZWVuY2hpbWVudG8gZGUgZW1haWwgb3UgbsO6bWVybyBkZSB0ZWxlZm9uZSBwYXJhIHNvbGljaXRhw6fDo28gZGUgdHJvY2EgZGUgc2VuaGEuXG4gICAqL1xuICBhYnN0cmFjdCBvcGVuKCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEFicmUgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIGRlIGVudmlvIGRlIGVtYWlsLlxuICAgKi9cbiAgYWJzdHJhY3Qgb3BlbkNvbmZpcm1hdGlvbigpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBBYnJlIGEgbW9kYWwgZGUgcHJlZW5jaGltZW50byBkbyBjw7NkaWdvIFNNUyBlbnZpYWRvIGFvIHVzdcOhcmlvLlxuICAgKi9cbiAgYWJzdHJhY3Qgb3BlblNtc0NvZGUoKTogdm9pZDtcbn1cbiJdfQ==